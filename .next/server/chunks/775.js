"use strict";exports.id=775,exports.ids=[775],exports.modules={2775:(a,b,c)=>{function d(a,b){this.name="AggregateError",this.errors=a,this.message=b||""}c.r(b),c.d(b,{ALPHA_MODES:()=>X.Gk,AbstractBatchRenderer:()=>K.SD,AbstractMultiResource:()=>K.CI,AbstractRenderer:()=>K.kp,AccessibilityManager:()=>M,AnimatedSprite:()=>cI,AppLoaderPlugin:()=>am,Application:()=>cx,ArrayResource:()=>K.aV,Attribute:()=>K.nW,BLEND_MODES:()=>X.B9,BUFFER_BITS:()=>X.wn,BUFFER_TYPE:()=>X.yw,BaseImageResource:()=>K.jH,BasePrepare:()=>bF,BaseRenderTexture:()=>K.LE,BaseTexture:()=>K.t5,BatchDrawCall:()=>K.hq,BatchGeometry:()=>K.JH,BatchPluginFactory:()=>K.oA,BatchRenderer:()=>K.ch,BatchShaderGenerator:()=>K.LQ,BatchSystem:()=>K.A6,BatchTextureArray:()=>K.cc,BitmapFont:()=>b9,BitmapFontData:()=>b1,BitmapFontLoader:()=>ce,BitmapText:()=>cd,BlobResource:()=>au,Bounds:()=>J.cz,BrowserAdapter:()=>aq.OF,Buffer:()=>K.hp,BufferResource:()=>K.dZ,CLEAR_MODES:()=>X.fr,COLOR_MASK_BITS:()=>X.Eq,CanvasResource:()=>K.Bu,Circle:()=>N.jl,CompressedTextureLoader:()=>aw,CompressedTextureResource:()=>av,Container:()=>J.mc,ContextSystem:()=>K.bD,CountLimiter:()=>bx,CubeResource:()=>K.WQ,DDSLoader:()=>aK,DEG_TO_RAD:()=>N.Td,DRAW_MODES:()=>X._4,DisplayObject:()=>J.q9,ENV:()=>X.Km,Ellipse:()=>N.Pp,ExtensionType:()=>K.Ag,Extract:()=>Z,FORMATS:()=>X.hR,FORMATS_TO_COMPONENTS:()=>aH,FillStyle:()=>aS,Filter:()=>K.dJ,FilterState:()=>K.OO,FilterSystem:()=>K.u9,Framebuffer:()=>K.GW,FramebufferSystem:()=>K.nj,GC_MODES:()=>X.OS,GLFramebuffer:()=>K.pq,GLProgram:()=>K._H,GLTexture:()=>K.Ru,GRAPHICS_CURVES:()=>aR,Geometry:()=>K.V2,GeometrySystem:()=>K.kb,Graphics:()=>bf,GraphicsData:()=>a9,GraphicsGeometry:()=>bb,IGLUniformData:()=>K.n1,INSTALLED:()=>K.Ln,INTERNAL_FORMATS:()=>g,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>ar,ImageBitmapResource:()=>K.di,ImageResource:()=>K.Gj,InteractionData:()=>P,InteractionEvent:()=>R,InteractionManager:()=>W,InteractionTrackingData:()=>S,KTXLoader:()=>aL,LINE_CAP:()=>p,LINE_JOIN:()=>o,LineStyle:()=>bc,Loader:()=>al,LoaderResource:()=>ag,MASK_TYPES:()=>X.vg,MIPMAP_MODES:()=>X.E8,MSAA_QUALITY:()=>X.he,MaskData:()=>K.XN,MaskSystem:()=>K.iW,Matrix:()=>N.uq,Mesh:()=>bZ,MeshBatchUvs:()=>bW,MeshGeometry:()=>b_,MeshMaterial:()=>b$,NineSlicePlane:()=>cF,ObjectRenderer:()=>K.Pt,ObservablePoint:()=>N.oA,PI_2:()=>N.TO,PRECISION:()=>X.Pk,ParticleContainer:()=>aO,ParticleRenderer:()=>aQ,PlaneGeometry:()=>cA,Point:()=>N.bR,Polygon:()=>N.tS,Prepare:()=>bJ,Program:()=>K.BP,ProjectionSystem:()=>K.hk,Quad:()=>K.kO,QuadUv:()=>K.X1,RAD_TO_DEG:()=>N.bO,RENDERER_TYPE:()=>X.h3,Rectangle:()=>N.M_,RenderTexture:()=>K.Y7,RenderTexturePool:()=>K.O1,RenderTextureSystem:()=>K.Bw,Renderer:()=>K.A4,ResizePlugin:()=>cw,Resource:()=>K.FW,RopeGeometry:()=>cB,RoundedRectangle:()=>N.TE,Runner:()=>cG.b,SAMPLER_TYPES:()=>X.XZ,SCALE_MODES:()=>X.M6,SHAPES:()=>N.HY,SVGResource:()=>K.$f,ScissorSystem:()=>K.s9,Shader:()=>K.Mt,ShaderSystem:()=>K.$P,SimpleMesh:()=>cE,SimplePlane:()=>cD,SimpleRope:()=>cC,Sprite:()=>bk,SpriteMaskFilter:()=>K.ah,Spritesheet:()=>bL,SpritesheetLoader:()=>bM,State:()=>K.Uw,StateSystem:()=>K.D8,StencilSystem:()=>K.iH,System:()=>K.iQ,TARGETS:()=>X.dW,TEXT_GRADIENT:()=>r,TYPES:()=>X.QE,TYPES_TO_BYTES_PER_COMPONENT:()=>aG,TYPES_TO_BYTES_PER_PIXEL:()=>aI,TemporaryDisplayObject:()=>J.dC,Text:()=>bv,TextFormat:()=>b2,TextMetrics:()=>bt,TextStyle:()=>bo,Texture:()=>K.gP,TextureGCSystem:()=>K.lB,TextureLoader:()=>an,TextureMatrix:()=>K.NW,TextureSystem:()=>K.vB,TextureUvs:()=>K.OE,Ticker:()=>O.Rv,TickerPlugin:()=>O.y,TilingSprite:()=>bQ,TilingSpriteRenderer:()=>bT,TimeLimiter:()=>bK,Transform:()=>N.dL,UPDATE_PRIORITY:()=>O.dQ,UniformGroup:()=>K.k2,VERSION:()=>K.xv,VideoResource:()=>K.A5,ViewableBuffer:()=>K.u3,WRAP_MODES:()=>X.uR,XMLFormat:()=>b3,XMLStringFormat:()=>b4,accessibleTarget:()=>L,autoDetectFormat:()=>b6,autoDetectRenderer:()=>K.q5,autoDetectResource:()=>K.Nc,checkMaxIfStatementsInShader:()=>K.uC,createUBOElements:()=>K._J,defaultFilterVertex:()=>K.Eo,defaultVertex:()=>K.MT,extensions:()=>K.XO,filters:()=>cJ,generateProgram:()=>K.CF,generateUniformBufferSync:()=>K.He,getTestContext:()=>K.WD,getUBOData:()=>K.RO,graphicsUtils:()=>bg,groupD8:()=>N.ER,interactiveTarget:()=>U,isMobile:()=>aq.Fr,parseDDS:()=>aD,parseKTX:()=>aJ,resources:()=>K.ES,settings:()=>aq.W0,systems:()=>K.nV,uniformParsers:()=>K.$Z,utils:()=>I}),d.prototype=Error.prototype;var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=setTimeout;function t(a){return!!(a&&void 0!==a.length)}function u(){}function v(a){if(!(this instanceof v))throw TypeError("Promises must be constructed via new");if("function"!=typeof a)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],B(a,this)}function w(a,b){for(;3===a._state;)a=a._value;if(0===a._state)return void a._deferreds.push(b);a._handled=!0,v._immediateFn(function(){var c,d=1===a._state?b.onFulfilled:b.onRejected;if(null===d)return void(1===a._state?x:y)(b.promise,a._value);try{c=d(a._value)}catch(a){y(b.promise,a);return}x(b.promise,c)})}function x(a,b){try{if(b===a)throw TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var c=b.then;if(b instanceof v){a._state=3,a._value=b,z(a);return}if("function"==typeof c)return void B(function(){c.apply(b,arguments)},a)}a._state=1,a._value=b,z(a)}catch(b){y(a,b)}}function y(a,b){a._state=2,a._value=b,z(a)}function z(a){2===a._state&&0===a._deferreds.length&&v._immediateFn(function(){a._handled||v._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;b<c;b++)w(a,a._deferreds[b]);a._deferreds=null}function A(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function B(a,b){var c=!1;try{a(function(a){c||(c=!0,x(b,a))},function(a){c||(c=!0,y(b,a))})}catch(a){if(c)return;c=!0,y(b,a)}}v.prototype.catch=function(a){return this.then(null,a)},v.prototype.then=function(a,b){var c=new this.constructor(u);return w(this,new A(a,b,c)),c},v.prototype.finally=function(a){var b=this.constructor;return this.then(function(c){return b.resolve(a()).then(function(){return c})},function(c){return b.resolve(a()).then(function(){return b.reject(c)})})},v.all=function(a){return new v(function(b,c){if(!t(a))return c(TypeError("Promise.all accepts an array"));var d=Array.prototype.slice.call(a);if(0===d.length)return b([]);for(var e=d.length,f=0;f<d.length;f++)!function a(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(b){a(f,b)},c)}d[f]=g,0==--e&&b(d)}catch(a){c(a)}}(f,d[f])})},v.any=function(a){var b=this;return new b(function(c,e){if(!(a&&void 0!==a.length))return e(TypeError("Promise.any accepts an array"));var f=Array.prototype.slice.call(a);if(0===f.length)return e();for(var g=[],h=0;h<f.length;h++)try{b.resolve(f[h]).then(c).catch(function(a){g.push(a),g.length===f.length&&e(new d(g,"All promises were rejected"))})}catch(a){e(a)}})},v.allSettled=function(a){return new this(function(b,c){if(!(a&&void 0!==a.length))return c(TypeError(typeof a+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var d=Array.prototype.slice.call(a);if(0===d.length)return b([]);for(var e=d.length,f=0;f<d.length;f++)!function a(c,f){if(f&&("object"==typeof f||"function"==typeof f)){var g=f.then;if("function"==typeof g)return void g.call(f,function(b){a(c,b)},function(a){d[c]={status:"rejected",reason:a},0==--e&&b(d)})}d[c]={status:"fulfilled",value:f},0==--e&&b(d)}(f,d[f])})},v.resolve=function(a){return a&&"object"==typeof a&&a.constructor===v?a:new v(function(b){b(a)})},v.reject=function(a){return new v(function(b,c){c(a)})},v.race=function(a){return new v(function(b,c){if(!t(a))return c(TypeError("Promise.race accepts an array"));for(var d=0,e=a.length;d<e;d++)v.resolve(a[d]).then(b,c)})},v._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){s(a,0)},v._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var C=c(2852);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=v),Object.assign||(Object.assign=C),Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(globalThis.performance&&globalThis.performance.now)){var D=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-D}}for(var E=Date.now(),F=["ms","moz","webkit","o"],G=0;G<F.length&&!globalThis.requestAnimationFrame;++G){var H=F[G];globalThis.requestAnimationFrame=globalThis[H+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[H+"CancelAnimationFrame"]||globalThis[H+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(a){if("function"!=typeof a)throw TypeError(a+"is not a function");var b=Date.now(),c=16+E-b;return c<0&&(c=0),E=b,globalThis.self.setTimeout(function(){E=Date.now(),a(performance.now())},c)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(a){return clearTimeout(a)}),Math.sign||(Math.sign=function(a){return 0===(a=Number(a))||isNaN(a)?a:a>0?1:-1}),Number.isInteger||(Number.isInteger=function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var I=c(4684),J=c(8986),K=c(4662),L={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};J.q9.mixin(L);var M=function(){function a(a){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(I.isMobile.tablet||I.isMobile.phone)&&this.createTouchHook();var b=document.createElement("div");b.style.width="100px",b.style.height="100px",b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.zIndex="2",this.div=b,this.renderer=a,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(a.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),a.prototype.createTouchHook=function(){var a=this,b=document.createElement("button");b.style.width="1px",b.style.height="1px",b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",b.style.zIndex="2",b.style.backgroundColor="#FF0000",b.title="select to enable accessibility for this content",b.addEventListener("focus",function(){a._isMobileAccessibility=!0,a.activate(),a.destroyTouchHook()}),document.body.appendChild(b),this._hookDiv=b},a.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},a.prototype.activate=function(){var a;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null==(a=this.renderer.view.parentNode)||a.appendChild(this.div))},a.prototype.deactivate=function(){var a;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null==(a=this.div.parentNode)||a.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(a){if(a.visible&&a.accessibleChildren){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);var b=a.children;if(b)for(var c=0;c<b.length;c++)this.updateAccessibleObjects(b[c])}},a.prototype.update=function(){var a=performance.now();if((!I.isMobile.android.device||!(a<this.androidUpdateCount))&&(this.androidUpdateCount=a+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var b=this.renderer.view.getBoundingClientRect(),c=b.left,d=b.top,e=b.width,f=b.height,g=this.renderer,h=g.width,i=g.height,j=g.resolution,k=e/h*j,l=f/i*j,m=this.div;m.style.left=c+"px",m.style.top=d+"px",m.style.width=h+"px",m.style.height=i+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,(0,I.removeItems)(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--;else{m=o._accessibleDiv;var p=o.hitArea,q=o.worldTransform;o.hitArea?(m.style.left=(q.tx+p.x*q.a)*k+"px",m.style.top=(q.ty+p.y*q.d)*l+"px",m.style.width=p.width*q.a*k+"px",m.style.height=p.height*q.d*l+"px"):(p=o.getBounds(),this.capHitArea(p),m.style.left=p.x*k+"px",m.style.top=p.y*l+"px",m.style.width=p.width*k+"px",m.style.height=p.height*l+"px",m.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(m.title=o.accessibleTitle),m.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&m.setAttribute("aria-label",o.accessibleHint)),(o.accessibleTitle!==m.title||o.tabIndex!==m.tabIndex)&&(m.title=o.accessibleTitle,m.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}},a.prototype.updateDebugHTML=function(a){a.innerHTML="type: "+a.type+"</br> title : "+a.title+"</br> tabIndex: "+a.tabIndex},a.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0);var b=this.renderer,c=b.width,d=b.height;a.x+a.width>c&&(a.width=c-a.x),a.y+a.height>d&&(a.height=d-a.y)},a.prototype.addChild=function(a){var b=this.pool.pop();b||((b=document.createElement("button")).style.width="100px",b.style.height="100px",b.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",b.style.position="absolute",b.style.zIndex="2",b.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?b.setAttribute("aria-live","off"):b.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?b.setAttribute("aria-relevant","additions"):b.setAttribute("aria-relevant","text"),b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this))),b.style.pointerEvents=a.accessiblePointerEvents,b.type=a.accessibleType,a.accessibleTitle&&null!==a.accessibleTitle?b.title=a.accessibleTitle:a.accessibleHint&&null!==a.accessibleHint||(b.title="displayObject "+a.tabIndex),a.accessibleHint&&null!==a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint),this.debug&&this.updateDebugHTML(b),a._accessibleActive=!0,a._accessibleDiv=b,b.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},a.prototype._onClick=function(a){var b=this.renderer.plugins.interaction,c=a.target.displayObject,d=b.eventData;b.dispatchEvent(c,"click",d),b.dispatchEvent(c,"pointertap",d),b.dispatchEvent(c,"tap",d)},a.prototype._onFocus=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","assertive");var b=this.renderer.plugins.interaction,c=a.target.displayObject,d=b.eventData;b.dispatchEvent(c,"mouseover",d)},a.prototype._onFocusOut=function(a){a.target.getAttribute("aria-live")||a.target.setAttribute("aria-live","polite");var b=this.renderer.plugins.interaction,c=a.target.displayObject,d=b.eventData;b.dispatchEvent(c,"mouseout",d)},a.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()},a.prototype._onMouseMove=function(a){(0!==a.movementX||0!==a.movementY)&&this.deactivate()},a.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a.extension={name:"accessibility",type:[K.Ag.RendererPlugin,K.Ag.CanvasRendererPlugin]},a}(),N=c(1602),O=c(3234),P=function(){function a(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new N.bR,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(a.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),a.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)},a.prototype.copyEvent=function(a){"isPrimary"in a&&a.isPrimary&&(this.isPrimary=!0),this.button="button"in a&&a.button;var b="buttons"in a&&a.buttons;this.buttons=Number.isInteger(b)?b:"which"in a&&a.which,this.width="width"in a&&a.width,this.height="height"in a&&a.height,this.tiltX="tiltX"in a&&a.tiltX,this.tiltY="tiltY"in a&&a.tiltY,this.pointerType="pointerType"in a&&a.pointerType,this.pressure="pressure"in a&&a.pressure,this.rotationAngle="rotationAngle"in a&&a.rotationAngle,this.twist="twist"in a&&a.twist||0,this.tangentialPressure="tangentialPressure"in a&&a.tangentialPressure||0},a.prototype.reset=function(){this.isPrimary=!1},a}(),Q=function(a,b){return(Q=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},R=function(){function a(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return a.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},a.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},a}(),S=function(){function a(b){this._pointerId=b,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(a,b){b?this._flags=this._flags|a:this._flags=this._flags&~a},Object.defineProperty(a.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"flags",{get:function(){return this._flags},set:function(a){this._flags=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"none",{get:function(){return this._flags===a.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"over",{get:function(){return(this._flags&a.FLAGS.OVER)!=0},set:function(b){this._doSet(a.FLAGS.OVER,b)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rightDown",{get:function(){return(this._flags&a.FLAGS.RIGHT_DOWN)!=0},set:function(b){this._doSet(a.FLAGS.RIGHT_DOWN,b)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"leftDown",{get:function(){return(this._flags&a.FLAGS.LEFT_DOWN)!=0},set:function(b){this._doSet(a.FLAGS.LEFT_DOWN,b)},enumerable:!1,configurable:!0}),a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),a}(),T=function(){function a(){this._tempPoint=new N.bR}return a.prototype.recursiveFindHit=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f,g=a.data.global;e=b.interactive||e;var h=!1,i=e,j=!0;if(b.hitArea)d&&(b.worldTransform.applyInverse(g,this._tempPoint),b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:(d=!1,j=!1)),i=!1;else if(b._mask&&d){var k=b._mask.isMaskData?b._mask.maskObject:b._mask;!k||(null==(f=k.containsPoint)?void 0:f.call(k,g))||(d=!1)}if(j&&b.interactiveChildren&&b.children)for(var l=b.children,m=l.length-1;m>=0;m--){var n=l[m],o=this.recursiveFindHit(a,n,c,d,i);if(o){if(!n.parent)continue;i=!1,o&&(a.target&&(d=!1),h=!0)}}return e&&(d&&!a.target&&!b.hitArea&&b.containsPoint&&b.containsPoint(g)&&(h=!0),b.interactive&&(h&&!a.target&&(a.target=b),c&&c(a,b,!!h))),h},a.prototype.findHit=function(a,b,c,d){this.recursiveFindHit(a,b,c,d,!1)},a}(),U={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(value){value?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};J.q9.mixin(U);var V={target:null,data:{global:null}},W=function(a){function b(){this.constructor=c}function c(b,c){var d=a.call(this)||this;return c=c||{},d.renderer=b,d.autoPreventDefault=void 0===c.autoPreventDefault||c.autoPreventDefault,d.interactionFrequency=c.interactionFrequency||10,d.mouse=new P,d.mouse.identifier=1,d.mouse.global.set(-999999),d.activeInteractionData={},d.activeInteractionData[1]=d.mouse,d.interactionDataPool=[],d.eventData=new R,d.interactionDOMElement=null,d.moveWhenInside=!1,d.eventsAdded=!1,d.tickerAdded=!1,d.mouseOverRenderer=!("PointerEvent"in globalThis),d.supportsTouchEvents="ontouchstart"in globalThis,d.supportsPointerEvents=!!globalThis.PointerEvent,d.onPointerUp=d.onPointerUp.bind(d),d.processPointerUp=d.processPointerUp.bind(d),d.onPointerCancel=d.onPointerCancel.bind(d),d.processPointerCancel=d.processPointerCancel.bind(d),d.onPointerDown=d.onPointerDown.bind(d),d.processPointerDown=d.processPointerDown.bind(d),d.onPointerMove=d.onPointerMove.bind(d),d.processPointerMove=d.processPointerMove.bind(d),d.onPointerOut=d.onPointerOut.bind(d),d.processPointerOverOut=d.processPointerOverOut.bind(d),d.onPointerOver=d.onPointerOver.bind(d),d.cursorStyles={default:"inherit",pointer:"pointer"},d.currentCursorMode=null,d.cursor=null,d.resolution=1,d.delayedEvents=[],d.search=new T,d._tempDisplayObject=new J.dC,d._eventListenerOptions={capture:!0,passive:!1},d._useSystemTicker=void 0===c.useSystemTicker||c.useSystemTicker,d.setTargetElement(d.renderer.view,d.renderer.resolution),d}return Q(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),Object.defineProperty(c.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(a){this._useSystemTicker=a,a?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),c.prototype.hitTest=function(a,b){return V.target=null,V.data.global=a,b||(b=this.lastObjectRendered),this.processInteractive(V,b,null,!0),V.target},c.prototype.setTargetElement=function(a,b){void 0===b&&(b=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=a,this.resolution=b,this.addEvents(),this.addTickerListener()},c.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(O.Rv.system.add(this.tickerUpdate,this,O.dQ.INTERACTION),this.tickerAdded=!0)},c.prototype.removeTickerListener=function(){this.tickerAdded&&(O.Rv.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},c.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var a=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(a.msContentZooming="none",a.msTouchAction="none"):this.supportsPointerEvents&&(a.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},c.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var a=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(a.msContentZooming="",a.msTouchAction=""):this.supportsPointerEvents&&(a.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},c.prototype.tickerUpdate=function(a){this._deltaTime+=a,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},c.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}for(var a in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(a)){var b=this.activeInteractionData[a];if(b.originalEvent&&"touch"!==b.pointerType){var c=this.configureInteractionEventForDOMEvent(this.eventData,b.originalEvent,b);this.processInteractive(c,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},c.prototype.setCursorMode=function(a){a=a||"default";var b=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(b=!1),this.currentCursorMode!==a){this.currentCursorMode=a;var c=this.cursorStyles[a];if(c)switch(typeof c){case"string":b&&(this.interactionDOMElement.style.cursor=c);break;case"function":c(a);break;case"object":b&&Object.assign(this.interactionDOMElement.style,c)}else b&&"string"==typeof a&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,a)&&(this.interactionDOMElement.style.cursor=a)}},c.prototype.dispatchEvent=function(a,b,c){(!c.stopPropagationHint||a===c.stopsPropagatingAt)&&(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},c.prototype.delayDispatchEvent=function(a,b,c){this.delayedEvents.push({displayObject:a,eventString:b,eventData:c})},c.prototype.mapPositionToPoint=function(a,b,c){var d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0},e=1/this.resolution;a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)*e,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)*e},c.prototype.processInteractive=function(a,b,c,d){var e=this.search.findHit(a,b,c,d),f=this.delayedEvents;if(!f.length)return e;a.stopPropagationHint=!1;var g=f.length;this.delayedEvents=[];for(var h=0;h<g;h++){var i=f[h],j=i.displayObject,k=i.eventString,l=i.eventData;l.stopsPropagatingAt===j&&(l.stopPropagationHint=!0),this.dispatchEvent(j,k,l)}return e},c.prototype.onPointerDown=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var b=this.normalizeToPointerData(a);this.autoPreventDefault&&b[0].isNormalized&&(!a.cancelable&&"cancelable"in a||a.preventDefault());for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);if(g.data.originalEvent=a,this.processInteractive(g,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",g),"touch"===e.pointerType)this.emit("touchstart",g);else if("mouse"===e.pointerType||"pen"===e.pointerType){var h=2===e.button;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},c.prototype.processPointerDown=function(a,b,c){var d=a.data,e=a.data.identifier;if(c){if(b.trackedPointers[e]||(b.trackedPointers[e]=new S(e)),this.dispatchEvent(b,"pointerdown",a),"touch"===d.pointerType)this.dispatchEvent(b,"touchstart",a);else if("mouse"===d.pointerType||"pen"===d.pointerType){var f=2===d.button;f?b.trackedPointers[e].rightDown=!0:b.trackedPointers[e].leftDown=!0,this.dispatchEvent(b,f?"rightdown":"mousedown",a)}}},c.prototype.onPointerComplete=function(a,b,c){var d=this.normalizeToPointerData(a),e=d.length,f=a.target;a.composedPath&&a.composedPath().length>0&&(f=a.composedPath()[0]);for(var g=f!==this.interactionDOMElement?"outside":"",h=0;h<e;h++){var i=d[h],j=this.getInteractionDataForPointerId(i),k=this.configureInteractionEventForDOMEvent(this.eventData,i,j);if(k.data.originalEvent=a,this.processInteractive(k,this.lastObjectRendered,c,b||!g),this.emit(b?"pointercancel":"pointerup"+g,k),"mouse"===i.pointerType||"pen"===i.pointerType){var l=2===i.button;this.emit(l?"rightup"+g:"mouseup"+g,k)}else"touch"===i.pointerType&&(this.emit(b?"touchcancel":"touchend"+g,k),this.releaseInteractionDataForPointerId(i.pointerId))}},c.prototype.onPointerCancel=function(a){this.supportsTouchEvents&&"touch"===a.pointerType||this.onPointerComplete(a,!0,this.processPointerCancel)},c.prototype.processPointerCancel=function(a,b){var c=a.data,d=a.data.identifier;void 0!==b.trackedPointers[d]&&(delete b.trackedPointers[d],this.dispatchEvent(b,"pointercancel",a),"touch"===c.pointerType&&this.dispatchEvent(b,"touchcancel",a))},c.prototype.onPointerUp=function(a){this.supportsTouchEvents&&"touch"===a.pointerType||this.onPointerComplete(a,!1,this.processPointerUp)},c.prototype.processPointerUp=function(a,b,c){var d=a.data,e=a.data.identifier,f=b.trackedPointers[e],g="touch"===d.pointerType,h="mouse"===d.pointerType||"pen"===d.pointerType,i=!1;if(h){var j=2===d.button,k=S.FLAGS,l=j?k.RIGHT_DOWN:k.LEFT_DOWN,m=void 0!==f&&f.flags&l;c?(this.dispatchEvent(b,j?"rightup":"mouseup",a),m&&(this.dispatchEvent(b,j?"rightclick":"click",a),i=!0)):m&&this.dispatchEvent(b,j?"rightupoutside":"mouseupoutside",a),f&&(j?f.rightDown=!1:f.leftDown=!1)}c?(this.dispatchEvent(b,"pointerup",a),g&&this.dispatchEvent(b,"touchend",a),f&&((!h||i)&&this.dispatchEvent(b,"pointertap",a),g&&(this.dispatchEvent(b,"tap",a),f.over=!1))):f&&(this.dispatchEvent(b,"pointerupoutside",a),g&&this.dispatchEvent(b,"touchendoutside",a)),f&&f.none&&delete b.trackedPointers[e]},c.prototype.onPointerMove=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var b=this.normalizeToPointerData(a);("mouse"===b[0].pointerType||"pen"===b[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);g.data.originalEvent=a,this.processInteractive(g,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",g),"touch"===e.pointerType&&this.emit("touchmove",g),("mouse"===e.pointerType||"pen"===e.pointerType)&&this.emit("mousemove",g)}"mouse"===b[0].pointerType&&this.setCursorMode(this.cursor)}},c.prototype.processPointerMove=function(a,b,c){var d=a.data,e="touch"===d.pointerType,f="mouse"===d.pointerType||"pen"===d.pointerType;f&&this.processPointerOverOut(a,b,c),(!this.moveWhenInside||c)&&(this.dispatchEvent(b,"pointermove",a),e&&this.dispatchEvent(b,"touchmove",a),f&&this.dispatchEvent(b,"mousemove",a))},c.prototype.onPointerOut=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var b=this.normalizeToPointerData(a)[0];"mouse"===b.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var c=this.getInteractionDataForPointerId(b),d=this.configureInteractionEventForDOMEvent(this.eventData,b,c);d.data.originalEvent=b,this.processInteractive(d,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",d),"mouse"===b.pointerType||"pen"===b.pointerType?this.emit("mouseout",d):this.releaseInteractionDataForPointerId(c.identifier)}},c.prototype.processPointerOverOut=function(a,b,c){var d=a.data,e=a.data.identifier,f="mouse"===d.pointerType||"pen"===d.pointerType,g=b.trackedPointers[e];c&&!g&&(g=b.trackedPointers[e]=new S(e)),void 0!==g&&(c&&this.mouseOverRenderer?(!g.over&&(g.over=!0,this.delayDispatchEvent(b,"pointerover",a),f&&this.delayDispatchEvent(b,"mouseover",a)),f&&null===this.cursor&&(this.cursor=b.cursor)):g.over&&(g.over=!1,this.dispatchEvent(b,"pointerout",this.eventData),f&&this.dispatchEvent(b,"mouseout",a),g.none&&delete b.trackedPointers[e]))},c.prototype.onPointerOver=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var b=this.normalizeToPointerData(a)[0],c=this.getInteractionDataForPointerId(b),d=this.configureInteractionEventForDOMEvent(this.eventData,b,c);d.data.originalEvent=b,"mouse"===b.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",d),("mouse"===b.pointerType||"pen"===b.pointerType)&&this.emit("mouseover",d)}},c.prototype.getInteractionDataForPointerId=function(a){var b,c=a.pointerId;return 1===c||"mouse"===a.pointerType?b=this.mouse:this.activeInteractionData[c]?b=this.activeInteractionData[c]:((b=this.interactionDataPool.pop()||new P).identifier=c,this.activeInteractionData[c]=b),b.copyEvent(a),b},c.prototype.releaseInteractionDataForPointerId=function(a){var b=this.activeInteractionData[a];b&&(delete this.activeInteractionData[a],b.reset(),this.interactionDataPool.push(b))},c.prototype.configureInteractionEventForDOMEvent=function(a,b,c){return a.data=c,this.mapPositionToPoint(c.global,b.clientX,b.clientY),"touch"===b.pointerType&&(b.globalX=c.global.x,b.globalY=c.global.y),c.originalEvent=b,a.reset(),a},c.prototype.normalizeToPointerData=function(a){var b=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var c=0,d=a.changedTouches.length;c<d;c++){var e=a.changedTouches[c];void 0===e.button&&(e.button=+!!a.touches.length),void 0===e.buttons&&(e.buttons=+!!a.touches.length),void 0===e.isPrimary&&(e.isPrimary=1===a.touches.length&&"touchstart"===a.type),void 0===e.width&&(e.width=e.radiusX||1),void 0===e.height&&(e.height=e.radiusY||1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="touch"),void 0===e.pointerId&&(e.pointerId=e.identifier||0),void 0===e.pressure&&(e.pressure=e.force||.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),void 0===e.layerX&&(e.layerX=e.offsetX=e.clientX),void 0===e.layerY&&(e.layerY=e.offsetY=e.clientY),e.isNormalized=!0,b.push(e)}else(!globalThis.MouseEvent||a instanceof MouseEvent&&(!this.supportsPointerEvents||!(a instanceof globalThis.PointerEvent)))&&(void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=1),void 0===a.pressure&&(a.pressure=.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0),b.push(a);return b},c.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},c.extension={name:"interaction",type:[K.Ag.RendererPlugin,K.Ag.CanvasRendererPlugin]},c}(I.EventEmitter),X=c(1964),Y=new N.M_,Z=function(){function a(a){this.renderer=a}return a.prototype.image=function(a,b,c){var d=new Image;return d.src=this.base64(a,b,c),d},a.prototype.base64=function(a,b,c){return this.canvas(a).toDataURL(b,c)},a.prototype.canvas=function(b,c){var d=this._rawPixels(b,c),e=d.pixels,f=d.width,g=d.height,h=d.flipY,i=new I.CanvasRenderTarget(f,g,1),j=i.context.getImageData(0,0,f,g);if(a.arrayPostDivide(e,j.data),i.context.putImageData(j,0,0),h){var k=new I.CanvasRenderTarget(i.width,i.height,1);k.context.scale(1,-1),k.context.drawImage(i.canvas,0,-g),i.destroy(),i=k}return i.canvas},a.prototype.pixels=function(b,c){var d=this._rawPixels(b,c).pixels;return a.arrayPostDivide(d,d),d},a.prototype._rawPixels=function(a,b){var c,d,e=this.renderer,f=!1,g=!1;if(a)if(a instanceof K.Y7)d=a;else{var h=e.context.webGLVersion>=2?e.multisample:X.he.NONE;if(d=this.renderer.generateTexture(a,{multisample:h}),h!==X.he.NONE){var i=K.Y7.create({width:d.width,height:d.height});e.framebuffer.bind(d.framebuffer),e.framebuffer.blit(i.framebuffer),e.framebuffer.bind(null),d.destroy(!0),d=i}g=!0}d?(c=d.baseTexture.resolution,b=null!=b?b:d.frame,f=!1,e.renderTexture.bind(d)):(c=e.resolution,b||((b=Y).width=e.width,b.height=e.height),f=!0,e.renderTexture.bind(null));var j=Math.round(b.width*c),k=Math.round(b.height*c),l=new Uint8Array(4*j*k),m=e.gl;return m.readPixels(Math.round(b.x*c),Math.round(b.y*c),j,k,m.RGBA,m.UNSIGNED_BYTE,l),g&&d.destroy(!0),{pixels:l,width:j,height:k,flipY:f}},a.prototype.destroy=function(){this.renderer=null},a.arrayPostDivide=function(a,b){for(var c=0;c<a.length;c+=4){var d=b[c+3]=a[c+3];0!==d?(b[c]=Math.round(Math.min(255*a[c]/d,255)),b[c+1]=Math.round(Math.min(255*a[c+1]/d,255)),b[c+2]=Math.round(Math.min(255*a[c+2]/d,255))):(b[c]=a[c],b[c+1]=a[c+1],b[c+2]=a[c+2])}},a.extension={name:"extract",type:K.Ag.RendererPlugin},a}(),$=function(){function a(a,b,c){void 0===b&&(b=!1),this._fn=a,this._once=b,this._thisArg=c,this._next=this._prev=this._owner=null}return a.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},a}();function _(a,b){return a._head?(a._tail._next=b,b._prev=a._tail):a._head=b,a._tail=b,b._owner=a,b}var aa=function(){function a(){this._head=this._tail=void 0}return a.prototype.handlers=function(a){void 0===a&&(a=!1);var b=this._head;if(a)return!!b;for(var c=[];b;)c.push(b),b=b._next;return c},a.prototype.has=function(a){if(!(a instanceof $))throw Error("MiniSignal#has(): First arg must be a SignalBinding object.");return a._owner===this},a.prototype.dispatch=function(){for(var a=arguments,b=[],c=0;c<arguments.length;c++)b[c]=a[c];var d=this._head;if(!d)return!1;for(;d;)d._once&&this.detach(d),d._fn.apply(d._thisArg,b),d=d._next;return!0},a.prototype.add=function(a,b){if(void 0===b&&(b=null),"function"!=typeof a)throw Error("MiniSignal#add(): First arg must be a Function.");return _(this,new $(a,!1,b))},a.prototype.once=function(a,b){if(void 0===b&&(b=null),"function"!=typeof a)throw Error("MiniSignal#once(): First arg must be a Function.");return _(this,new $(a,!0,b))},a.prototype.detach=function(a){if(!(a instanceof $))throw Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return a._owner!==this||(a._prev&&(a._prev._next=a._next),a._next&&(a._next._prev=a._prev),a===this._head?(this._head=a._next,null===a._next&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null),a._owner=null),this},a.prototype.detachAll=function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this},a}();function ab(a,b){for(var c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d="queryKey",e=/(?:^|&)([^&=]*)=?([^&]*)/g,f=({strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/})[(b=b||{}).strictMode?"strict":"loose"].exec(a),g={},h=14;h--;)g[c[h]]=f[h]||"";return g[d]={},g[c[12]].replace(e,function(a,b,c){b&&(g[d][b]=c)}),g}var ac=null;function ad(){}function ae(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}function af(a){return a.toString().replace("object ","")}var ag=function(){function a(b,c,d){if(this._dequeue=ad,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof b||"string"!=typeof c)throw Error("Both name and url are required for constructing a resource.");d=d||{},this._flags=0,this._setFlag(a.STATUS_FLAGS.DATA_URL,0===c.indexOf("data:")),this.name=b,this.url=c,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===d.crossOrigin?"anonymous":d.crossOrigin,this.timeout=d.timeout||0,this.loadType=d.loadType||this._determineLoadType(),this.xhrType=d.xhrType,this.metadata=d.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=a.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ad,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new aa,this.onProgress=new aa,this.onComplete=new aa,this.onAfterMiddleware=new aa}return a.setExtensionLoadType=function(b,c){ae(a._loadTypeMap,b,c)},a.setExtensionXhrType=function(b,c){ae(a._xhrTypeMap,b,c)},Object.defineProperty(a.prototype,"isDataUrl",{get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isComplete",{get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isLoading",{get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),a.prototype.complete=function(){this._clearEvents(),this._finish()},a.prototype.abort=function(b){if(!this.error){if(this.error=Error(b),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},a.prototype.load=function(b){var c=this;if(!this.isLoading){if(this.isComplete){b&&setTimeout(function(){return b(c)},1);return}switch(b&&this.onComplete.once(b),this._setFlag(a.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE,this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO,this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO,this._loadSourceElement("video");break;case a.LOAD_TYPE.XHR:default:void 0===e&&(e=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),e&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},a.prototype._hasFlag=function(a){return(this._flags&a)!=0},a.prototype._setFlag=function(a,b){this._flags=b?this._flags|a:this._flags&~a},a.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},a.prototype._finish=function(){if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(a.STATUS_FLAGS.COMPLETE,!0),this._setFlag(a.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},a.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},a.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element: "+a);if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=this.metadata.mimeType,c=0;c<this.url.length;++c)this.data.appendChild(this._createSource(a,this.url[c],Array.isArray(b)?b[c]:b));else{var b=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(b)?b[0]:b))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},a.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(b.withCredentials=!0),b.open("GET",this.url,!0),b.timeout=this.timeout,this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT?b.responseType=a.XHR_RESPONSE_TYPE.TEXT:b.responseType=this.xhrType,b.addEventListener("error",this._boundXhrOnError,!1),b.addEventListener("timeout",this._boundXhrOnTimeout,!1),b.addEventListener("abort",this._boundXhrOnAbort,!1),b.addEventListener("progress",this._boundOnProgress,!1),b.addEventListener("load",this._boundXhrOnLoad,!1),b.send()},a.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new globalThis.XDomainRequest;a.timeout=this.timeout||5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXhrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){return a.send()},1)},a.prototype._createSource=function(a,b,c){c||(c=a+"/"+this._getExtension(b));var d=document.createElement("source");return d.src=b,d.type=c,d},a.prototype._onError=function(a){this.abort("Failed to load element using: "+a.target.nodeName)},a.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)},a.prototype._onTimeout=function(){this.abort("Load timed out.")},a.prototype._xhrOnError=function(){var a=this.xhr;this.abort(af(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},a.prototype._xhrOnTimeout=function(){var a=this.xhr;this.abort(af(a)+" Request timed out.")},a.prototype._xhrOnAbort=function(){var a=this.xhr;this.abort(af(a)+" Request was aborted by the user.")},a.prototype._xhrOnLoad=function(){var b=this.xhr,c="",d=void 0===b.status?200:b.status;if((""===b.responseType||"text"===b.responseType||void 0===b.responseType)&&(c=b.responseText),0===d&&(c.length>0||b.responseType===a.XHR_RESPONSE_TYPE.BUFFER)?d=200:1223===d&&(d=204),(d/100|0)!=2)return void this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL);if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=a.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var e=new DOMParser;this.data=e.parseFromString(c,"text/xml")}else{var f=document.createElement("div");f.innerHTML=c,this.data=f}this.type=a.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=b.response||c;this.complete()},a.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";b=b||globalThis.location,ac||(ac=document.createElement("a")),ac.href=a;var c=ab(ac.href,{strictMode:!0}),d=!c.port&&""===b.port||c.port===b.port,e=c.protocol?c.protocol+":":"";return c.host===b.hostname&&d&&e===b.protocol?"":"anonymous"},a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||a.XHR_RESPONSE_TYPE.TEXT},a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR},a.prototype._getExtension=function(a){void 0===a&&(a=this.url);var b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?"),e=a.indexOf("#"),f=Math.min(d>-1?d:a.length,e>-1?e:a.length);b=(a=a.substring(0,f)).substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";case a.XHR_RESPONSE_TYPE.DEFAULT:case a.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},a}();function ah(){}!function(a){var b,c,d,e;(b=a.STATUS_FLAGS||(a.STATUS_FLAGS={}))[b.NONE=0]="NONE",b[b.DATA_URL=1]="DATA_URL",b[b.COMPLETE=2]="COMPLETE",b[b.LOADING=4]="LOADING",(c=a.TYPE||(a.TYPE={}))[c.UNKNOWN=0]="UNKNOWN",c[c.JSON=1]="JSON",c[c.XML=2]="XML",c[c.IMAGE=3]="IMAGE",c[c.AUDIO=4]="AUDIO",c[c.VIDEO=5]="VIDEO",c[c.TEXT=6]="TEXT",(d=a.LOAD_TYPE||(a.LOAD_TYPE={}))[d.XHR=1]="XHR",d[d.IMAGE=2]="IMAGE",d[d.AUDIO=3]="AUDIO",d[d.VIDEO=4]="VIDEO",(e=a.XHR_RESPONSE_TYPE||(a.XHR_RESPONSE_TYPE={})).DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text",a._loadTypeMap={gif:a.LOAD_TYPE.IMAGE,png:a.LOAD_TYPE.IMAGE,bmp:a.LOAD_TYPE.IMAGE,jpg:a.LOAD_TYPE.IMAGE,jpeg:a.LOAD_TYPE.IMAGE,tif:a.LOAD_TYPE.IMAGE,tiff:a.LOAD_TYPE.IMAGE,webp:a.LOAD_TYPE.IMAGE,tga:a.LOAD_TYPE.IMAGE,avif:a.LOAD_TYPE.IMAGE,svg:a.LOAD_TYPE.IMAGE,"svg+xml":a.LOAD_TYPE.IMAGE,mp3:a.LOAD_TYPE.AUDIO,ogg:a.LOAD_TYPE.AUDIO,wav:a.LOAD_TYPE.AUDIO,mp4:a.LOAD_TYPE.VIDEO,webm:a.LOAD_TYPE.VIDEO},a._xhrTypeMap={xhtml:a.XHR_RESPONSE_TYPE.DOCUMENT,html:a.XHR_RESPONSE_TYPE.DOCUMENT,htm:a.XHR_RESPONSE_TYPE.DOCUMENT,xml:a.XHR_RESPONSE_TYPE.DOCUMENT,tmx:a.XHR_RESPONSE_TYPE.DOCUMENT,svg:a.XHR_RESPONSE_TYPE.DOCUMENT,tsx:a.XHR_RESPONSE_TYPE.DOCUMENT,gif:a.XHR_RESPONSE_TYPE.BLOB,png:a.XHR_RESPONSE_TYPE.BLOB,bmp:a.XHR_RESPONSE_TYPE.BLOB,jpg:a.XHR_RESPONSE_TYPE.BLOB,jpeg:a.XHR_RESPONSE_TYPE.BLOB,tif:a.XHR_RESPONSE_TYPE.BLOB,tiff:a.XHR_RESPONSE_TYPE.BLOB,webp:a.XHR_RESPONSE_TYPE.BLOB,tga:a.XHR_RESPONSE_TYPE.BLOB,avif:a.XHR_RESPONSE_TYPE.BLOB,json:a.XHR_RESPONSE_TYPE.JSON,text:a.XHR_RESPONSE_TYPE.TEXT,txt:a.XHR_RESPONSE_TYPE.TEXT,ttf:a.XHR_RESPONSE_TYPE.BUFFER,otf:a.XHR_RESPONSE_TYPE.BUFFER},a.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(ag||(ag={}));var ai=function(a,b){this.data=a,this.callback=b},aj=function(){function a(a,b){var c=this;if(void 0===b&&(b=1),this.workers=0,this.saturated=ah,this.unsaturated=ah,this.empty=ah,this.drain=ah,this.error=ah,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(a,b,d){if(d&&"function"!=typeof d)throw Error("task callback must be a function");if(c.started=!0,null==a&&c.idle())return void setTimeout(function(){return c.drain()},1);var e=new ai(a,"function"==typeof d?d:ah);b?c._tasks.unshift(e):c._tasks.push(e),setTimeout(c.process,1)},this.process=function(){for(;!c.paused&&c.workers<c.concurrency&&c._tasks.length;){var a=c._tasks.shift();0===c._tasks.length&&c.empty(),c.workers+=1,c.workers===c.concurrency&&c.saturated(),c._worker(a.data,function(a){return function(){for(var b=arguments,c=[],d=0;d<arguments.length;d++)c[d]=b[d];if(null===a)throw Error("Callback was already called.");var e=a;a=null,e.apply(this,c)}}(c._next(a)))}},this._worker=a,0===b)throw Error("Concurrency must not be zero");this.concurrency=b,this.buffer=b/4}return a.prototype._next=function(a){var b=this;return function(){for(var c=arguments,d=[],e=0;e<arguments.length;e++)d[e]=c[e];b.workers-=1,a.callback.apply(a,d),null!=d[0]&&b.error(d[0],a.data),b.workers<=b.concurrency-b.buffer&&b.unsaturated(),b.idle()&&b.drain(),b.process()}},a.prototype.push=function(a,b){this._insert(a,!1,b)},a.prototype.kill=function(){this.workers=0,this.drain=ah,this.started=!1,this._tasks=[]},a.prototype.unshift=function(a,b){this._insert(a,!0,b)},a.prototype.length=function(){return this._tasks.length},a.prototype.running=function(){return this.workers},a.prototype.idle=function(){return this._tasks.length+this.workers===0},a.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},a.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var a=1;a<=this.concurrency;a++)this.process()}},a.eachSeries=function(a,b,c,d){var e=0,f=a.length;!function g(h){if(h||e===f){c&&c(h);return}d?setTimeout(function(){b(a[e++],g)},1):b(a[e++],g)}()},a.queue=function(b,c){return new a(b,c)},a}(),ak=/(#[\w-]+)?$/,al=function(){function a(b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,b){return d._loadResource(a,b)},this.resources={},this.baseUrl=b,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,b){return d._loadResource(a,b)},this._queue=aj.queue(this._boundLoadResource,c),this._queue.pause(),this.resources={},this.onProgress=new aa,this.onError=new aa,this.onLoad=new aa,this.onStart=new aa,this.onComplete=new aa;for(var e=0;e<a._plugins.length;++e){var f=a._plugins[e],g=f.pre,h=f.use;g&&this.pre(g),h&&this.use(h)}this._protected=!1}return a.prototype._add=function(a,b,c,d){if(this.loading&&(!c||!c.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[a])throw Error('Resource named "'+a+'" already exists.');if(b=this._prepareUrl(b),this.resources[a]=new ag(a,b,c),"function"==typeof d&&this.resources[a].onAfterMiddleware.once(d),this.loading){for(var e=c.parentResource,f=[],g=0;g<e.children.length;++g)e.children[g].isComplete||f.push(e.children[g]);var h=e.progressChunk*(f.length+1)/(f.length+2);e.children.push(this.resources[a]),e.progressChunk=h;for(var g=0;g<f.length;++g)f[g].progressChunk=h;this.resources[a].progressChunk=h}return this._queue.push(this.resources[a]),this},a.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},a.prototype.use=function(a){return this._afterMiddleware.push(a),this},a.prototype.reset=function(){for(var a in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var b=this.resources[a];b._onLoadBinding&&b._onLoadBinding.detach(),b.isLoading&&b.abort("loader reset")}return this.resources={},this},a.prototype.load=function(a){if((0,I.deprecation)("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof a&&this.onComplete.once(a),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var b=100/this._queue._tasks.length,c=0;c<this._queue._tasks.length;++c)this._queue._tasks[c].data.progressChunk=b;this._onStart(),this._queue.resume()}return this},Object.defineProperty(a.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(a){this._queue.concurrency=a},enumerable:!1,configurable:!0}),a.prototype._prepareUrl=function(a){var b,c=ab(a,{strictMode:!0});if(b=c.protocol||!c.path||0===a.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a,this.defaultQueryString){var d=ak.exec(b)[0];-1!==(b=b.slice(0,b.length-d.length)).indexOf("?")?b+="&"+this.defaultQueryString:b+="?"+this.defaultQueryString,b+=d}return b},a.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,aj.eachSeries(this._beforeMiddleware,function(b,d){b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a._onLoadBinding=a.onComplete.once(c._onLoad,c),a.load())},!0)},a.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},a.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},a.prototype._onLoad=function(a){var b=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),aj.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.onAfterMiddleware.dispatch(a),b.progress=Math.min(100,b.progress+a.progressChunk),b.onProgress.dispatch(b,a),a.error?b.onError.dispatch(a.error,b,a):b.onLoad.dispatch(b,a),b._resourcesParsing.splice(b._resourcesParsing.indexOf(a),1),b._queue.idle()&&0===b._resourcesParsing.length&&b._onComplete()},!0)},a.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(a,"shared",{get:function(){var b=a._shared;return b||((b=new a)._protected=!0,a._shared=b),b},enumerable:!1,configurable:!0}),a.registerPlugin=function(b){return(0,I.deprecation)("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),K.XO.add({type:K.Ag.Loader,ref:b}),a},a._plugins=[],a}();K.XO.handleByList(K.Ag.Loader,al._plugins),al.prototype.add=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"==typeof a&&(c=a,d=b||c.callback||c.onComplete,b=c.url,a=c.name||c.key||c.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw Error("No url passed to add resource to loader.");return"function"==typeof c&&(d=c,c=null),this._add(a,b,c,d)};var am=function(){function a(){}return a.init=function(a){a=Object.assign({sharedLoader:!1},a),this.loader=a.sharedLoader?al.shared:new al},a.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},a.extension=K.Ag.Application,a}(),an=function(){function a(){}return a.add=function(){ag.setExtensionLoadType("svg",ag.LOAD_TYPE.XHR),ag.setExtensionXhrType("svg",ag.XHR_RESPONSE_TYPE.TEXT)},a.use=function(a,b){if(a.data&&(a.type===ag.TYPE.IMAGE||"svg"===a.extension)){var c=a.data,d=a.url,e=a.name,f=a.metadata;K.gP.fromLoader(c,d,e,f).then(function(c){a.texture=c,b()}).catch(b)}else b()},a.extension=K.Ag.Loader,a}();function ao(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===ag.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var c=globalThis.URL||globalThis.webkitURL,d=c.createObjectURL(a.data);a.blob=a.data,a.data=new Image,a.data.src=d,a.type=ag.TYPE.IMAGE,a.data.onload=function(){c.revokeObjectURL(d),a.data.onload=null,b()};return}}else{var e=a.xhr.getResponseHeader("content-type");if(e&&0===e.indexOf("image")){a.data=new Image,a.data.src="data:"+e+";base64,"+function(a){for(var b="",c=0;c<a.length;){for(var d=[0,0,0],e=[0,0,0,0],f=0;f<d.length;++f)c<a.length?d[f]=255&a.charCodeAt(c++):d[f]=0;switch(e[0]=d[0]>>2,e[1]=(3&d[0])<<4|d[1]>>4,e[2]=(15&d[1])<<2|d[2]>>6,e[3]=63&d[2],c-(a.length-1)){case 2:e[3]=64,e[2]=64;break;case 1:e[3]=64}for(var f=0;f<e.length;++f)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e[f])}return b}(a.xhr.responseText),a.type=ag.TYPE.IMAGE,a.data.onload=function(){a.data.onload=null,b()};return}}b()}var ap=function(){function a(){}return a.extension=K.Ag.Loader,a.use=ao,a}();K.XO.add(an,ap);var aq=c(1546);!function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(g||(g={}));var ar=((f={})[g.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,f[g.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,f[g.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,f[g.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,f[g.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,f[g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,f[g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,f[g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,f[g.COMPRESSED_R11_EAC]=.5,f[g.COMPRESSED_SIGNED_R11_EAC]=.5,f[g.COMPRESSED_RG11_EAC]=1,f[g.COMPRESSED_SIGNED_RG11_EAC]=1,f[g.COMPRESSED_RGB8_ETC2]=.5,f[g.COMPRESSED_RGBA8_ETC2_EAC]=1,f[g.COMPRESSED_SRGB8_ETC2]=.5,f[g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,f[g.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,f[g.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,f[g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,f[g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,f[g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,f[g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,f[g.COMPRESSED_RGB_ETC1_WEBGL]=.5,f[g.COMPRESSED_RGB_ATC_WEBGL]=.5,f[g.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,f[g.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,f[g.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,f),as=function(a,b){return(as=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function at(a,b){function c(){this.constructor=a}as(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var au=function(a){function b(b,c){void 0===c&&(c={width:1,height:1,autoLoad:!0});var d,e,f=this;return"string"==typeof b?(d=b,e=new Uint8Array):(d=null,e=b),(f=a.call(this,e,c)||this).origin=d,f.buffer=e?new K.u3(e):null,f.origin&&!1!==c.autoLoad&&f.load(),e&&e.length&&(f.loaded=!0,f.onBlobLoaded(f.buffer.rawBinaryData)),f}return at(b,a),b.prototype.onBlobLoaded=function(a){},b.prototype.load=function(){var a,b,c,d;return a=this,b=void 0,c=Promise,d=function(){var a;return function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return[4,fetch(this.origin)];case 1:return[4,b.sent().blob()];case 2:return[4,b.sent().arrayBuffer()];case 3:return a=b.sent(),this.data=new Uint32Array(a),this.buffer=new K.u3(a),this.loaded=!0,this.onBlobLoaded(a),this.update(),[2,this]}})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},b}(K.dZ),av=function(a){function b(c,d){var e=a.call(this,c,d)||this;return e.format=d.format,e.levels=d.levels||1,e._width=d.width,e._height=d.height,e._extension=b._formatToExtension(e.format),(d.levelBuffers||e.buffer)&&(e._levelBuffers=d.levelBuffers||b._createLevelBuffers(c instanceof Uint8Array?c:e.buffer.uint8View,e.format,e.levels,4,4,e.width,e.height)),e}return at(b,a),b.prototype.upload=function(a,b,c){var d=a.gl;if(!a.context.extensions[this._extension])throw Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var e=0,f=this.levels;e<f;e++){var g=this._levelBuffers[e],h=g.levelID,i=g.levelWidth,j=g.levelHeight,k=g.levelBuffer;d.compressedTexImage2D(d.TEXTURE_2D,h,this.format,i,j,0,k)}return!0},b.prototype.onBlobLoaded=function(){this._levelBuffers=b._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},b._formatToExtension=function(a){if(a>=33776&&a<=33779)return"s3tc";if(a>=37488&&a<=37497)return"etc";if(a>=35840&&a<=35843)return"pvrtc";if(a>=36196)return"etc1";if(a>=35986&&a<=34798)return"atc";throw Error("Invalid (compressed) texture format given!")},b._createLevelBuffers=function(a,b,c,d,e,f,g){for(var h=Array(c),i=a.byteOffset,j=f,k=g,l=j+d-1&~(d-1),m=k+e-1&~(e-1),n=l*m*ar[b],o=0;o<c;o++)h[o]={levelID:o,levelWidth:c>1?j:l,levelHeight:c>1?k:m,levelBuffer:new Uint8Array(a.buffer,i,n)},i+=n,k=k>>1||1,n=(l=(j=j>>1||1)+d-1&~(d-1))*(m=k+e-1&~(e-1))*ar[b];return h},b}(au),aw=function(){function a(){}return a.use=function(b,c){var d=b.data;if(b.type===ag.TYPE.JSON&&d&&d.cacheID&&d.textures){for(var e=d.textures,f=void 0,g=void 0,h=0,i=e.length;h<i;h++){var j=e[h],k=j.src,l=j.format;if(l||(g=k),a.textureFormats[l]){f=k;break}}if(!(f=f||g))return void c(Error("Cannot load compressed-textures in "+b.url+", make sure you provide a fallback"));if(f===b.url)return void c(Error("URL of compressed texture cannot be the same as the manifest's URL"));var m={crossOrigin:b.crossOrigin,metadata:b.metadata.imageMetadata,parentResource:b},n=I.url.resolve(b.url.replace(this.baseUrl,""),f),o=d.cacheID;this.add(o,n,m,function(a){if(a.error)return void c(a.error);var d=a.texture,e=a.textures;Object.assign(b,{texture:void 0===d?null:d,textures:void 0===e?{}:e}),c()})}else c()},Object.defineProperty(a,"textureExtensions",{get:function(){if(!a._textureExtensions){var b=aq.W0.ADAPTER.createCanvas().getContext("webgl");if(!b)return console.warn("WebGL not available for compressed textures. Silently failing."),{};a._textureExtensions={s3tc:b.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:b.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:b.getExtension("WEBGL_compressed_texture_etc"),etc1:b.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:b.getExtension("WEBGL_compressed_texture_atc"),astc:b.getExtension("WEBGL_compressed_texture_astc")}}return a._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(a,"textureFormats",{get:function(){if(!a._textureFormats){var b=a.textureExtensions;for(var c in a._textureFormats={},b){var d=b[c];d&&Object.assign(a._textureFormats,Object.getPrototypeOf(d))}}return a._textureFormats},enumerable:!1,configurable:!0}),a.extension=K.Ag.Loader,a}();function ax(a,b,c){var d={textures:{},texture:null};return b&&b.map(function(a){return new K.gP(new K.t5(a,Object.assign({mipmap:X.E8.OFF,alphaMode:X.Gk.NO_PREMULTIPLIED_ALPHA},c)))}).forEach(function(b,c){var e=b.baseTexture,f=a+"-"+(c+1);K.t5.addToCache(e,f),K.gP.addToCache(b,f),0===c&&(K.t5.addToCache(e,a),K.gP.addToCache(b,a),d.texture=b),d.textures[f]=b}),d}var ay={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},az={FOURCC:2},aA={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3};!function(a){a[a.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a[a.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a[a.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a[a.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a[a.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a[a.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a[a.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a[a.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a[a.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a[a.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a[a.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a[a.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a[a.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a[a.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a[a.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a[a.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a[a.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a[a.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a[a.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a[a.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a[a.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a[a.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a[a.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a[a.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a[a.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a[a.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a[a.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a[a.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a[a.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a[a.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a[a.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a[a.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a[a.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a[a.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a[a.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a[a.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a[a.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a[a.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a[a.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a[a.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a[a.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a[a.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a[a.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a[a.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a[a.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a[a.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a[a.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a[a.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a[a.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a[a.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a[a.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a[a.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a[a.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a[a.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a[a.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a[a.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a[a.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a[a.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a[a.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a[a.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a[a.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a[a.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a[a.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a[a.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a[a.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a[a.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a[a.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a[a.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a[a.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a[a.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a[a.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a[a.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a[a.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a[a.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a[a.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a[a.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a[a.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a[a.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a[a.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a[a.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a[a.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a[a.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a[a.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a[a.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a[a.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a[a.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a[a.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a[a.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a[a.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a[a.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a[a.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a[a.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a[a.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a[a.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a[a.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a[a.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a[a.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a[a.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a[a.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a[a.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(j||(j={})),function(a){a[a.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",a[a.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",a[a.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(k||(k={}));var aB=((h={})[0x31545844]=g.COMPRESSED_RGBA_S3TC_DXT1_EXT,h[0x33545844]=g.COMPRESSED_RGBA_S3TC_DXT3_EXT,h[0x35545844]=g.COMPRESSED_RGBA_S3TC_DXT5_EXT,h),aC=((i={})[j.DXGI_FORMAT_BC1_TYPELESS]=g.COMPRESSED_RGBA_S3TC_DXT1_EXT,i[j.DXGI_FORMAT_BC1_UNORM]=g.COMPRESSED_RGBA_S3TC_DXT1_EXT,i[j.DXGI_FORMAT_BC2_TYPELESS]=g.COMPRESSED_RGBA_S3TC_DXT3_EXT,i[j.DXGI_FORMAT_BC2_UNORM]=g.COMPRESSED_RGBA_S3TC_DXT3_EXT,i[j.DXGI_FORMAT_BC3_TYPELESS]=g.COMPRESSED_RGBA_S3TC_DXT5_EXT,i[j.DXGI_FORMAT_BC3_UNORM]=g.COMPRESSED_RGBA_S3TC_DXT5_EXT,i[j.DXGI_FORMAT_BC1_UNORM_SRGB]=g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,i[j.DXGI_FORMAT_BC2_UNORM_SRGB]=g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,i[j.DXGI_FORMAT_BC3_UNORM_SRGB]=g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,i);function aD(a){var b=new Uint32Array(a);if(0x20534444!==b[0])throw Error("Invalid DDS file magic word");var c=new Uint32Array(a,0,124/Uint32Array.BYTES_PER_ELEMENT),d=c[ay.HEIGHT],e=c[ay.WIDTH],f=c[ay.MIPMAP_COUNT],g=new Uint32Array(a,ay.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),h=g[1];if(4&h){var i=g[az.FOURCC];if(0x30315844!==i){var j=aB[i];return[new av(new Uint8Array(a,128),{format:j,width:e,height:d,levels:f})]}var l=new Uint32Array(b.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),m=l[aA.DXGI_FORMAT],n=l[aA.RESOURCE_DIMENSION],o=l[aA.MISC_FLAG],p=l[aA.ARRAY_SIZE],q=aC[m];if(void 0===q)throw Error("DDSParser cannot parse texture data with DXGI format "+m);if(4===o)throw Error("DDSParser does not support cubemap textures");if(n===k.DDS_DIMENSION_TEXTURE3D)throw Error("DDSParser does not supported 3D texture data");var r=[];if(1===p)r.push(new Uint8Array(a,148));else{for(var s=ar[q],t=0,u=e,v=d,w=0;w<f;w++)t+=Math.max(1,u+3&-4)*Math.max(1,v+3&-4)*s,u>>>=1,v>>>=1;for(var x=148,w=0;w<p;w++)r.push(new Uint8Array(a,x,t)),x+=t}return r.map(function(a){return new av(a,{format:q,width:e,height:d,levels:f})})}if(64&h)throw Error("DDSParser does not support uncompressed texture data.");if(512&h)throw Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&h)throw Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&h)throw Error("DDSParser does not support single-channel (alpha) texture data!");throw Error("DDSParser failed to load a texture file due to an unknown reason!")}var aE=[171,75,84,88,32,49,49,187,13,10,26,10],aF={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},aG=((l={})[X.QE.UNSIGNED_BYTE]=1,l[X.QE.UNSIGNED_SHORT]=2,l[X.QE.INT]=4,l[X.QE.UNSIGNED_INT]=4,l[X.QE.FLOAT]=4,l[X.QE.HALF_FLOAT]=8,l),aH=((m={})[X.hR.RGBA]=4,m[X.hR.RGB]=3,m[X.hR.RG]=2,m[X.hR.RED]=1,m[X.hR.LUMINANCE]=1,m[X.hR.LUMINANCE_ALPHA]=2,m[X.hR.ALPHA]=1,m),aI=((n={})[X.QE.UNSIGNED_SHORT_4_4_4_4]=2,n[X.QE.UNSIGNED_SHORT_5_5_5_1]=2,n[X.QE.UNSIGNED_SHORT_5_6_5]=2,n);function aJ(a,b,c){void 0===c&&(c=!1);var d,e=new DataView(b);if(!function(a,b){for(var c=0;c<aE.length;c++)if(b.getUint8(c)!==aE[c])return console.error(a+" is not a valid *.ktx file!"),!1;return!0}(a,e))return null;var f=0x4030201===e.getUint32(aF.ENDIANNESS,!0),g=e.getUint32(aF.GL_TYPE,f),h=e.getUint32(aF.GL_FORMAT,f),i=e.getUint32(aF.GL_INTERNAL_FORMAT,f),j=e.getUint32(aF.PIXEL_WIDTH,f),k=e.getUint32(aF.PIXEL_HEIGHT,f)||1,l=e.getUint32(aF.PIXEL_DEPTH,f)||1,m=e.getUint32(aF.NUMBER_OF_ARRAY_ELEMENTS,f)||1,n=e.getUint32(aF.NUMBER_OF_FACES,f),o=e.getUint32(aF.NUMBER_OF_MIPMAP_LEVELS,f),p=e.getUint32(aF.BYTES_OF_KEY_VALUE_DATA,f);if(0===k||1!==l)throw Error("Only 2D textures are supported");if(1!==n)throw Error("CubeTextures are not supported by KTXLoader yet!");if(1!==m)throw Error("WebGL does not support array textures");var q=j+3&-4,r=k+3&-4,s=Array(m),t=j*k;if(0===g&&(t=q*r),void 0===(d=0!==g?aG[g]?aG[g]*aH[h]:aI[g]:ar[i]))throw Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var u=c?function(a,b,c){for(var d=new Map,e=0;e<b;){var f=a.getUint32(64+e,c),g=64+e+4,h=3-(f+3)%4;if(0===f||f>b-e){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var i=0;i<f&&0!==a.getUint8(g+i);i++);if(-1===i){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var j=new TextDecoder().decode(new Uint8Array(a.buffer,g,i)),k=new DataView(a.buffer,g+i+1,f-i-1);d.set(j,k),e+=4+f+h}return d}(e,p,f):null,v=t*d,w=j,x=k,y=q,z=r,A=64+p,B=0;B<o;B++){for(var C=e.getUint32(A,f),D=A+4,E=0;E<m;E++){var F=s[E];F||(F=s[E]=Array(o)),F[B]={levelID:B,levelWidth:o>1||0!==g?w:y,levelHeight:o>1||0!==g?x:z,levelBuffer:new Uint8Array(b,D,v)},D+=v}A+=C+4,A=A%4!=0?A+4-A%4:A,x=x>>1||1,v=(y=(w=w>>1||1)+4-1&-4)*(z=x+4-1&-4)*d}return 0!==g?{uncompressed:s.map(function(a){var b=a[0].levelBuffer,c=!1;return g===X.QE.FLOAT?b=new Float32Array(a[0].levelBuffer.buffer,a[0].levelBuffer.byteOffset,a[0].levelBuffer.byteLength/4):g===X.QE.UNSIGNED_INT?(c=!0,b=new Uint32Array(a[0].levelBuffer.buffer,a[0].levelBuffer.byteOffset,a[0].levelBuffer.byteLength/4)):g===X.QE.INT&&(c=!0,b=new Int32Array(a[0].levelBuffer.buffer,a[0].levelBuffer.byteOffset,a[0].levelBuffer.byteLength/4)),{resource:new K.dZ(b,{width:a[0].levelWidth,height:a[0].levelHeight}),type:g,format:c?function(a){switch(a){case X.hR.RGBA:return X.hR.RGBA_INTEGER;case X.hR.RGB:return X.hR.RGB_INTEGER;case X.hR.RG:return X.hR.RG_INTEGER;case X.hR.RED:return X.hR.RED_INTEGER;default:return a}}(h):h}}),kvData:u}:{compressed:s.map(function(a){return new av(null,{format:i,width:j,height:k,levels:o,levelBuffers:a})}),kvData:u}}ag.setExtensionXhrType("dds",ag.XHR_RESPONSE_TYPE.BUFFER);var aK=function(){function a(){}return a.use=function(a,b){if("dds"===a.extension&&a.data)try{Object.assign(a,ax(a.name||a.url,aD(a.data),a.metadata))}catch(a){b(a);return}b()},a.extension=K.Ag.Loader,a}();ag.setExtensionXhrType("ktx",ag.XHR_RESPONSE_TYPE.BUFFER);var aL=function(){function a(){}return a.use=function(a,b){if("ktx"===a.extension&&a.data)try{var c=a.name||a.url,d=aJ(c,a.data,this.loadKeyValueData),e=d.compressed,f=d.uncompressed,g=d.kvData;if(e){var h=ax(c,e,a.metadata);if(g&&h.textures)for(var i in h.textures)h.textures[i].baseTexture.ktxKeyValueData=g;Object.assign(a,h)}else if(f){var j={};f.forEach(function(a,b){var d=new K.gP(new K.t5(a.resource,{mipmap:X.E8.OFF,alphaMode:X.Gk.NO_PREMULTIPLIED_ALPHA,type:a.type,format:a.format})),e=c+"-"+(b+1);g&&(d.baseTexture.ktxKeyValueData=g),K.t5.addToCache(d.baseTexture,e),K.gP.addToCache(d,e),0===b&&(j[c]=d,K.t5.addToCache(d.baseTexture,c),K.gP.addToCache(d,c)),j[e]=d}),Object.assign(a,{textures:j})}}catch(a){b(a);return}b()},a.extension=K.Ag.Loader,a.loadKeyValueData=!1,a}(),aM=function(a,b){return(aM=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function aN(a,b){function c(){this.constructor=a}aM(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var aO=function(a){function b(b,c,d,e){void 0===b&&(b=1500),void 0===d&&(d=16384),void 0===e&&(e=!1);var f=a.call(this)||this;return d>16384&&(d=16384),f._properties=[!1,!0,!1,!1,!1],f._maxSize=b,f._batchSize=d,f._buffers=null,f._bufferUpdateIDs=[],f._updateID=0,f.interactiveChildren=!1,f.blendMode=X.B9.NORMAL,f.autoResize=e,f.roundPixels=!0,f.baseTexture=null,f.setProperties(c),f._tint=0,f.tintRgb=new Float32Array(4),f.tint=0xffffff,f}return aN(b,a),b.prototype.setProperties=function(a){a&&(this._properties[0]="vertices"in a||"scale"in a?!!a.vertices||!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="tint"in a||"alpha"in a?!!a.tint||!!a.alpha:this._properties[4])},b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(b.prototype,"tint",{get:function(){return this._tint},set:function(a){this._tint=a,(0,I.hex2rgb)(a,this.tintRgb)},enumerable:!1,configurable:!0}),b.prototype.render=function(a){var b=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return b.onChildrenChange(0)})),a.batch.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},b.prototype.onChildrenChange=function(a){for(var b=Math.floor(a/this._batchSize);this._bufferUpdateIDs.length<b;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[b]=++this._updateID},b.prototype.dispose=function(){if(this._buffers){for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._buffers=null}},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},b}(J.mc),aP=function(){function a(a,b,c){this.geometry=new K.V2,this.indexBuffer=null,this.size=c,this.dynamicProperties=[],this.staticProperties=[];for(var d=0;d<a.length;++d){var e=a[d];e={attributeName:e.attributeName,size:e.size,uploadFunction:e.uploadFunction,type:e.type||X.QE.FLOAT,offset:e.offset},b[d]?this.dynamicProperties.push(e):this.staticProperties.push(e)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return a.prototype.initBuffers=function(){var a=this.geometry,b=0;this.indexBuffer=new K.hp((0,I.createIndicesForQuads)(this.size),!0,!0),a.addIndex(this.indexBuffer),this.dynamicStride=0;for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.offset=b,b+=d.size,this.dynamicStride+=d.size}var e=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(e),this.dynamicDataUint32=new Uint32Array(e),this.dynamicBuffer=new K.hp(this.dynamicData,!1,!1);var f=0;this.staticStride=0;for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];d.offset=f,f+=d.size,this.staticStride+=d.size}var g=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(g),this.staticDataUint32=new Uint32Array(g),this.staticBuffer=new K.hp(this.staticData,!0,!1);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];a.addAttribute(d.attributeName,this.dynamicBuffer,0,d.type===X.QE.UNSIGNED_BYTE,d.type,4*this.dynamicStride,4*d.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];a.addAttribute(d.attributeName,this.staticBuffer,0,d.type===X.QE.UNSIGNED_BYTE,d.type,4*this.staticStride,4*d.offset)}},a.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,e.type===X.QE.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer._updateID++},a.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,e.type===X.QE.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,e.offset)}this.staticBuffer._updateID++},a.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},a}(),aQ=function(a){function b(b){var c=a.call(this,b)||this;return c.shader=null,c.properties=null,c.tempMatrix=new N.uq,c.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:c.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:c.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:c.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:c.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:X.QE.UNSIGNED_BYTE,uploadFunction:c.uploadTint,offset:0}],c.shader=K.Mt.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),c.state=K.Uw.for2d(),c}return aN(b,a),b.prototype.render=function(a){var b=a.children,c=a._maxSize,d=a._batchSize,e=this.renderer,f=b.length;if(0!==f){f>c&&!a.autoResize&&(f=c);var g=a._buffers;g||(g=a._buffers=this.generateBuffers(a));var h=b[0]._texture.baseTexture,i=h.alphaMode>0;this.state.blendMode=(0,I.correctBlendMode)(a.blendMode,i),e.state.set(this.state);var j=e.gl,k=a.worldTransform.copyTo(this.tempMatrix);k.prepend(e.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=k.toArray(!0),this.shader.uniforms.uColor=(0,I.premultiplyRgba)(a.tintRgb,a.worldAlpha,this.shader.uniforms.uColor,i),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var l=!1,m=0,n=0;m<f;m+=d,n+=1){var o=f-m;o>d&&(o=d),n>=g.length&&g.push(this._generateOneMoreBuffer(a));var p=g[n];p.uploadDynamic(b,m,o);var q=a._bufferUpdateIDs[n]||0;(l=l||p._updateID<q)&&(p._updateID=a._updateID,p.uploadStatic(b,m,o)),e.geometry.bind(p.geometry),j.drawElements(j.TRIANGLES,6*o,j.UNSIGNED_SHORT,0)}}},b.prototype.generateBuffers=function(a){for(var b=[],c=a._maxSize,d=a._batchSize,e=a._properties,f=0;f<c;f+=d)b.push(new aP(this.properties,e,d));return b},b.prototype._generateOneMoreBuffer=function(a){var b=a._batchSize,c=a._properties;return new aP(this.properties,c,b)},b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g=0,h=0,i=0,j=0,k=0;k<c;++k){var l=a[b+k],m=l._texture,n=l.scale.x,o=l.scale.y,p=m.trim,q=m.orig;p?(g=(h=p.x-l.anchor.x*q.width)+p.width,i=(j=p.y-l.anchor.y*q.height)+p.height):(g=q.width*(1-l.anchor.x),h=-(q.width*l.anchor.x),i=q.height*(1-l.anchor.y),j=-(q.height*l.anchor.y)),d[f]=h*n,d[f+1]=j*o,d[f+e]=g*n,d[f+e+1]=j*o,d[f+2*e]=g*n,d[f+2*e+1]=i*o,d[f+3*e]=h*n,d[f+3*e+1]=i*o,f+=4*e}},b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},b.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0),f+=4*e}},b.prototype.uploadTint=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var h=a[b+g],i=h._texture.baseTexture.alphaMode>0,j=h.alpha,k=j<1&&i?(0,I.premultiplyTint)(h._tintRGB,j):h._tintRGB+(255*j<<24);d[f]=k,d[f+e]=k,d[f+2*e]=k,d[f+3*e]=k,f+=4*e}},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},b.extension={name:"particle",type:K.Ag.RendererPlugin},b}(K.Pt);!function(a){a.MITER="miter",a.BEVEL="bevel",a.ROUND="round"}(o||(o={})),function(a){a.BUTT="butt",a.ROUND="round",a.SQUARE="square"}(p||(p={}));var aR={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(a,b){if(void 0===b&&(b=20),!this.adaptive||!a||isNaN(a))return b;var c=Math.ceil(a/this.maxLength);return c<this.minSegments?c=this.minSegments:c>this.maxSegments&&(c=this.maxSegments),c}},aS=function(){function a(){this.color=0xffffff,this.alpha=1,this.texture=K.gP.WHITE,this.matrix=null,this.visible=!1,this.reset()}return a.prototype.clone=function(){var b=new a;return b.color=this.color,b.alpha=this.alpha,b.texture=this.texture,b.matrix=this.matrix,b.visible=this.visible,b},a.prototype.reset=function(){this.color=0xffffff,this.alpha=1,this.texture=K.gP.WHITE,this.matrix=null,this.visible=!1},a.prototype.destroy=function(){this.texture=null,this.matrix=null},a}(),aT=function(a,b){return(aT=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function aU(a,b){function c(){this.constructor=a}aT(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}function aV(a,b){void 0===b&&(b=!1);var c,d,e=a.length;if(!(e<6)){for(var f=0,g=0,h=a[e-2],i=a[e-1];g<e;g+=2){var j=a[g],k=a[g+1];f+=(j-h)*(k+i),h=j,i=k}if(!b&&f>0||b&&f<=0)for(var l=e/2,g=l+l%2;g<e;g+=2){var m=e-g-2,n=e-g-1,o=g,p=g+1;c=[a[o],a[m]],a[m]=c[0],a[o]=c[1],d=[a[p],a[n]],a[n]=d[0],a[p]=d[1]}}}var aW={build:function(a){a.points=a.shape.points.slice()},triangulate:function(a,b){var c=a.points,d=a.holes,e=b.points,f=b.indices;if(c.length>=6){aV(c,!1);for(var g=[],h=0;h<d.length;h++){var i=d[h];aV(i.points,!0),g.push(c.length/2),c=c.concat(i.points)}var j=(0,I.earcut)(c,g,2);if(!j)return;for(var k=e.length/2,h=0;h<j.length;h+=3)f.push(j[h]+k),f.push(j[h+1]+k),f.push(j[h+2]+k);for(var h=0;h<c.length;h++)e.push(c[h])}}},aX={build:function(a){var b,c,d,e,f,g,h=a.points;if(a.type===N.HY.CIRC){var i=a.shape;b=i.x,c=i.y,f=g=i.radius,d=e=0}else if(a.type===N.HY.ELIP){var j=a.shape;b=j.x,c=j.y,f=j.width,g=j.height,d=e=0}else{var k=a.shape,l=k.width/2,m=k.height/2;b=k.x+l,c=k.y+m,f=g=Math.max(0,Math.min(k.radius,Math.min(l,m))),d=l-f,e=m-g}if(!(f>=0&&g>=0&&d>=0&&e>=0)){h.length=0;return}var n=Math.ceil(2.3*Math.sqrt(f+g)),o=8*n+4*!!d+4*!!e;if(h.length=o,0!==o){if(0===n){h.length=8,h[0]=h[6]=b+d,h[1]=h[3]=c+e,h[2]=h[4]=b-d,h[5]=h[7]=c-e;return}var p=0,q=4*n+2*!!d+2,r=q,s=o,t=d+f,u=e,v=b+t,w=b-t,x=c+u;if(h[p++]=v,h[p++]=x,h[--q]=x,h[--q]=w,e){var y=c-u;h[r++]=w,h[r++]=y,h[--s]=y,h[--s]=v}for(var z=1;z<n;z++){var A=Math.PI/2*(z/n),t=d+Math.cos(A)*f,u=e+Math.sin(A)*g,v=b+t,w=b-t,x=c+u,y=c-u;h[p++]=v,h[p++]=x,h[--q]=x,h[--q]=w,h[r++]=w,h[r++]=y,h[--s]=y,h[--s]=v}var t=d,u=e+g,v=b+t,w=b-t,x=c+u,y=c-u;h[p++]=v,h[p++]=x,h[--s]=y,h[--s]=v,d&&(h[p++]=w,h[p++]=x,h[--s]=y,h[--s]=w)}},triangulate:function(a,b){var c,d,e=a.points,f=b.points,g=b.indices;if(0!==e.length){var h=f.length/2,i=h;if(a.type!==N.HY.RREC){var j=a.shape;c=j.x,d=j.y}else{var k=a.shape;c=k.x+k.width/2,d=k.y+k.height/2}var l=a.matrix;f.push(a.matrix?l.a*c+l.c*d+l.tx:c,a.matrix?l.b*c+l.d*d+l.ty:d),h++,f.push(e[0],e[1]);for(var m=2;m<e.length;m+=2)f.push(e[m],e[m+1]),g.push(h++,i,h);g.push(i+1,i,h)}}},aY={build:function(a){var b=a.shape,c=b.x,d=b.y,e=b.width,f=b.height,g=a.points;g.length=0,g.push(c,d,c+e,d,c+e,d+f,c,d+f)},triangulate:function(a,b){var c=a.points,d=b.points,e=d.length/2;d.push(c[0],c[1],c[2],c[3],c[6],c[7],c[4],c[5]),b.indices.push(e,e+1,e+2,e+1,e+2,e+3)}};function aZ(a,b,c,d,e,f,g){void 0===g&&(g=[]);for(var h,i,j=g,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;q<=20;++q)k=a+(c-a)*(r=q/20),l=b+(d-b)*r,m=c+(e-c)*r,n=d+(f-d)*r,o=(h=k)+(m-h)*r,p=(i=l)+(n-i)*r,(0!==q||j[j.length-2]!==o||j[j.length-1]!==p)&&j.push(o,p);return j}var a$={build:function(a){if(bf.nextRoundedRectBehavior)return void aX.build(a);var b=a.shape,c=a.points,d=b.x,e=b.y,f=b.width,g=b.height,h=Math.max(0,Math.min(b.radius,Math.min(f,g)/2));c.length=0,h?(aZ(d,e+h,d,e,d+h,e,c),aZ(d+f-h,e,d+f,e,d+f,e+h,c),aZ(d+f,e+g-h,d+f,e+g,d+f-h,e+g,c),aZ(d+h,e+g,d,e+g,d,e+g-h,c)):c.push(d,e,d+f,e,d+f,e+g,d,e+g)},triangulate:function(a,b){if(bf.nextRoundedRectBehavior)return void aX.triangulate(a,b);for(var c=a.points,d=b.points,e=b.indices,f=d.length/2,g=(0,I.earcut)(c,null,2),h=0,i=g.length;h<i;h+=3)e.push(g[h]+f),e.push(g[h+1]+f),e.push(g[h+2]+f);for(var h=0,i=c.length;h<i;h++)d.push(c[h],c[++h])}};function a_(a,b,c,d,e,f,g,h){g?(i=d,j=-c):(i=-d,j=c);var i,j,k=a-c*e+i,l=b-d*e+j,m=a+c*f+i,n=b+d*f+j;return h.push(k,l),h.push(m,n),2}function a0(a,b,c,d,e,f,g,h){var i=c-a,j=d-b,k=Math.atan2(i,j),l=Math.atan2(e-a,f-b);h&&k<l?k+=2*Math.PI:!h&&k>l&&(l+=2*Math.PI);var m=k,n=l-k,o=Math.sqrt(i*i+j*j),p=(15*Math.abs(n)*Math.sqrt(o)/Math.PI|0)+1,q=n/p;if(m+=q,h){g.push(a,b),g.push(c,d);for(var r=1,s=m;r<p;r++,s+=q)g.push(a,b),g.push(a+Math.sin(s)*o,b+Math.cos(s)*o);g.push(a,b),g.push(e,f)}else{g.push(c,d),g.push(a,b);for(var r=1,s=m;r<p;r++,s+=q)g.push(a+Math.sin(s)*o,b+Math.cos(s)*o),g.push(a,b);g.push(e,f),g.push(a,b)}return 2*p}function a1(a,b){a.lineStyle.native?function(a,b){var c=0,d=a.shape,e=a.points||d.points,f=d.type!==N.HY.POLY||d.closeStroke;if(0!==e.length){var g=b.points,h=b.indices,i=e.length/2,j=g.length/2,k=j;for(g.push(e[0],e[1]),c=1;c<i;c++)g.push(e[2*c],e[2*c+1]),h.push(k,k+1),k++;f&&h.push(k,j)}}(a,b):function(a,b){var c=a.shape,d=a.points||c.points.slice(),e=b.closePointEps;if(0!==d.length){var f=a.lineStyle,g=new N.bR(d[0],d[1]),h=new N.bR(d[d.length-2],d[d.length-1]),i=c.type!==N.HY.POLY||c.closeStroke,j=Math.abs(g.x-h.x)<e&&Math.abs(g.y-h.y)<e;if(i){d=d.slice(),j&&(d.pop(),d.pop(),h.set(d[d.length-2],d[d.length-1]));var k=(g.x+h.x)*.5,l=(h.y+g.y)*.5;d.unshift(k,l),d.push(k,l)}var m=b.points,n=d.length/2,q=d.length,r=m.length/2,s=f.width/2,t=s*s,u=f.miterLimit*f.miterLimit,v=d[0],w=d[1],x=d[2],y=d[3],z=0,A=0,B=-(w-y),C=v-x,D=0,E=0,F=Math.sqrt(B*B+C*C);B/=F,C/=F,B*=s,C*=s;var G=f.alignment,H=(1-G)*2,I=2*G;i||(f.cap===p.ROUND?q+=a0(v-B*(H-I)*.5,w-C*(H-I)*.5,v-B*H,w-C*H,v+B*I,w+C*I,m,!0)+2:f.cap===p.SQUARE&&(q+=a_(v,w,B,C,H,I,!0,m))),m.push(v-B*H,w-C*H),m.push(v+B*I,w+C*I);for(var J=1;J<n-1;++J){v=d[(J-1)*2],w=d[(J-1)*2+1],x=d[2*J],y=d[2*J+1],z=d[(J+1)*2],A=d[(J+1)*2+1],F=Math.sqrt((B=-(w-y))*B+(C=v-x)*C),B/=F,C/=F,B*=s,C*=s,F=Math.sqrt((D=-(y-A))*D+(E=x-z)*E),D/=F,E/=F,D*=s,E*=s;var K=x-v,L=w-y,M=x-z,O=A-y,P=K*M+L*O,Q=L*M-O*K,R=Q<0;if(Math.abs(Q)<.001*Math.abs(P)){m.push(x-B*H,y-C*H),m.push(x+B*I,y+C*I),P>=0&&(f.join===o.ROUND?q+=a0(x,y,x-B*H,y-C*H,x-D*H,y-E*H,m,!1)+4:q+=2,m.push(x-D*I,y-E*I),m.push(x+D*H,y+E*H));continue}var S=(-B+v)*(-C+y)-(-B+x)*(-C+w),T=(-D+z)*(-E+y)-(-D+x)*(-E+A),U=(K*T-M*S)/Q,V=(O*S-L*T)/Q,W=(U-x)*(U-x)+(V-y)*(V-y),X=x+(U-x)*H,Y=y+(V-y)*H,Z=x-(U-x)*I,$=y-(V-y)*I,_=R?H:I;W<=Math.min(K*K+L*L,M*M+O*O)+_*_*t?f.join===o.BEVEL||W/t>u?(R?(m.push(X,Y),m.push(x+B*I,y+C*I),m.push(X,Y),m.push(x+D*I,y+E*I)):(m.push(x-B*H,y-C*H),m.push(Z,$),m.push(x-D*H,y-E*H),m.push(Z,$)),q+=2):f.join===o.ROUND?R?(m.push(X,Y),m.push(x+B*I,y+C*I),q+=a0(x,y,x+B*I,y+C*I,x+D*I,y+E*I,m,!0)+4,m.push(X,Y),m.push(x+D*I,y+E*I)):(m.push(x-B*H,y-C*H),m.push(Z,$),q+=a0(x,y,x-B*H,y-C*H,x-D*H,y-E*H,m,!1)+4,m.push(x-D*H,y-E*H),m.push(Z,$)):(m.push(X,Y),m.push(Z,$)):(m.push(x-B*H,y-C*H),m.push(x+B*I,y+C*I),f.join===o.ROUND?R?q+=a0(x,y,x+B*I,y+C*I,x+D*I,y+E*I,m,!0)+2:q+=a0(x,y,x-B*H,y-C*H,x-D*H,y-E*H,m,!1)+2:f.join===o.MITER&&W/t<=u&&(R?(m.push(Z,$),m.push(Z,$)):(m.push(X,Y),m.push(X,Y)),q+=2),m.push(x-D*H,y-E*H),m.push(x+D*I,y+E*I),q+=2)}v=d[(n-2)*2],w=d[(n-2)*2+1],x=d[(n-1)*2],F=Math.sqrt((B=-(w-(y=d[(n-1)*2+1])))*B+(C=v-x)*C),B/=F,C/=F,B*=s,C*=s,m.push(x-B*H,y-C*H),m.push(x+B*I,y+C*I),i||(f.cap===p.ROUND?q+=a0(x-B*(H-I)*.5,y-C*(H-I)*.5,x-B*H,y-C*H,x+B*I,y+C*I,m,!1)+2:f.cap===p.SQUARE&&(q+=a_(x,y,B,C,H,I,!1,m)));for(var aa=b.indices,ab=aR.epsilon*aR.epsilon,J=r;J<q+r-2;++J)v=m[2*J],w=m[2*J+1],x=m[(J+1)*2],y=m[(J+1)*2+1],z=m[(J+2)*2],Math.abs(v*(y-(A=m[(J+2)*2+1]))+x*(A-w)+z*(w-y))<ab||aa.push(J,J+1,J+2)}}(a,b)}var a2=function(){function a(){}return a.curveTo=function(a,b,c,d,e,f){var g=f[f.length-2],h=f[f.length-1]-b,i=g-a,j=d-b,k=c-a,l=Math.abs(h*k-i*j);if(l<1e-8||0===e)return(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b),null;var m=h*h+i*i,n=j*j+k*k,o=h*j+i*k,p=e*Math.sqrt(m)/l,q=e*Math.sqrt(n)/l,r=p*o/m,s=q*o/n,t=p*k+q*i,u=p*j+q*h,v=Math.atan2(h*(q+r)-u,i*(q+r)-t),w=Math.atan2(j*(p+s)-u,k*(p+s)-t);return{cx:t+a,cy:u+b,radius:e,startAngle:v,endAngle:w,anticlockwise:i*j>k*h}},a.arc=function(a,b,c,d,e,f,g,h,i){for(var j=g-f,k=aR._segmentsCount(Math.abs(j)*e,40*Math.ceil(Math.abs(j)/N.TO)),l=j/(2*k),m=2*l,n=Math.cos(l),o=Math.sin(l),p=k-1,q=p%1/p,r=0;r<=p;++r){var s=l+f+m*(r+q*r),t=Math.cos(s),u=-Math.sin(s);i.push((n*t+o*u)*e+c,(-(n*u)+o*t)*e+d)}},a}(),a3=function(){function a(){}return a.curveLength=function(a,b,c,d,e,f,g,h){for(var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=a,u=b,v=1;v<=10;++v)l=(k=(j=v/10)*j)*j,p=(o=(n=(m=1-j)*m)*m)*a+3*n*j*c+3*m*k*e+l*g,q=o*b+3*n*j*d+3*m*k*f+l*h,r=t-p,s=u-q,t=p,u=q,i+=Math.sqrt(r*r+s*s);return i},a.curveTo=function(b,c,d,e,f,g,h){var i=h[h.length-2],j=h[h.length-1];h.length-=2;var k=aR._segmentsCount(a.curveLength(i,j,b,c,d,e,f,g)),l=0,m=0,n=0,o=0,p=0;h.push(i,j);for(var q=1,r=0;q<=k;++q)n=(m=(l=1-(r=q/k))*l)*l,p=(o=r*r)*r,h.push(n*i+3*m*r*b+3*l*o*d+p*f,n*j+3*m*r*c+3*l*o*e+p*g)},a}(),a4=function(){function a(){}return a.curveLength=function(a,b,c,d,e,f){var g=a-2*c+e,h=b-2*d+f,i=2*c-2*a,j=2*d-2*b,k=4*(g*g+h*h),l=4*(g*i+h*j),m=i*i+j*j,n=2*Math.sqrt(k+l+m),o=Math.sqrt(k),p=2*k*o,q=2*Math.sqrt(m),r=l/o;return(p*n+o*l*(n-q)+(4*m*k-l*l)*Math.log((2*o+r+n)/(r+q)))/(4*p)},a.curveTo=function(b,c,d,e,f){for(var g=f[f.length-2],h=f[f.length-1],i=aR._segmentsCount(a.curveLength(g,h,b,c,d,e)),j=0,k=0,l=1;l<=i;++l){var m=l/i;j=g+(b-g)*m,k=h+(c-h)*m,f.push(j+(b+(d-b)*m-j)*m,k+(c+(e-c)*m-k)*m)}},a}(),a5=function(){function a(){this.reset()}return a.prototype.begin=function(a,b,c){this.reset(),this.style=a,this.start=b,this.attribStart=c},a.prototype.end=function(a,b){this.attribSize=b-this.attribStart,this.size=a-this.start},a.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},a}(),a6=((q={})[N.HY.POLY]=aW,q[N.HY.CIRC]=aX,q[N.HY.ELIP]=aX,q[N.HY.RECT]=aY,q[N.HY.RREC]=a$,q),a7=[],a8=[],a9=function(){function a(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=null),this.points=[],this.holes=[],this.shape=a,this.lineStyle=c,this.fillStyle=b,this.matrix=d,this.type=a.type}return a.prototype.clone=function(){return new a(this.shape,this.fillStyle,this.lineStyle,this.matrix)},a.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},a}(),ba=new N.bR,bb=function(a){function b(){var b=a.call(this)||this;return b.closePointEps=1e-4,b.boundsPadding=0,b.uvsFloat32=null,b.indicesUint16=null,b.batchable=!1,b.points=[],b.colors=[],b.uvs=[],b.indices=[],b.textureIds=[],b.graphicsData=[],b.drawCalls=[],b.batchDirty=-1,b.batches=[],b.dirty=0,b.cacheDirty=-1,b.clearDirty=0,b.shapeIndex=0,b._bounds=new J.cz,b.boundsDirty=-1,b}return aU(b,a),Object.defineProperty(b.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),b.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var a=0;a<this.drawCalls.length;a++)this.drawCalls[a].texArray.clear(),a8.push(this.drawCalls[a]);this.drawCalls.length=0;for(var a=0;a<this.batches.length;a++){var b=this.batches[a];b.reset(),a7.push(b)}this.batches.length=0},b.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},b.prototype.drawShape=function(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=null);var e=new a9(a,b,c,d);return this.graphicsData.push(e),this.dirty++,this},b.prototype.drawHole=function(a,b){if(void 0===b&&(b=null),!this.graphicsData.length)return null;var c=new a9(a,null,null,b),d=this.graphicsData[this.graphicsData.length-1];return c.lineStyle=d.lineStyle,d.holes.push(c),this.dirty++,this},b.prototype.destroy=function(){a.prototype.destroy.call(this);for(var b=0;b<this.graphicsData.length;++b)this.graphicsData[b].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},b.prototype.containsPoint=function(a){for(var b=this.graphicsData,c=0;c<b.length;++c){var d=b[c];if(d.fillStyle.visible&&d.shape&&(d.matrix?d.matrix.applyInverse(a,ba):ba.copyFrom(a),d.shape.contains(ba.x,ba.y))){var e=!1;if(d.holes){for(var f=0;f<d.holes.length;f++)if(d.holes[f].shape.contains(ba.x,ba.y)){e=!0;break}}if(!e)return!0}}return!1},b.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var a=this.uvs,b=this.graphicsData,c=null,d=null;this.batches.length>0&&(d=(c=this.batches[this.batches.length-1]).style);for(var e=this.shapeIndex;e<b.length;e++){this.shapeIndex++;var f=b[e],g=f.fillStyle,h=f.lineStyle;a6[f.type].build(f),f.matrix&&this.transformPoints(f.points,f.matrix),(g.visible||h.visible)&&this.processHoles(f.holes);for(var i=0;i<2;i++){var j=0===i?g:h;if(j.visible){var k=j.texture.baseTexture,l=this.indices.length,m=this.points.length/2;k.wrapMode=X.uR.REPEAT,0===i?this.processFill(f):this.processLine(f);var n=this.points.length/2-m;0!==n&&(c&&!this._compareStyles(d,j)&&(c.end(l,m),c=null),c||((c=a7.pop()||new a5).begin(j,l,m),this.batches.push(c),d=j),this.addUvs(this.points,a,j.texture,m,n,j.matrix))}}}var o=this.indices.length,p=this.points.length/2;if(c&&c.end(o,p),0===this.batches.length){this.batchable=!0;return}var q=p>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&q===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=q?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},b.prototype._compareStyles=function(a,b){return!!a&&!!b&&a.texture.baseTexture===b.texture.baseTexture&&a.color+a.alpha===b.color+b.alpha&&!!a.native==!!b.native},b.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var a=0,b=this.graphicsData.length;a<b;a++){var c=this.graphicsData[a],d=c.fillStyle,e=c.lineStyle;if(d&&!d.texture.baseTexture.valid||e&&!e.texture.baseTexture.valid)return!1}return!0},b.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var a=this.batches,b=0,c=a.length;b<c;b++)for(var d=a[b],e=0;e<d.size;e++){var f=d.start+e;this.indicesUint16[f]=this.indicesUint16[f]-d.attribStart}},b.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var a=this.batches,c=0;c<a.length;c++)if(a[c].style.native)return!1;return this.points.length<2*b.BATCHABLE_SIZE},b.prototype.buildDrawCalls=function(){for(var a=++K.t5._globalBatch,b=0;b<this.drawCalls.length;b++)this.drawCalls[b].texArray.clear(),a8.push(this.drawCalls[b]);this.drawCalls.length=0;var c=this.colors,d=this.textureIds,e=a8.pop();e||((e=new K.hq).texArray=new K.cc),e.texArray.count=0,e.start=0,e.size=0,e.type=X._4.TRIANGLES;var f=0,g=null,h=0,i=!1,j=X._4.TRIANGLES,k=0;this.drawCalls.push(e);for(var b=0;b<this.batches.length;b++){var l=this.batches[b],m=l.style,n=m.texture.baseTexture;!!m.native!==i&&(j=(i=!!m.native)?X._4.LINES:X._4.TRIANGLES,g=null,f=8,a++),g!==n&&(g=n,n._batchEnabled!==a&&(8===f&&(a++,f=0,e.size>0&&((e=a8.pop())||((e=new K.hq).texArray=new K.cc),this.drawCalls.push(e)),e.start=k,e.size=0,e.texArray.count=0,e.type=j),n.touched=1,n._batchEnabled=a,n._batchLocation=f,n.wrapMode=X.uR.REPEAT,e.texArray.elements[e.texArray.count++]=n,f++)),e.size+=l.size,k+=l.size,h=n._batchLocation,this.addColors(c,m.color,m.alpha,l.attribSize,l.attribStart),this.addTextureIds(d,h,l.attribSize,l.attribStart)}K.t5._globalBatch=a,this.packAttributes()},b.prototype.packAttributes=function(){for(var a=this.points,b=this.uvs,c=this.colors,d=this.textureIds,e=new ArrayBuffer(3*a.length*4),f=new Float32Array(e),g=new Uint32Array(e),h=0,i=0;i<a.length/2;i++)f[h++]=a[2*i],f[h++]=a[2*i+1],f[h++]=b[2*i],f[h++]=b[2*i+1],g[h++]=c[i],f[h++]=d[i];this._buffer.update(e),this._indexBuffer.update(this.indicesUint16)},b.prototype.processFill=function(a){a.holes.length?aW.triangulate(a,this):a6[a.type].triangulate(a,this)},b.prototype.processLine=function(a){a1(a,this);for(var b=0;b<a.holes.length;b++)a1(a.holes[b],this)},b.prototype.processHoles=function(a){for(var b=0;b<a.length;b++){var c=a[b];a6[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix)}},b.prototype.calculateBounds=function(){var a=this._bounds;a.clear(),a.addVertexData(this.points,0,this.points.length),a.pad(this.boundsPadding,this.boundsPadding)},b.prototype.transformPoints=function(a,b){for(var c=0;c<a.length/2;c++){var d=a[2*c],e=a[2*c+1];a[2*c]=b.a*d+b.c*e+b.tx,a[2*c+1]=b.b*d+b.d*e+b.ty}},b.prototype.addColors=function(a,b,c,d,e){void 0===e&&(e=0);var f=(0,I.premultiplyTint)((b>>16)+(65280&b)+((255&b)<<16),c);a.length=Math.max(a.length,e+d);for(var g=0;g<d;g++)a[e+g]=f},b.prototype.addTextureIds=function(a,b,c,d){void 0===d&&(d=0),a.length=Math.max(a.length,d+c);for(var e=0;e<c;e++)a[d+e]=b},b.prototype.addUvs=function(a,b,c,d,e,f){void 0===f&&(f=null);for(var g=0,h=b.length,i=c.frame;g<e;){var j=a[(d+g)*2],k=a[(d+g)*2+1];if(f){var l=f.a*j+f.c*k+f.tx;k=f.b*j+f.d*k+f.ty,j=l}g++,b.push(j/i.width,k/i.height)}var m=c.baseTexture;(i.width<m.width||i.height<m.height)&&this.adjustUvs(b,c,h,e)},b.prototype.adjustUvs=function(a,b,c,d){for(var e=b.baseTexture,f=c+2*d,g=b.frame,h=g.width/e.width,i=g.height/e.height,j=g.x/g.width,k=g.y/g.height,l=Math.floor(a[c]+1e-6),m=Math.floor(a[c+1]+1e-6),n=c+2;n<f;n+=2)l=Math.min(l,Math.floor(a[n]+1e-6)),m=Math.min(m,Math.floor(a[n+1]+1e-6));j-=l,k-=m;for(var n=c;n<f;n+=2)a[n]=(a[n]+j)*h,a[n+1]=(a[n+1]+k)*i},b.BATCHABLE_SIZE=100,b}(K.JH),bc=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.width=0,b.alignment=.5,b.native=!1,b.cap=p.BUTT,b.join=o.MITER,b.miterLimit=10,b}return aU(b,a),b.prototype.clone=function(){var a=new b;return a.color=this.color,a.alpha=this.alpha,a.texture=this.texture,a.matrix=this.matrix,a.visible=this.visible,a.width=this.width,a.alignment=this.alignment,a.native=this.native,a.cap=this.cap,a.join=this.join,a.miterLimit=this.miterLimit,a},b.prototype.reset=function(){a.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},b}(aS),bd=new Float32Array(3),be={},bf=function(a){function b(b){void 0===b&&(b=null);var c=a.call(this)||this;return c.shader=null,c.pluginName="batch",c.currentPath=null,c.batches=[],c.batchTint=-1,c.batchDirty=-1,c.vertexData=null,c._fillStyle=new aS,c._lineStyle=new bc,c._matrix=null,c._holeMode=!1,c.state=K.Uw.for2d(),c._geometry=b||new bb,c._geometry.refCount++,c._transformID=-1,c.tint=0xffffff,c.blendMode=X.B9.NORMAL,c}return aU(b,a),Object.defineProperty(b.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),b.prototype.clone=function(){return this.finishPoly(),new b(this._geometry)},Object.defineProperty(b.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(a){this.state.blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tint",{get:function(){return this._tint},set:function(a){this._tint=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),b.prototype.lineStyle=function(a,b,c,d,e){return void 0===a&&(a=null),void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=.5),void 0===e&&(e=!1),"number"==typeof a&&(a={width:a,color:b,alpha:c,alignment:d,native:e}),this.lineTextureStyle(a)},b.prototype.lineTextureStyle=function(a){a=Object.assign({width:0,texture:K.gP.WHITE,color:a&&a.texture?0xffffff:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:p.BUTT,join:o.MITER,miterLimit:10},a),this.currentPath&&this.startPoly();var b=a.width>0&&a.alpha>0;return b?(a.matrix&&(a.matrix=a.matrix.clone(),a.matrix.invert()),Object.assign(this._lineStyle,{visible:b},a)):this._lineStyle.reset(),this},b.prototype.startPoly=function(){if(this.currentPath){var a=this.currentPath.points,b=this.currentPath.points.length;b>2&&(this.drawShape(this.currentPath),this.currentPath=new N.tS,this.currentPath.closeStroke=!1,this.currentPath.points.push(a[b-2],a[b-1]))}else this.currentPath=new N.tS,this.currentPath.closeStroke=!1},b.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},b.prototype.moveTo=function(a,b){return this.startPoly(),this.currentPath.points[0]=a,this.currentPath.points[1]=b,this},b.prototype.lineTo=function(a,b){this.currentPath||this.moveTo(0,0);var c=this.currentPath.points,d=c[c.length-2],e=c[c.length-1];return(d!==a||e!==b)&&c.push(a,b),this},b.prototype._initCurve=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[a,b]):this.moveTo(a,b)},b.prototype.quadraticCurveTo=function(a,b,c,d){this._initCurve();var e=this.currentPath.points;return 0===e.length&&this.moveTo(0,0),a4.curveTo(a,b,c,d,e),this},b.prototype.bezierCurveTo=function(a,b,c,d,e,f){return this._initCurve(),a3.curveTo(a,b,c,d,e,f,this.currentPath.points),this},b.prototype.arcTo=function(a,b,c,d,e){this._initCurve(a,b);var f=this.currentPath.points,g=a2.curveTo(a,b,c,d,e,f);if(g){var h=g.cx,i=g.cy,j=g.radius,k=g.startAngle,l=g.endAngle,m=g.anticlockwise;this.arc(h,i,j,k,l,m)}return this},b.prototype.arc=function(a,b,c,d,e,f){if(void 0===f&&(f=!1),d===e||(!f&&e<=d?e+=N.TO:f&&d<=e&&(d+=N.TO),0==e-d))return this;var g=a+Math.cos(d)*c,h=b+Math.sin(d)*c,i=this._geometry.closePointEps,j=this.currentPath?this.currentPath.points:null;if(j){var k=Math.abs(j[j.length-2]-g),l=Math.abs(j[j.length-1]-h);k<i&&l<i||j.push(g,h)}else this.moveTo(g,h),j=this.currentPath.points;return a2.arc(g,h,a,b,c,d,e,f,j),this},b.prototype.beginFill=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=1),this.beginTextureFill({texture:K.gP.WHITE,color:a,alpha:b})},b.prototype.beginTextureFill=function(a){a=Object.assign({texture:K.gP.WHITE,color:0xffffff,alpha:1,matrix:null},a),this.currentPath&&this.startPoly();var b=a.alpha>0;return b?(a.matrix&&(a.matrix=a.matrix.clone(),a.matrix.invert()),Object.assign(this._fillStyle,{visible:b},a)):this._fillStyle.reset(),this},b.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},b.prototype.drawRect=function(a,b,c,d){return this.drawShape(new N.M_(a,b,c,d))},b.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new N.TE(a,b,c,d,e))},b.prototype.drawCircle=function(a,b,c){return this.drawShape(new N.jl(a,b,c))},b.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new N.Pp(a,b,c,d))},b.prototype.drawPolygon=function(){for(var a,b=arguments,c=[],d=0;d<arguments.length;d++)c[d]=b[d];var e=!0,f=c[0];f.points?(e=f.closeStroke,a=f.points):a=Array.isArray(c[0])?c[0]:c;var g=new N.tS(a);return g.closeStroke=e,this.drawShape(g),this},b.prototype.drawShape=function(a){return this._holeMode?this._geometry.drawHole(a,this._matrix):this._geometry.drawShape(a,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},b.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},b.prototype.isFastRect=function(){var a=this._geometry.graphicsData;return 1===a.length&&a[0].shape.type===N.HY.RECT&&!a[0].matrix&&!a[0].holes.length&&!(a[0].lineStyle.visible&&a[0].lineStyle.width)},b.prototype._render=function(a){this.finishPoly();var b=this._geometry;b.updateBatches(),b.batchable?(this.batchDirty!==b.batchDirty&&this._populateBatches(),this._renderBatched(a)):(a.batch.flush(),this._renderDirect(a))},b.prototype._populateBatches=function(){var a=this._geometry,b=this.blendMode,c=a.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=a.batchDirty,this.batches.length=c,this.vertexData=new Float32Array(a.points);for(var d=0;d<c;d++){var e=a.batches[d],f=e.style.color,g=new Float32Array(this.vertexData.buffer,4*e.attribStart*2,2*e.attribSize),h=new Float32Array(a.uvsFloat32.buffer,4*e.attribStart*2,2*e.attribSize),i={vertexData:g,blendMode:b,indices:new Uint16Array(a.indicesUint16.buffer,2*e.start,e.size),uvs:h,_batchRGB:(0,I.hex2rgb)(f),_tintRGB:f,_texture:e.style.texture,alpha:e.style.alpha,worldAlpha:1};this.batches[d]=i}},b.prototype._renderBatched=function(a){if(this.batches.length){a.batch.setObjectRenderer(a.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var b=0,c=this.batches.length;b<c;b++){var d=this.batches[b];d.worldAlpha=this.worldAlpha*d.alpha,a.plugins[this.pluginName].render(d)}}},b.prototype._renderDirect=function(a){var b=this._resolveDirectShader(a),c=this._geometry,d=this.tint,e=this.worldAlpha,f=b.uniforms,g=c.drawCalls;f.translationMatrix=this.transform.worldTransform,f.tint[0]=(d>>16&255)/255*e,f.tint[1]=(d>>8&255)/255*e,f.tint[2]=(255&d)/255*e,f.tint[3]=e,a.shader.bind(b),a.geometry.bind(c,b),a.state.set(this.state);for(var h=0,i=g.length;h<i;h++)this._renderDrawCallDirect(a,c.drawCalls[h])},b.prototype._renderDrawCallDirect=function(a,b){for(var c=b.texArray,d=b.type,e=b.size,f=b.start,g=c.count,h=0;h<g;h++)a.texture.bind(c.elements[h],h);a.geometry.draw(d,e,f)},b.prototype._resolveDirectShader=function(a){var b=this.shader,c=this.pluginName;if(!b){if(!be[c]){for(var d=a.plugins[c].MAX_TEXTURES,e=new Int32Array(d),f=0;f<d;f++)e[f]=f;var g={tint:new Float32Array([1,1,1,1]),translationMatrix:new N.uq,default:K.k2.from({uSamplers:e},!0)},h=a.plugins[c]._shader.program;be[c]=new K.Mt(h,g)}b=be[c]}return b},b.prototype._calculateBounds=function(){this.finishPoly();var a=this._geometry;if(a.graphicsData.length){var b=a.bounds,c=b.minX,d=b.minY,e=b.maxX,f=b.maxY;this._bounds.addFrame(this.transform,c,d,e,f)}},b.prototype.containsPoint=function(a){return this.worldTransform.applyInverse(a,b._TEMP_POINT),this._geometry.containsPoint(b._TEMP_POINT)},b.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var a=(0,I.hex2rgb)(this.tint,bd),b=0;b<this.batches.length;b++){var c=this.batches[b],d=c._batchRGB,e=(a[0]*d[0]*255<<16)+(a[1]*d[1]*255<<8)+(0|a[2]*d[2]*255);c._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}}},b.prototype.calculateVertices=function(){var a=this.transform._worldID;if(this._transformID!==a){this._transformID=a;for(var b=this.transform.worldTransform,c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,i=this._geometry.points,j=this.vertexData,k=0,l=0;l<i.length;l+=2){var m=i[l],n=i[l+1];j[k++]=c*m+e*n+g,j[k++]=f*n+d*m+h}}},b.prototype.closePath=function(){var a=this.currentPath;return a&&(a.closeStroke=!0,this.finishPoly()),this},b.prototype.setMatrix=function(a){return this._matrix=a,this},b.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},b.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},b.prototype.destroy=function(b){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,a.prototype.destroy.call(this,b)},b.nextRoundedRectBehavior=!1,b._TEMP_POINT=new N.bR,b}(J.mc),bg={buildPoly:aW,buildCircle:aX,buildRectangle:aY,buildRoundedRectangle:a$,buildLine:a1,ArcUtils:a2,BezierUtils:a3,QuadraticUtils:a4,BatchPart:a5,FILL_COMMANDS:a6,BATCH_POOL:a7,DRAW_CALL_POOL:a8},bh=function(a,b){return(bh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},bi=new N.bR,bj=new Uint16Array([0,1,2,0,2,3]),bk=function(a){function b(){this.constructor=c}function c(b){var c=a.call(this)||this;return c._anchor=new N.oA(c._onAnchorUpdate,c,b?b.defaultAnchor.x:0,b?b.defaultAnchor.y:0),c._texture=null,c._width=0,c._height=0,c._tint=null,c._tintRGB=null,c.tint=0xffffff,c.blendMode=X.B9.NORMAL,c._cachedTint=0xffffff,c.uvs=null,c.texture=b||K.gP.EMPTY,c.vertexData=new Float32Array(8),c.vertexTrimmedData=null,c._transformID=-1,c._textureID=-1,c._transformTrimmedID=-1,c._textureTrimmedID=-1,c.indices=bj,c.pluginName="batch",c.isSprite=!0,c._roundPixels=aq.W0.ROUND_PIXELS,c}return bh(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=0xffffff,this._width&&(this.scale.x=(0,I.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,I.sign)(this.scale.y)*this._height/this._texture.orig.height)},c.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},c.prototype.calculateVertices=function(){var a=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==a._updateID){this._textureID!==a._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=a._updateID;var b=this.transform.worldTransform,c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,i=this.vertexData,j=a.trim,k=a.orig,l=this._anchor,m=0,n=0,o=0,p=0;if(j?(m=(n=j.x-l._x*k.width)+j.width,o=(p=j.y-l._y*k.height)+j.height):(m=(n=-l._x*k.width)+k.width,o=(p=-l._y*k.height)+k.height),i[0]=c*n+e*p+g,i[1]=f*p+d*n+h,i[2]=c*m+e*p+g,i[3]=f*p+d*m+h,i[4]=c*m+e*o+g,i[5]=f*o+d*m+h,i[6]=c*n+e*o+g,i[7]=f*o+d*n+h,this._roundPixels)for(var q=aq.W0.RESOLUTION,r=0;r<i.length;++r)i[r]=Math.round((i[r]*q|0)/q)}},c.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var a=this._texture,b=this.vertexTrimmedData,c=a.orig,d=this._anchor,e=this.transform.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=-d._x*c.width,m=l+c.width,n=-d._y*c.height,o=n+c.height;b[0]=f*l+h*n+j,b[1]=i*n+g*l+k,b[2]=f*m+h*n+j,b[3]=i*n+g*m+k,b[4]=f*m+h*o+j,b[5]=i*o+g*m+k,b[6]=f*l+h*o+j,b[7]=i*o+g*l+k},c.prototype._render=function(a){this.calculateVertices(),a.batch.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},c.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;a&&(a.width!==b.width||a.height!==b.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},c.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._localBounds||(this._localBounds=new J.cz),this._localBounds.minX=-(this._texture.orig.width*this._anchor._x),this._localBounds.minY=-(this._texture.orig.height*this._anchor._y),this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),b||(this._localBoundsRect||(this._localBoundsRect=new N.M_),b=this._localBoundsRect),this._localBounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},c.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,bi);var b=this._texture.orig.width,c=this._texture.orig.height,d=-b*this.anchor.x,e=0;return!!(bi.x>=d)&&!!(bi.x<d+b)&&(e=-c*this.anchor.y,!!(bi.y>=e)&&!!(bi.y<e+c))||!1},c.prototype.destroy=function(b){if(a.prototype.destroy.call(this,b),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof b?b:b&&b.texture){var c="boolean"==typeof b?b:b&&b.baseTexture;this._texture.destroy(!!c)}this._texture=null},c.from=function(a,b){return new c(a instanceof K.gP?a:K.gP.from(a,b))},Object.defineProperty(c.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(a){this._roundPixels!==a&&(this._transformID=-1),this._roundPixels=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){var b=(0,I.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width,this._width=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){var b=(0,I.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height,this._height=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"anchor",{get:function(){return this._anchor},set:function(a){this._anchor.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tint",{get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=a||K.gP.EMPTY,this._cachedTint=0xffffff,this._textureID=-1,this._textureTrimmedID=-1,a&&(a.baseTexture.valid?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),c}(J.mc),bl=function(a,b){return(bl=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};!function(a){a[a.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",a[a.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(r||(r={}));var bm={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:r.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},bn=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],bo=function(){function a(a){this.styleID=0,this.reset(),br(this,a,a)}return a.prototype.clone=function(){var b={};return br(b,this,bm),new a(b)},a.prototype.reset=function(){br(this,bm,bm)},Object.defineProperty(a.prototype,"align",{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"breakWords",{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(a){var b=bq(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this._fill},set:function(a){var b=bq(a);this._fill!==b&&(this._fill=b,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(a){!function(a,b){if(!Array.isArray(a)||!Array.isArray(b)||a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}(this._fillGradientStops,a)&&(this._fillGradientStops=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontSize",{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"leading",{get:function(){return this._leading},set:function(a){this._leading!==a&&(this._leading=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"padding",{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"stroke",{get:function(){return this._stroke},set:function(a){var b=bq(a);this._stroke!==b&&(this._stroke=b,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"trim",{get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(a){this._whiteSpace!==a&&(this._whiteSpace=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)},enumerable:!1,configurable:!0}),a.prototype.toFontString=function(){var a="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,b=this.fontFamily;Array.isArray(this.fontFamily)||(b=this.fontFamily.split(","));for(var c=b.length-1;c>=0;c--){var d=b[c].trim();!/([\"\'])[^\'\"]+\1/.test(d)&&0>bn.indexOf(d)&&(d='"'+d+'"'),b[c]=d}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+b.join(",")},a}();function bp(a){return"number"==typeof a?(0,I.hex2string)(a):("string"==typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#")),a)}function bq(a){if(!Array.isArray(a))return bp(a);for(var b=0;b<a.length;++b)a[b]=bp(a[b]);return a}function br(a,b,c){for(var d in c)Array.isArray(b[d])?a[d]=b[d].slice():a[d]=b[d]}var bs={willReadFrequently:!0},bt=function(){function a(a,b,c,d,e,f,g,h,i){this.text=a,this.style=b,this.width=c,this.height=d,this.lines=e,this.lineWidths=f,this.lineHeight=g,this.maxLineWidth=h,this.fontProperties=i}return a.measureText=function(b,c,d,e){void 0===e&&(e=a._canvas),d=null==d?c.wordWrap:d;var f=c.toFontString(),g=a.measureFont(f);0===g.fontSize&&(g.fontSize=c.fontSize,g.ascent=c.fontSize);var h=e.getContext("2d",bs);h.font=f;for(var i=(d?a.wordWrap(b,c,e):b).split(/(?:\r\n|\r|\n)/),j=Array(i.length),k=0,l=0;l<i.length;l++){var m=h.measureText(i[l]).width+(i[l].length-1)*c.letterSpacing;j[l]=m,k=Math.max(k,m)}var n=k+c.strokeThickness;c.dropShadow&&(n+=c.dropShadowDistance);var o=c.lineHeight||g.fontSize+c.strokeThickness,p=Math.max(o,g.fontSize+c.strokeThickness)+(i.length-1)*(o+c.leading);return c.dropShadow&&(p+=c.dropShadowDistance),new a(b,c,n,p,i,j,o+c.leading,k,g)},a.wordWrap=function(b,c,d){void 0===d&&(d=a._canvas);for(var e=d.getContext("2d",bs),f=0,g="",h="",i=Object.create(null),j=c.letterSpacing,k=c.whiteSpace,l=a.collapseSpaces(k),m=a.collapseNewlines(k),n=!l,o=c.wordWrapWidth+j,p=a.tokenize(b),q=0;q<p.length;q++){var r=p[q];if(a.isNewline(r)){if(!m){h+=a.addLine(g),n=!l,g="",f=0;continue}r=" "}if(l){var s=a.isBreakingSpace(r),t=a.isBreakingSpace(g[g.length-1]);if(s&&t)continue}var u=a.getFromCache(r,j,i,e);if(u>o)if(""!==g&&(h+=a.addLine(g),g="",f=0),a.canBreakWords(r,c.breakWords))for(var v=a.wordWrapSplit(r),w=0;w<v.length;w++){for(var x=v[w],y=1;v[w+y];){var z=v[w+y],A=x[x.length-1];if(a.canBreakChars(A,z,r,w,c.breakWords))break;x+=z,y++}w+=x.length-1;var B=a.getFromCache(x,j,i,e);B+f>o&&(h+=a.addLine(g),n=!1,g="",f=0),g+=x,f+=B}else{g.length>0&&(h+=a.addLine(g),g="",f=0);var C=q===p.length-1;h+=a.addLine(r,!C),n=!1,g="",f=0}else u+f>o&&(n=!1,h+=a.addLine(g),g="",f=0),(g.length>0||!a.isBreakingSpace(r)||n)&&(g+=r,f+=u)}return h+a.addLine(g,!1)},a.addLine=function(b,c){return void 0===c&&(c=!0),b=a.trimRight(b),b=c?b+"\n":b},a.getFromCache=function(a,b,c,d){var e=c[a];if("number"!=typeof e){var f=a.length*b;e=d.measureText(a).width+f,c[a]=e}return e},a.collapseSpaces=function(a){return"normal"===a||"pre-line"===a},a.collapseNewlines=function(a){return"normal"===a},a.trimRight=function(b){if("string"!=typeof b)return"";for(var c=b.length-1;c>=0;c--){var d=b[c];if(!a.isBreakingSpace(d))break;b=b.slice(0,-1)}return b},a.isNewline=function(b){return"string"==typeof b&&a._newlines.indexOf(b.charCodeAt(0))>=0},a.isBreakingSpace=function(b,c){return"string"==typeof b&&a._breakingSpaces.indexOf(b.charCodeAt(0))>=0},a.tokenize=function(b){var c=[],d="";if("string"!=typeof b)return c;for(var e=0;e<b.length;e++){var f=b[e],g=b[e+1];if(a.isBreakingSpace(f,g)||a.isNewline(f)){""!==d&&(c.push(d),d=""),c.push(f);continue}d+=f}return""!==d&&c.push(d),c},a.canBreakWords=function(a,b){return b},a.canBreakChars=function(a,b,c,d,e){return!0},a.wordWrapSplit=function(a){return a.split("")},a.measureFont=function(b){if(a._fonts[b])return a._fonts[b];var c={ascent:0,descent:0,fontSize:0},d=a._canvas,e=a._context;e.font=b;var f=a.METRICS_STRING+a.BASELINE_SYMBOL,g=Math.ceil(e.measureText(f).width),h=Math.ceil(e.measureText(a.BASELINE_SYMBOL).width),i=Math.ceil(a.HEIGHT_MULTIPLIER*h);h=h*a.BASELINE_MULTIPLIER|0,d.width=g,d.height=i,e.fillStyle="#f00",e.fillRect(0,0,g,i),e.font=b,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(f,0,h);var j=e.getImageData(0,0,g,i).data,k=j.length,l=4*g,m=0,n=0,o=!1;for(m=0;m<h;++m){for(var p=0;p<l;p+=4)if(255!==j[n+p]){o=!0;break}if(o)break;n+=l}for(c.ascent=h-m,n=k-l,o=!1,m=i;m>h;--m){for(var p=0;p<l;p+=4)if(255!==j[n+p]){o=!0;break}if(o)break;n-=l}return c.descent=m-h,c.fontSize=c.ascent+c.descent,a._fonts[b]=c,c},a.clearMetrics=function(b){void 0===b&&(b=""),b?delete a._fonts[b]:a._fonts={}},Object.defineProperty(a,"_canvas",{get:function(){if(!a.__canvas){var b=void 0;try{var c=new OffscreenCanvas(0,0),d=c.getContext("2d",bs);if(d&&d.measureText)return a.__canvas=c,c;b=aq.W0.ADAPTER.createCanvas()}catch(a){b=aq.W0.ADAPTER.createCanvas()}b.width=b.height=10,a.__canvas=b}return a.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a,"_context",{get:function(){return a.__context||(a.__context=a._canvas.getContext("2d",bs)),a.__context},enumerable:!1,configurable:!0}),a}();bt._fonts={},bt.METRICS_STRING="|\xc9q\xc5",bt.BASELINE_SYMBOL="M",bt.BASELINE_MULTIPLIER=1.4,bt.HEIGHT_MULTIPLIER=2,bt._newlines=[10,13],bt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var bu={texture:!0,children:!1,baseTexture:!0},bv=function(a){function b(){this.constructor=c}function c(b,c,d){var e=this,f=!1;d||(d=aq.W0.ADAPTER.createCanvas(),f=!0),d.width=3,d.height=3;var g=K.gP.from(d);return g.orig=new N.M_,g.trim=new N.M_,(e=a.call(this,g)||this)._ownCanvas=f,e.canvas=d,e.context=d.getContext("2d",{willReadFrequently:!0}),e._resolution=aq.W0.RESOLUTION,e._autoResolution=!0,e._text=null,e._style=null,e._styleListener=null,e._font="",e.text=b,e.style=c,e.localStyleID=-1,e}return bl(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.updateText=function(a){var b,d,e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!a){this._font=this._style.toFontString();var f=this.context,g=bt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=g.width,i=g.height,j=g.lines,k=g.lineHeight,l=g.lineWidths,m=g.maxLineWidth,n=g.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,i)+2*e.padding)*this._resolution),f.scale(this._resolution,this._resolution),f.clearRect(0,0,this.canvas.width,this.canvas.height),f.font=this._font,f.lineWidth=e.strokeThickness,f.textBaseline=e.textBaseline,f.lineJoin=e.lineJoin,f.miterLimit=e.miterLimit;for(var o=e.dropShadow?2:1,p=0;p<o;++p){var q=e.dropShadow&&0===p,r=q?Math.ceil(Math.max(1,i)+2*e.padding):0,s=r*this._resolution;if(q){f.fillStyle="black",f.strokeStyle="black";var t=e.dropShadowColor,u=(0,I.hex2rgb)("number"==typeof t?t:(0,I.string2hex)(t)),v=e.dropShadowBlur*this._resolution,w=e.dropShadowDistance*this._resolution;f.shadowColor="rgba("+255*u[0]+","+255*u[1]+","+255*u[2]+","+e.dropShadowAlpha+")",f.shadowBlur=v,f.shadowOffsetX=Math.cos(e.dropShadowAngle)*w,f.shadowOffsetY=Math.sin(e.dropShadowAngle)*w+s}else f.fillStyle=this._generateFillStyle(e,j,g),f.strokeStyle=e.stroke,f.shadowColor="black",f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0;var x=(k-n.fontSize)/2;(!c.nextLineHeightBehavior||k-n.fontSize<0)&&(x=0);for(var y=0;y<j.length;y++)b=e.strokeThickness/2,d=e.strokeThickness/2+y*k+n.ascent+x,"right"===e.align?b+=m-l[y]:"center"===e.align&&(b+=(m-l[y])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(j[y],b+e.padding,d+e.padding-r,!0),e.fill&&this.drawLetterSpacing(j[y],b+e.padding,d+e.padding-r)}this.updateTexture()}},c.prototype.drawLetterSpacing=function(a,b,d,e){void 0===e&&(e=!1);var f=this._style.letterSpacing,g=c.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===f||g){g&&(this.context.letterSpacing=f,this.context.textLetterSpacing=f),e?this.context.strokeText(a,b,d):this.context.fillText(a,b,d);return}for(var h=b,i=Array.from?Array.from(a):a.split(""),j=this.context.measureText(a).width,k=0,l=0;l<i.length;++l){var m=i[l];e?this.context.strokeText(m,h,d):this.context.fillText(m,h,d);for(var n="",o=l+1;o<i.length;++o)n+=i[o];h+=j-(k=this.context.measureText(n).width)+f,j=k}},c.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var b=(0,I.trimCanvas)(a);b.data&&(a.width=b.width,a.height=b.height,this.context.putImageData(b.data,0,0))}var c=this._texture,d=this._style,e=d.trim?0:d.padding,f=c.baseTexture;c.trim.width=c._frame.width=a.width/this._resolution,c.trim.height=c._frame.height=a.height/this._resolution,c.trim.x=-e,c.trim.y=-e,c.orig.width=c._frame.width-2*e,c.orig.height=c._frame.height-2*e,this._onTextureUpdate(),f.setRealSize(a.width,a.height,this._resolution),c.updateUvs(),this.dirty=!1},c.prototype._render=function(b){this._autoResolution&&this._resolution!==b.resolution&&(this._resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype._render.call(this,b)},c.prototype.updateTransform=function(){this.updateText(!0),a.prototype.updateTransform.call(this)},c.prototype.getBounds=function(b,c){return this.updateText(!0),-1===this._textureID&&(b=!1),a.prototype.getBounds.call(this,b,c)},c.prototype.getLocalBounds=function(b){return this.updateText(!0),a.prototype.getLocalBounds.call(this,b)},c.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},c.prototype._generateFillStyle=function(a,b,c){var d,e=a.fill;if(!Array.isArray(e))return e;if(1===e.length)return e[0];var f=a.dropShadow?a.dropShadowDistance:0,g=a.padding||0,h=this.canvas.width/this._resolution-f-2*g,i=this.canvas.height/this._resolution-f-2*g,j=e.slice(),k=a.fillGradientStops.slice();if(!k.length)for(var l=j.length+1,m=1;m<l;++m)k.push(m/l);if(j.unshift(e[0]),k.unshift(0),j.push(e[e.length-1]),k.push(1),a.fillGradientType===r.LINEAR_VERTICAL){d=this.context.createLinearGradient(h/2,g,h/2,i+g);for(var n=c.fontProperties.fontSize+a.strokeThickness,m=0;m<b.length;m++){var o=c.lineHeight*(m-1)+n,p=c.lineHeight*m,q=p;m>0&&o>p&&(q=(p+o)/2);var s=p+n,t=c.lineHeight*(m+1),u=s;m+1<b.length&&t<s&&(u=(s+t)/2);for(var v=(u-q)/i,w=0;w<j.length;w++){var x=Math.min(1,Math.max(0,q/i+("number"==typeof k[w]?k[w]:w/j.length)*v));x=Number(x.toFixed(5)),d.addColorStop(x,j[w])}}}else{d=this.context.createLinearGradient(g,i/2,h+g,i/2);for(var y=j.length+1,z=1,m=0;m<j.length;m++){var A=void 0;A="number"==typeof k[m]?k[m]:z/y,d.addColorStop(A,j[m]),z++}}return d},c.prototype.destroy=function(b){"boolean"==typeof b&&(b={children:b}),b=Object.assign({},bu,b),a.prototype.destroy.call(this,b),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(c.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){this.updateText(!0);var b=(0,I.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width,this._width=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,I.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height,this._height=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"style",{get:function(){return this._style},set:function(a){(a=a||{})instanceof bo?this._style=a:this._style=new bo(a),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"text",{get:function(){return this._text},set:function(a){a=String(null==a?"":a),this._text!==a&&(this._text=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"resolution",{get:function(){return this._resolution},set:function(a){this._autoResolution=!1,this._resolution!==a&&(this._resolution=a,this.dirty=!0)},enumerable:!1,configurable:!0}),c.nextLineHeightBehavior=!1,c.experimentalLetterSpacing=!1,c}(bk);aq.W0.UPLOADS_PER_FRAME=4;var bw=function(a,b){return(bw=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},bx=function(){function a(a){this.maxItemsPerFrame=a,this.itemsLeft=0}return a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},a.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},a}();function by(a,b){var c=!1;if(a&&a._textures&&a._textures.length){for(var d=0;d<a._textures.length;d++)if(a._textures[d]instanceof K.gP){var e=a._textures[d].baseTexture;-1===b.indexOf(e)&&(b.push(e),c=!0)}}return c}function bz(a,b){if(a.baseTexture instanceof K.t5){var c=a.baseTexture;return -1===b.indexOf(c)&&b.push(c),!0}return!1}function bA(a,b){if(a._texture&&a._texture instanceof K.gP){var c=a._texture.baseTexture;return -1===b.indexOf(c)&&b.push(c),!0}return!1}function bB(a,b){return b instanceof bv&&(b.updateText(!0),!0)}function bC(a,b){if(b instanceof bo){var c=b.toFontString();return bt.measureFont(c),!0}return!1}function bD(a,b){if(a instanceof bv){-1===b.indexOf(a.style)&&b.push(a.style),-1===b.indexOf(a)&&b.push(a);var c=a._texture.baseTexture;return -1===b.indexOf(c)&&b.push(c),!0}return!1}function bE(a,b){return a instanceof bo&&(-1===b.indexOf(a)&&b.push(a),!0)}var bF=function(){function a(a){var b=this;this.limiter=new bx(aq.W0.UPLOADS_PER_FRAME),this.renderer=a,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){b.queue&&b.prepareItems()},this.registerFindHook(bD),this.registerFindHook(bE),this.registerFindHook(by),this.registerFindHook(bz),this.registerFindHook(bA),this.registerUploadHook(bB),this.registerUploadHook(bC)}return a.prototype.upload=function(a,b){var c=this;return"function"==typeof a&&(b=a,a=null),b&&(0,I.deprecation)("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(d){a&&c.add(a);var e=function(){null==b||b(),d()};c.queue.length?(c.completes.push(e),c.ticking||(c.ticking=!0,O.Rv.system.addOnce(c.tick,c,O.dQ.UTILITY))):e()})},a.prototype.tick=function(){setTimeout(this.delayedTick,0)},a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],b=!1;if(a&&!a._destroyed){for(var c=0,d=this.uploadHooks.length;c<d;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift(),b=!0;break}}b||this.queue.shift()}if(this.queue.length)O.Rv.system.addOnce(this.tick,this,O.dQ.UTILITY);else{this.ticking=!1;var e=this.completes.slice(0);this.completes.length=0;for(var c=0,d=e.length;c<d;c++)e[c]()}},a.prototype.registerFindHook=function(a){return a&&this.addHooks.push(a),this},a.prototype.registerUploadHook=function(a){return a&&this.uploadHooks.push(a),this},a.prototype.add=function(a){for(var b=0,c=this.addHooks.length;b<c&&!this.addHooks[b](a,this.queue);b++);if(a instanceof J.mc)for(var b=a.children.length-1;b>=0;b--)this.add(a.children[b]);return this},a.prototype.destroy=function(){this.ticking&&O.Rv.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},a}();function bG(a,b){return b instanceof K.t5&&(b._glTextures[a.CONTEXT_UID]||a.texture.bind(b),!0)}function bH(a,b){if(!(b instanceof bf))return!1;var c=b.geometry;b.finishPoly(),c.updateBatches();for(var d=c.batches,e=0;e<d.length;e++){var f=d[e].style.texture;f&&bG(a,f.baseTexture)}return c.batchable||a.geometry.bind(c,b._resolveDirectShader(a)),!0}function bI(a,b){return a instanceof bf&&(b.push(a),!0)}var bJ=function(a){function b(){this.constructor=c}function c(b){var c=a.call(this,b)||this;return c.uploadHookHelper=c.renderer,c.registerFindHook(bI),c.registerUploadHook(bG),c.registerUploadHook(bH),c}return bw(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.extension={name:"prepare",type:K.Ag.RendererPlugin},c}(bF),bK=function(){function a(a){this.maxMilliseconds=a,this.frameStart=0}return a.prototype.beginFrame=function(){this.frameStart=Date.now()},a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},a}(),bL=function(){function a(a,b,c){void 0===c&&(c=null),this.linkedSheets=[],this._texture=a instanceof K.gP?a:null,this.baseTexture=a instanceof K.t5?a:this._texture.baseTexture,this.textures={},this.animations={},this.data=b;var d=this.baseTexture.resource;this.resolution=this._updateResolution(c||(d?d.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return a.prototype._updateResolution=function(a){void 0===a&&(a=null);var b=this.data.meta.scale,c=(0,I.getResolutionOfUrl)(a,null);return null===c&&(c=void 0!==b?parseFloat(b):1),1!==c&&this.baseTexture.setResolution(c),c},a.prototype.parse=function(b){var c=this;return b&&(0,I.deprecation)("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(d){c._callback=function(a){null==b||b(a),d(a)},c._batchIndex=0,c._frameKeys.length<=a.BATCH_SIZE?(c._processFrames(0),c._processAnimations(),c._parseComplete()):c._nextBatch()})},a.prototype._processFrames=function(b){for(var c=b,d=a.BATCH_SIZE;c-b<d&&c<this._frameKeys.length;){var e=this._frameKeys[c],f=this._frames[e],g=f.frame;if(g){var h=null,i=null,j=!1!==f.trimmed&&f.sourceSize?f.sourceSize:f.frame,k=new N.M_(0,0,Math.floor(j.w)/this.resolution,Math.floor(j.h)/this.resolution);h=f.rotated?new N.M_(Math.floor(g.x)/this.resolution,Math.floor(g.y)/this.resolution,Math.floor(g.h)/this.resolution,Math.floor(g.w)/this.resolution):new N.M_(Math.floor(g.x)/this.resolution,Math.floor(g.y)/this.resolution,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution),!1!==f.trimmed&&f.spriteSourceSize&&(i=new N.M_(Math.floor(f.spriteSourceSize.x)/this.resolution,Math.floor(f.spriteSourceSize.y)/this.resolution,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution)),this.textures[e]=new K.gP(this.baseTexture,h,k,i,2*!!f.rotated,f.anchor),K.gP.addToCache(this.textures[e],e)}c++}},a.prototype._processAnimations=function(){var a=this.data.animations||{};for(var b in a){this.animations[b]=[];for(var c=0;c<a[b].length;c++){var d=a[b][c];this.animations[b].push(this.textures[d])}}},a.prototype._parseComplete=function(){var a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)},a.prototype._nextBatch=function(){var b=this;this._processFrames(this._batchIndex*a.BATCH_SIZE),this._batchIndex++,setTimeout(function(){b._batchIndex*a.BATCH_SIZE<b._frameKeys.length?b._nextBatch():(b._processAnimations(),b._parseComplete())},0)},a.prototype.destroy=function(a){var b;for(var c in void 0===a&&(a=!1),this.textures)this.textures[c].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&(null==(b=this._texture)||b.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},a.BATCH_SIZE=1e3,a}(),bM=function(){function a(){}return a.use=function(b,c){var d,e,f=this,g=b.name+"_image";if(!b.data||b.type!==ag.TYPE.JSON||!b.data.frames||f.resources[g])return void c();var h=null==(e=null==(d=b.data)?void 0:d.meta)?void 0:e.related_multi_packs;if(Array.isArray(h))for(var i=0;i<h.length;i++)!function(a){if("string"!=typeof a)return;var c=a.replace(".json",""),d=I.url.resolve(b.url.replace(f.baseUrl,""),a);if(!(f.resources[c]||Object.values(f.resources).some(function(a){return I.url.format(I.url.parse(a.url))===d}))){var e={crossOrigin:b.crossOrigin,loadType:ag.LOAD_TYPE.XHR,xhrType:ag.XHR_RESPONSE_TYPE.JSON,parentResource:b,metadata:b.metadata};f.add(c,d,e)}}(h[i]);var j={crossOrigin:b.crossOrigin,metadata:b.metadata.imageMetadata,parentResource:b},k=a.getResourcePath(b,f.baseUrl);f.add(g,k,j,function(a){if(a.error)return void c(a.error);var d=new bL(a.texture,b.data,b.url);d.parse().then(function(){b.spritesheet=d,b.textures=d.textures,c()})})},a.getResourcePath=function(a,b){return a.isDataUrl?a.data.meta.image:I.url.resolve(a.url.replace(b,""),a.data.meta.image)},a.extension=K.Ag.Loader,a}(),bN=function(a,b){return(bN=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function bO(a,b){function c(){this.constructor=a}bN(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var bP=new N.bR,bQ=function(a){function b(b,c,d){void 0===c&&(c=100),void 0===d&&(d=100);var e=a.call(this,b)||this;return e.tileTransform=new N.dL,e._width=c,e._height=d,e.uvMatrix=e.texture.uvMatrix||new K.NW(b),e.pluginName="tilingSprite",e.uvRespectAnchor=!1,e}return bO(b,a),Object.defineProperty(b.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(a){this.uvMatrix.clampMargin=a,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copyFrom(a)},enumerable:!1,configurable:!0}),b.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=0xffffff},b.prototype._render=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),a.batch.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))},b.prototype._calculateBounds=function(){var a=-(this._width*this._anchor._x),b=-(this._height*this._anchor._y),c=this._width*(1-this._anchor._x),d=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,b,c,d)},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),b||(this._localBoundsRect||(this._localBoundsRect=new N.M_),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,bP);var b=this._width,c=this._height,d=-b*this.anchor._x;if(bP.x>=d&&bP.x<d+b){var e=-c*this.anchor._y;if(bP.y>=e&&bP.y<e+c)return!0}return!1},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b),this.tileTransform=null,this.uvMatrix=null},b.from=function(a,c){return new b(a instanceof K.gP?a:K.gP.from(a,c),c.width,c.height)},Object.defineProperty(b.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a},enumerable:!1,configurable:!0}),b}(bk),bR="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",bS=new N.uq,bT=function(a){function b(b){var c=a.call(this,b)||this;return b.runners.contextChange.add(c),c.quad=new K.X1,c.state=K.Uw.for2d(),c}return bO(b,a),b.prototype.contextChange=function(){var a=this.renderer,b={globals:a.globalUniforms};this.simpleShader=K.Mt.from(bR,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",b),this.shader=a.context.webGLVersion>1?K.Mt.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",b):K.Mt.from(bR,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",b)},b.prototype.render=function(a){var b=this.renderer,c=this.quad,d=c.vertices;d[0]=d[6]=-(a._width*a.anchor.x),d[1]=d[3]=-(a._height*a.anchor.y),d[2]=d[4]=a._width*(1-a.anchor.x),d[5]=d[7]=a._height*(1-a.anchor.y);var e=a.uvRespectAnchor?a.anchor.x:0,f=a.uvRespectAnchor?a.anchor.y:0;(d=c.uvs)[0]=d[6]=-e,d[1]=d[3]=-f,d[2]=d[4]=1-e,d[5]=d[7]=1-f,c.invalidate();var g=a._texture,h=g.baseTexture,i=h.alphaMode>0,j=a.tileTransform.localTransform,k=a.uvMatrix,l=h.isPowerOfTwo&&g.frame.width===h.width&&g.frame.height===h.height;l&&(h._glTextures[b.CONTEXT_UID]?l=h.wrapMode!==X.uR.CLAMP:h.wrapMode===X.uR.CLAMP&&(h.wrapMode=X.uR.REPEAT));var m=l?this.simpleShader:this.shader,n=g.width,o=g.height,p=a._width,q=a._height;bS.set(j.a*n/p,j.b*n/q,j.c*o/p,j.d*o/q,j.tx/p,j.ty/q),bS.invert(),l?bS.prepend(k.mapCoord):(m.uniforms.uMapCoord=k.mapCoord.toArray(!0),m.uniforms.uClampFrame=k.uClampFrame,m.uniforms.uClampOffset=k.uClampOffset),m.uniforms.uTransform=bS.toArray(!0),m.uniforms.uColor=(0,I.premultiplyTintToRgba)(a.tint,a.worldAlpha,m.uniforms.uColor,i),m.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),m.uniforms.uSampler=g,b.shader.bind(m),b.geometry.bind(c),this.state.blendMode=(0,I.correctBlendMode)(a.blendMode,i),b.state.set(this.state),b.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},b.extension={name:"tilingSprite",type:K.Ag.RendererPlugin},b}(K.Pt),bU=function(a,b){return(bU=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function bV(a,b){function c(){this.constructor=a}bU(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var bW=function(){function a(a,b){this.uvBuffer=a,this.uvMatrix=b,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return a.prototype.update=function(a){if(a||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var b=this.uvBuffer.data;this.data&&this.data.length===b.length||(this.data=new Float32Array(b.length)),this.uvMatrix.multiplyUvs(b,this.data),this._updateID++}},a}(),bX=new N.bR,bY=new N.tS,bZ=function(a){function b(b,c,d,e){void 0===e&&(e=X._4.TRIANGLES);var f=a.call(this)||this;return f.geometry=b,f.shader=c,f.state=d||K.Uw.for2d(),f.drawMode=e,f.start=0,f.size=0,f.uvs=null,f.indices=null,f.vertexData=new Float32Array(1),f.vertexDirty=-1,f._transformID=-1,f._roundPixels=aq.W0.ROUND_PIXELS,f.batchUvs=null,f}return bV(b,a),Object.defineProperty(b.prototype,"geometry",{get:function(){return this._geometry},set:function(a){this._geometry!==a&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=a,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"material",{get:function(){return this.shader},set:function(a){this.shader=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(a){this.state.blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(a){this._roundPixels!==a&&(this._transformID=-1),this._roundPixels=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(a){this.shader.tint=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(a){this.shader.texture=a},enumerable:!1,configurable:!0}),b.prototype._render=function(a){var c=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===X._4.TRIANGLES&&c.length<2*b.BATCHABLE_SIZE?this._renderToBatch(a):this._renderDefault(a)},b.prototype._renderDefault=function(a){var b=this.shader;b.alpha=this.worldAlpha,b.update&&b.update(),a.batch.flush(),b.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),a.shader.bind(b),a.state.set(this.state),a.geometry.bind(this.geometry,b),a.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},b.prototype._renderToBatch=function(a){var b=this.geometry,c=this.shader;c.uvMatrix&&(c.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=b.indexBuffer.data,this._tintRGB=c._tintRGB,this._texture=c.texture;var d=this.material.pluginName;a.batch.setObjectRenderer(a.plugins[d]),a.plugins[d].render(this)},b.prototype.calculateVertices=function(){var a=this.geometry.buffers[0],b=a.data,c=a._updateID;if(c!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==b.length&&(this.vertexData=new Float32Array(b.length));for(var d=this.transform.worldTransform,e=d.a,f=d.b,g=d.c,h=d.d,i=d.tx,j=d.ty,k=this.vertexData,l=0;l<k.length/2;l++){var m=b[2*l],n=b[2*l+1];k[2*l]=e*m+g*n+i,k[2*l+1]=f*m+h*n+j}if(this._roundPixels)for(var o=aq.W0.RESOLUTION,l=0;l<k.length;++l)k[l]=Math.round((k[l]*o|0)/o);this.vertexDirty=c}},b.prototype.calculateUvs=function(){var a=this.geometry.buffers[1],b=this.shader;b.uvMatrix.isSimple?this.uvs=a.data:(this.batchUvs||(this.batchUvs=new bW(a,b.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},b.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,bX);for(var b=this.geometry.getBuffer("aVertexPosition").data,c=bY.points,d=this.geometry.getIndex().data,e=d.length,f=4===this.drawMode?3:1,g=0;g+2<e;g+=f){var h=2*d[g],i=2*d[g+1],j=2*d[g+2];if(c[0]=b[h],c[1]=b[h+1],c[2]=b[i],c[3]=b[i+1],c[4]=b[j],c[5]=b[j+1],bY.contains(bX.x,bX.y))return!0}return!1},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},b.BATCHABLE_SIZE=100,b}(J.mc),b$=function(a){function b(b,c){var d=this,e={uSampler:b,alpha:1,uTextureMatrix:N.uq.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(c=Object.assign({tint:0xffffff,alpha:1,pluginName:"batch"},c)).uniforms&&Object.assign(e,c.uniforms),(d=a.call(this,c.program||K.BP.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),e)||this)._colorDirty=!1,d.uvMatrix=new K.NW(b),d.batchable=void 0===c.program,d.pluginName=c.pluginName,d.tint=c.tint,d.alpha=c.alpha,d}return bV(b,a),Object.defineProperty(b.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(a){this.uniforms.uSampler!==a&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!a.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=a,this.uvMatrix.texture=a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"alpha",{get:function(){return this._alpha},set:function(a){a!==this._alpha&&(this._alpha=a,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tint",{get:function(){return this._tint},set:function(a){a!==this._tint&&(this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),b.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var a=this.texture.baseTexture;(0,I.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,a.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},b}(K.Mt),b_=function(a){function b(b,c,d){var e=a.call(this)||this,f=new K.hp(b),g=new K.hp(c,!0),h=new K.hp(d,!0,!0);return e.addAttribute("aVertexPosition",f,2,!1,X.QE.FLOAT).addAttribute("aTextureCoord",g,2,!1,X.QE.FLOAT).addIndex(h),e._updateId=-1,e}return bV(b,a),Object.defineProperty(b.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),b}(K.V2),b0=function(a,b){return(b0=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},b1=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},b2=function(){function a(){}return a.test=function(a){return"string"==typeof a&&0===a.indexOf("info face=")},a.parse=function(a){var b=a.match(/^[a-z]+\s+.+$/gm),c={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var d in b){var e=b[d].match(/^[a-z]+/gm)[0],f=b[d].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),g={};for(var h in f){var i=f[h].split("="),j=i[0],k=i[1].replace(/"/gm,""),l=parseFloat(k),m=isNaN(l)?k:l;g[j]=m}c[e].push(g)}var n=new b1;return c.info.forEach(function(a){return n.info.push({face:a.face,size:parseInt(a.size,10)})}),c.common.forEach(function(a){return n.common.push({lineHeight:parseInt(a.lineHeight,10)})}),c.page.forEach(function(a){return n.page.push({id:parseInt(a.id,10),file:a.file})}),c.char.forEach(function(a){return n.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})}),c.kerning.forEach(function(a){return n.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})}),c.distanceField.forEach(function(a){return n.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})}),n},a}(),b3=function(){function a(){}return a.test=function(a){return a instanceof XMLDocument&&a.getElementsByTagName("page").length&&null!==a.getElementsByTagName("info")[0].getAttribute("face")},a.parse=function(a){for(var b=new b1,c=a.getElementsByTagName("info"),d=a.getElementsByTagName("common"),e=a.getElementsByTagName("page"),f=a.getElementsByTagName("char"),g=a.getElementsByTagName("kerning"),h=a.getElementsByTagName("distanceField"),i=0;i<c.length;i++)b.info.push({face:c[i].getAttribute("face"),size:parseInt(c[i].getAttribute("size"),10)});for(var i=0;i<d.length;i++)b.common.push({lineHeight:parseInt(d[i].getAttribute("lineHeight"),10)});for(var i=0;i<e.length;i++)b.page.push({id:parseInt(e[i].getAttribute("id"),10)||0,file:e[i].getAttribute("file")});for(var i=0;i<f.length;i++){var j=f[i];b.char.push({id:parseInt(j.getAttribute("id"),10),page:parseInt(j.getAttribute("page"),10)||0,x:parseInt(j.getAttribute("x"),10),y:parseInt(j.getAttribute("y"),10),width:parseInt(j.getAttribute("width"),10),height:parseInt(j.getAttribute("height"),10),xoffset:parseInt(j.getAttribute("xoffset"),10),yoffset:parseInt(j.getAttribute("yoffset"),10),xadvance:parseInt(j.getAttribute("xadvance"),10)})}for(var i=0;i<g.length;i++)b.kerning.push({first:parseInt(g[i].getAttribute("first"),10),second:parseInt(g[i].getAttribute("second"),10),amount:parseInt(g[i].getAttribute("amount"),10)});for(var i=0;i<h.length;i++)b.distanceField.push({fieldType:h[i].getAttribute("fieldType"),distanceRange:parseInt(h[i].getAttribute("distanceRange"),10)});return b},a}(),b4=function(){function a(){}return a.test=function(a){if("string"==typeof a&&a.indexOf("<font>")>-1){var b=new globalThis.DOMParser().parseFromString(a,"text/xml");return b3.test(b)}return!1},a.parse=function(a){var b=new globalThis.DOMParser().parseFromString(a,"text/xml");return b3.parse(b)},a}(),b5=[b2,b3,b4];function b6(a){for(var b=0;b<b5.length;b++)if(b5[b].test(a))return b5[b];return null}function b7(a){return Array.from?Array.from(a):a.split("")}function b8(a){return a.codePointAt?a.codePointAt(0):a.charCodeAt(0)}var b9=function(){function a(a,b,c){var d,e,f=a.info[0],g=a.common[0],h=a.page[0],i=a.distanceField[0],j=(0,I.getResolutionOfUrl)(h.file),k={};this._ownsTextures=c,this.font=f.face,this.size=f.size,this.lineHeight=g.lineHeight/j,this.chars={},this.pageTextures=k;for(var l=0;l<a.page.length;l++){var m=a.page[l],n=m.id,o=m.file;k[n]=b instanceof Array?b[l]:b[o],(null==i?void 0:i.fieldType)&&"none"!==i.fieldType&&(k[n].baseTexture.alphaMode=X.Gk.NO_PREMULTIPLIED_ALPHA,k[n].baseTexture.mipmap=X.E8.OFF)}for(var l=0;l<a.char.length;l++){var p=a.char[l],n=p.id,q=p.page,r=a.char[l],s=r.x,t=r.y,u=r.width,v=r.height,w=r.xoffset,x=r.yoffset,y=r.xadvance;s/=j,t/=j,u/=j,v/=j,w/=j,x/=j,y/=j;var z=new N.M_(s+k[q].frame.x/j,t+k[q].frame.y/j,u,v);this.chars[n]={xOffset:w,yOffset:x,xAdvance:y,kerning:{},texture:new K.gP(k[q].baseTexture,z),page:q}}for(var l=0;l<a.kerning.length;l++){var A=a.kerning[l],B=A.first,C=A.second,D=A.amount;B/=j,C/=j,D/=j,this.chars[C]&&(this.chars[C].kerning[B]=D)}this.distanceFieldRange=null==i?void 0:i.distanceRange,this.distanceFieldType=null!=(e=null==(d=null==i?void 0:i.fieldType)?void 0:d.toLowerCase())?e:"none"}return a.prototype.destroy=function(){for(var a in this.chars)this.chars[a].texture.destroy(),this.chars[a].texture=null;for(var a in this.pageTextures)this._ownsTextures&&this.pageTextures[a].destroy(!0),this.pageTextures[a]=null;this.chars=null,this.pageTextures=null},a.install=function(b,c,d){if(b instanceof b1)e=b;else{var e,f=b6(b);if(!f)throw Error("Unrecognized data format for font.");e=f.parse(b)}c instanceof K.gP&&(c=[c]);var g=new a(e,c,d);return a.available[g.font]=g,g},a.uninstall=function(b){var c=a.available[b];if(!c)throw Error("No font found named '"+b+"'");c.destroy(),delete a.available[b]},a.from=function(b,c,d){if(!b)throw Error("[BitmapFont] Property `name` is required.");var e,f,g,h=Object.assign({},a.defaultOptions,d),i=h.chars,j=h.padding,k=h.resolution,l=h.textureWidth,m=h.textureHeight,n=function(a){"string"==typeof a&&(a=[a]);for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];if(Array.isArray(e)){if(2!==e.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+e.length+".");var f=e[0].charCodeAt(0),g=e[1].charCodeAt(0);if(g<f)throw Error("[BitmapFont]: Invalid character range.");for(var h=f;h<=g;h++)b.push(String.fromCharCode(h))}else b.push.apply(b,b7(e))}if(0===b.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return b}(i),o=c instanceof bo?c:new bo(c),p=new b1;p.info[0]={face:o.fontFamily,size:o.fontSize},p.common[0]={lineHeight:o.fontSize};for(var q=0,s=0,t=0,u=[],v=0;v<n.length;v++){e||((e=aq.W0.ADAPTER.createCanvas()).width=l,e.height=m,f=e.getContext("2d"),g=new K.t5(e,{resolution:k}),u.push(new K.gP(g)),p.page.push({id:u.length-1,file:""}));var w=n[v],x=bt.measureText(w,o,!1,e),y=x.width,z=Math.ceil(x.height),A=Math.ceil(("italic"===o.fontStyle?2:1)*y);if(s>=m-z*k){if(0===s)throw Error("[BitmapFont] textureHeight "+m+"px is too small "+("(fontFamily: '"+o.fontFamily+"', fontSize: "+o.fontSize+"px, char: '")+w+"')");--v,e=null,f=null,g=null,s=0,q=0,t=0;continue}if(t=Math.max(z+x.fontProperties.descent,t),A*k+q>=l){if(0===q)throw Error("[BitmapFont] textureWidth "+l+"px is too small "+("(fontFamily: '"+o.fontFamily+"', fontSize: "+o.fontSize+"px, char: '")+w+"')");--v,s+=t*k,s=Math.ceil(s),q=0,t=0;continue}!function(a,b,c,d,e,f,g){var h=c.text,i=c.fontProperties;b.translate(d,e),b.scale(f,f);var j=g.strokeThickness/2,k=-(g.strokeThickness/2);if(b.font=g.toFontString(),b.lineWidth=g.strokeThickness,b.textBaseline=g.textBaseline,b.lineJoin=g.lineJoin,b.miterLimit=g.miterLimit,b.fillStyle=function(a,b,c,d,e,f){var g,h=c.fill;if(!Array.isArray(h))return h;if(1===h.length)return h[0];var i=c.dropShadow?c.dropShadowDistance:0,j=c.padding||0,k=a.width/d-i-2*j,l=a.height/d-i-2*j,m=h.slice(),n=c.fillGradientStops.slice();if(!n.length)for(var o=m.length+1,p=1;p<o;++p)n.push(p/o);if(m.unshift(h[0]),n.unshift(0),m.push(h[h.length-1]),n.push(1),c.fillGradientType===r.LINEAR_VERTICAL){g=b.createLinearGradient(k/2,j,k/2,l+j);for(var q=0,s=(f.fontProperties.fontSize+c.strokeThickness)/l,p=0;p<e.length;p++)for(var t=f.lineHeight*p,u=0;u<m.length;u++){var v=Math.max(q,t/l+("number"==typeof n[u]?n[u]:u/m.length)*s);v=Math.min(v,1),g.addColorStop(v,m[u]),q=v}}else{g=b.createLinearGradient(j,l/2,k+j,l/2);for(var w=m.length+1,x=1,p=0;p<m.length;p++){var y=void 0;y="number"==typeof n[p]?n[p]:x/w,g.addColorStop(y,m[p]),x++}}return g}(a,b,g,f,[h],c),b.strokeStyle=g.stroke,g.dropShadow){var l=g.dropShadowColor,m=(0,I.hex2rgb)("number"==typeof l?l:(0,I.string2hex)(l)),n=g.dropShadowBlur*f,o=g.dropShadowDistance*f;b.shadowColor="rgba("+255*m[0]+","+255*m[1]+","+255*m[2]+","+g.dropShadowAlpha+")",b.shadowBlur=n,b.shadowOffsetX=Math.cos(g.dropShadowAngle)*o,b.shadowOffsetY=Math.sin(g.dropShadowAngle)*o}else b.shadowColor="black",b.shadowBlur=0,b.shadowOffsetX=0,b.shadowOffsetY=0;g.stroke&&g.strokeThickness&&b.strokeText(h,j,k+c.lineHeight-i.descent),g.fill&&b.fillText(h,j,k+c.lineHeight-i.descent),b.setTransform(1,0,0,1,0,0),b.fillStyle="rgba(0, 0, 0, 0)"}(e,f,x,q,s,k,o);var B=b8(x.text);p.char.push({id:B,page:u.length-1,x:q/k,y:s/k,width:A,height:z,xoffset:0,yoffset:0,xadvance:Math.ceil(y-(o.dropShadow?o.dropShadowDistance:0)-(o.stroke?o.strokeThickness:0))}),q+=(A+2*j)*k,q=Math.ceil(q)}if(!(null==d?void 0:d.skipKerning))for(var v=0,C=n.length;v<C;v++)for(var D=n[v],E=0;E<C;E++){var F=n[E],G=f.measureText(D).width,H=f.measureText(F).width,J=f.measureText(D+F).width-(G+H);J&&p.kerning.push({first:b8(D),second:b8(F),amount:J})}var L=new a(p,u,!0);return void 0!==a.available[b]&&a.uninstall(b),a.available[b]=L,L},a.ALPHA=[["a","z"],["A","Z"]," "],a.NUMERIC=[["0","9"]],a.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],a.ASCII=[[" ","~"]],a.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:a.ALPHANUMERIC},a.available={},a}(),ca=[],cb=[],cc=[],cd=function(a){function b(){this.constructor=c}function c(b,d){void 0===d&&(d={});var e=a.call(this)||this;e._tint=0xffffff;var f=Object.assign({},c.styleDefaults,d),g=f.align,h=f.tint,i=f.maxWidth,j=f.letterSpacing,k=f.fontName,l=f.fontSize;if(!b9.available[k])throw Error('Missing BitmapFont "'+k+'"');return e._activePagesMeshData=[],e._textWidth=0,e._textHeight=0,e._align=g,e._tint=h,e._font=void 0,e._fontName=k,e._fontSize=l,e.text=b,e._maxWidth=i,e._maxLineHeight=0,e._letterSpacing=j,e._anchor=new N.oA(function(){e.dirty=!0},e,0,0),e._roundPixels=aq.W0.ROUND_PIXELS,e.dirty=!0,e._resolution=aq.W0.RESOLUTION,e._autoResolution=!0,e._textureCache={},e}return b0(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.updateText=function(){for(var a,b=b9.available[this._fontName],c=this.fontSize,d=c/b.size,e=new N.bR,f=[],g=[],h=[],i=b7(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),j=this._maxWidth*b.size/c,k="none"===b.distanceFieldType?ca:cb,l=null,m=0,n=0,o=0,p=-1,q=0,r=0,s=0,t=0,u=0;u<i.length;u++){var v=i[u],w=b8(v);if(/(?:\s)/.test(v)&&(p=u,q=m,t++),"\r"===v||"\n"===v){g.push(m),h.push(-1),n=Math.max(n,m),++o,++r,e.x=0,e.y+=b.lineHeight,l=null,t=0;continue}var x=b.chars[w];if(x){l&&x.kerning[l]&&(e.x+=x.kerning[l]);var y=cc.pop()||{texture:K.gP.EMPTY,line:0,charCode:0,prevSpaces:0,position:new N.bR};y.texture=x.texture,y.line=o,y.charCode=w,y.position.x=e.x+x.xOffset+this._letterSpacing/2,y.position.y=e.y+x.yOffset,y.prevSpaces=t,f.push(y),m=y.position.x+Math.max(x.xAdvance-x.xOffset,x.texture.orig.width),e.x+=x.xAdvance+this._letterSpacing,s=Math.max(s,x.yOffset+x.texture.height),l=w,-1!==p&&j>0&&e.x>j&&(++r,(0,I.removeItems)(f,1+p-r,1+u-p),u=p,p=-1,g.push(q),h.push(f.length>0?f[f.length-1].prevSpaces:0),n=Math.max(n,q),o++,e.x=0,e.y+=b.lineHeight,l=null,t=0)}}var z=i[i.length-1];"\r"!==z&&"\n"!==z&&(/(?:\s)/.test(z)&&(m=q),g.push(m),n=Math.max(n,m),h.push(-1));for(var A=[],u=0;u<=o;u++){var B=0;"right"===this._align?B=n-g[u]:"center"===this._align?B=(n-g[u])/2:"justify"===this._align&&(B=h[u]<0?0:(n-g[u])/h[u]),A.push(B)}var C=f.length,D={},E=[],F=this._activePagesMeshData;k.push.apply(k,F);for(var u=0;u<C;u++){var G=f[u].texture,H=G.baseTexture.uid;if(!D[H]){var J=k.pop();if(!J){var L=new b_,M=void 0,O=void 0;"none"===b.distanceFieldType?(M=new b$(K.gP.EMPTY),O=X.B9.NORMAL):(M=new b$(K.gP.EMPTY,{program:K.BP.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),O=X.B9.NORMAL_NPM);var P=new bZ(L,M);P.blendMode=O,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:P,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;var Q=this._textureCache;Q[H]=Q[H]||new K.gP(G.baseTexture),J.mesh.texture=Q[H],J.mesh.tint=this._tint,E.push(J),D[H]=J}D[H].total++}for(var u=0;u<F.length;u++)-1===E.indexOf(F[u])&&this.removeChild(F[u].mesh);for(var u=0;u<E.length;u++)E[u].mesh.parent!==this&&this.addChild(E[u].mesh);for(var u in this._activePagesMeshData=E,D){var J=D[u],R=J.total;if(!((null==(a=J.indices)?void 0:a.length)>6*R)||J.vertices.length<2*bZ.BATCHABLE_SIZE)J.vertices=new Float32Array(8*R),J.uvs=new Float32Array(8*R),J.indices=new Uint16Array(6*R);else for(var S=J.total,T=J.vertices,U=4*S*2;U<T.length;U++)T[U]=0;J.mesh.size=6*R}for(var u=0;u<C;u++){var v=f[u],V=v.position.x+A[v.line]*("justify"===this._align?v.prevSpaces:1);this._roundPixels&&(V=Math.round(V));var W=V*d,Y=v.position.y*d,G=v.texture,Z=D[G.baseTexture.uid],$=G.frame,_=G._uvs,aa=Z.index++;Z.indices[6*aa+0]=0+4*aa,Z.indices[6*aa+1]=1+4*aa,Z.indices[6*aa+2]=2+4*aa,Z.indices[6*aa+3]=0+4*aa,Z.indices[6*aa+4]=2+4*aa,Z.indices[6*aa+5]=3+4*aa,Z.vertices[8*aa+0]=W,Z.vertices[8*aa+1]=Y,Z.vertices[8*aa+2]=W+$.width*d,Z.vertices[8*aa+3]=Y,Z.vertices[8*aa+4]=W+$.width*d,Z.vertices[8*aa+5]=Y+$.height*d,Z.vertices[8*aa+6]=W,Z.vertices[8*aa+7]=Y+$.height*d,Z.uvs[8*aa+0]=_.x0,Z.uvs[8*aa+1]=_.y0,Z.uvs[8*aa+2]=_.x1,Z.uvs[8*aa+3]=_.y1,Z.uvs[8*aa+4]=_.x2,Z.uvs[8*aa+5]=_.y2,Z.uvs[8*aa+6]=_.x3,Z.uvs[8*aa+7]=_.y3}for(var u in this._textWidth=n*d,this._textHeight=(e.y+b.lineHeight)*d,D){var J=D[u];if(0!==this.anchor.x||0!==this.anchor.y)for(var ab=0,ac=this._textWidth*this.anchor.x,ad=this._textHeight*this.anchor.y,ae=0;ae<J.total;ae++)J.vertices[ab++]-=ac,J.vertices[ab++]-=ad,J.vertices[ab++]-=ac,J.vertices[ab++]-=ad,J.vertices[ab++]-=ac,J.vertices[ab++]-=ad,J.vertices[ab++]-=ac,J.vertices[ab++]-=ad;this._maxLineHeight=s*d;var af=J.mesh.geometry.getBuffer("aVertexPosition"),ag=J.mesh.geometry.getBuffer("aTextureCoord"),ah=J.mesh.geometry.getIndex();af.data=J.vertices,ag.data=J.uvs,ah.data=J.indices,af.update(),ag.update(),ah.update()}for(var u=0;u<f.length;u++)cc.push(f[u]);this._font=b,this.dirty=!1},c.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},c.prototype._render=function(b){this._autoResolution&&this._resolution!==b.resolution&&(this._resolution=b.resolution,this.dirty=!0);var c=b9.available[this._fontName],d=c.distanceFieldRange,e=c.distanceFieldType,f=c.size;if("none"!==e)for(var g=this.worldTransform,h=g.a,i=g.b,j=g.c,k=g.d,l=(Math.abs(Math.sqrt(h*h+i*i))+Math.abs(Math.sqrt(j*j+k*k)))/2,m=this.fontSize/f,n=0,o=this._activePagesMeshData;n<o.length;n++)o[n].mesh.shader.uniforms.uFWidth=l*d*m*this._resolution;a.prototype._render.call(this,b)},c.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},c.prototype.validate=function(){var a=b9.available[this._fontName];if(!a)throw Error('Missing BitmapFont "'+this._fontName+'"');this._font!==a&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(c.prototype,"tint",{get:function(){return this._tint},set:function(a){if(this._tint!==a){this._tint=a;for(var b=0;b<this._activePagesMeshData.length;b++)this._activePagesMeshData[b].mesh.tint=a}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"align",{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"fontName",{get:function(){return this._fontName},set:function(a){if(!b9.available[a])throw Error('Missing BitmapFont "'+a+'"');this._fontName!==a&&(this._fontName=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"fontSize",{get:function(){var a;return null!=(a=this._fontSize)?a:b9.available[this._fontName].size},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"anchor",{get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"text",{get:function(){return this._text},set:function(a){a=String(null==a?"":a),this._text!==a&&(this._text=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(a){this._maxWidth!==a&&(this._maxWidth=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(a){a!==this._roundPixels&&(this._roundPixels=a,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"resolution",{get:function(){return this._resolution},set:function(a){this._autoResolution=!1,this._resolution!==a&&(this._resolution=a,this.dirty=!0)},enumerable:!1,configurable:!0}),c.prototype.destroy=function(b){var c=this._textureCache,d="none"===b9.available[this._fontName].distanceFieldType?ca:cb;d.push.apply(d,this._activePagesMeshData);for(var e=0,f=this._activePagesMeshData;e<f.length;e++){var g=f[e];this.removeChild(g.mesh)}for(var h in this._activePagesMeshData=[],d.filter(function(a){return c[a.mesh.texture.baseTexture.uid]}).forEach(function(a){a.mesh.texture=K.gP.EMPTY}),c)c[h].destroy(),delete c[h];this._font=null,this._textureCache=null,a.prototype.destroy.call(this,b)},c.styleDefaults={align:"left",tint:0xffffff,maxWidth:0,letterSpacing:0},c}(J.mc),ce=function(){function a(){}return a.add=function(){ag.setExtensionXhrType("fnt",ag.XHR_RESPONSE_TYPE.TEXT)},a.use=function(b,c){var d=b6(b.data);if(!d)return void c();for(var e=a.getBaseUrl(this,b),f=d.parse(b.data),g={},h=function(a){g[a.metadata.pageFile]=a.texture,Object.keys(g).length===f.page.length&&(b.bitmapFont=b9.install(f,g,!0),c())},i=0;i<f.page.length;++i){var j=f.page[i].file,k=e+j,l=!1;for(var m in this.resources){var n=this.resources[m];if(n.url===k){n.metadata.pageFile=j,n.texture?h(n):n.onAfterMiddleware.add(h),l=!0;break}}if(!l){var o={crossOrigin:b.crossOrigin,loadType:ag.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:j},b.metadata.imageMetadata),parentResource:b};this.add(k,o,h)}}},a.getBaseUrl=function(b,c){var d=c.isDataUrl?"":a.dirname(c.url);return c.isDataUrl&&("."===d&&(d=""),b.baseUrl&&d&&"/"===b.baseUrl.charAt(b.baseUrl.length-1)&&(d+="/")),(d=d.replace(b.baseUrl,""))&&"/"!==d.charAt(d.length-1)&&(d+="/"),d},a.dirname=function(a){var b=a.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return b===a?".":""===b?"/":b},a.extension=K.Ag.Loader,a}(),cf=function(a,b){return(cf=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},cg=function(a){function b(){this.constructor=c}function c(b){void 0===b&&(b=1);var c=a.call(this,K.MT,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return c.alpha=b,c}return cf(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),Object.defineProperty(c.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(a){this.uniforms.uAlpha=a},enumerable:!1,configurable:!0}),c}(K.dJ),ch=function(a,b){return(ch=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function ci(a,b){function c(){this.constructor=a}ch(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var cj={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ck=function(a){function b(b,c,d,e,f){void 0===c&&(c=8),void 0===d&&(d=4),void 0===e&&(e=aq.W0.FILTER_RESOLUTION),void 0===f&&(f=5);var g=this,h=function(a,b){var c,d=Math.ceil(a/2),e="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",f="";c=b?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var g=0;g<a;g++){var h=c.replace("%index%",g.toString());f+=h=h.replace("%sampleIndex%",g-(d-1)+".0"),f+="\n"}return(e=e.replace("%blur%",f)).replace("%size%",a.toString())}(f,b),i=function(a){for(var b,c=cj[a],d=c.length,e="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}",f="",g=0;g<a;g++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",g.toString());b=g,g>=d&&(b=a-g-1),f+=h=h.replace("%value%",c[b].toString()),f+="\n"}return(e=e.replace("%blur%",f)).replace("%size%",a.toString())}(f);return(g=a.call(this,h,i)||this).horizontal=b,g.resolution=e,g._quality=0,g.quality=d,g.blur=c,g}return ci(b,a),b.prototype.apply=function(a,b,c,d){if(c?this.horizontal?this.uniforms.strength=1/c.width*(c.width/b.width):this.uniforms.strength=1/c.height*(c.height/b.height):this.horizontal?this.uniforms.strength=1/a.renderer.width*(a.renderer.width/b.width):this.uniforms.strength=1/a.renderer.height*(a.renderer.height/b.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{var e=a.getFilterTexture(),f=a.renderer,g=b,h=e;this.state.blend=!1,a.applyFilter(this,g,h,X.fr.CLEAR);for(var i=1;i<this.passes-1;i++){a.bindAndClear(g,X.fr.BLIT),this.uniforms.uSampler=h;var j=h;h=g,g=j,f.shader.bind(this),f.geometry.draw(5)}this.state.blend=!0,a.applyFilter(this,h,c,d),a.returnFilterTexture(e)}},Object.defineProperty(b.prototype,"blur",{get:function(){return this.strength},set:function(a){this.padding=1+2*Math.abs(a),this.strength=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"quality",{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a},enumerable:!1,configurable:!0}),b}(K.dJ),cl=function(a){function b(b,c,d,e){void 0===b&&(b=8),void 0===c&&(c=4),void 0===d&&(d=aq.W0.FILTER_RESOLUTION),void 0===e&&(e=5);var f=a.call(this)||this;return f.blurXFilter=new ck(!0,b,c,d,e),f.blurYFilter=new ck(!1,b,c,d,e),f.resolution=d,f.quality=c,f.blur=b,f.repeatEdgePixels=!1,f}return ci(b,a),b.prototype.apply=function(a,b,c,d){var e=Math.abs(this.blurXFilter.strength),f=Math.abs(this.blurYFilter.strength);if(e&&f){var g=a.getFilterTexture();this.blurXFilter.apply(a,b,g,X.fr.CLEAR),this.blurYFilter.apply(a,g,c,d),a.returnFilterTexture(g)}else f?this.blurYFilter.apply(a,b,c,d):this.blurXFilter.apply(a,b,c,d)},b.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(b.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(a){this.blurYFilter.blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(a){this._repeatEdgePixels=a,this.updatePadding()},enumerable:!1,configurable:!0}),b}(K.dJ),cm=function(a,b){return(cm=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},cn=function(a){function b(){this.constructor=c}function c(){var b=this,c={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(b=a.call(this,K.Eo,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",c)||this).alpha=1,b}return cm(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype._loadMatrix=function(a,b){void 0===b&&(b=!1);var c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},c.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19]+b[4],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19]+b[9],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19]+b[14],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19]+b[19],a},c.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},c.prototype.brightness=function(a,b){this._loadMatrix([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],b)},c.prototype.tint=function(a,b){this._loadMatrix([(a>>16&255)/255,0,0,0,0,0,(a>>8&255)/255,0,0,0,0,0,(255&a)/255,0,0,0,0,0,1,0],b)},c.prototype.greyscale=function(a,b){this._loadMatrix([a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0],b)},c.prototype.blackAndWhite=function(a){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)},c.prototype.hue=function(a,b){var c=Math.cos(a=(a||0)/180*Math.PI),d=Math.sin(a),e=1/3,f=(0,Math.sqrt)(1/3);this._loadMatrix([c+(1-c)*e,e*(1-c)-f*d,e*(1-c)+f*d,0,0,e*(1-c)+f*d,c+e*(1-c),e*(1-c)-f*d,0,0,e*(1-c)-f*d,e*(1-c)+f*d,c+e*(1-c),0,0,0,0,0,1,0],b)},c.prototype.contrast=function(a,b){var c=(a||0)+1,d=-.5*(c-1);this._loadMatrix([c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0],b)},c.prototype.saturate=function(a,b){void 0===a&&(a=0);var c=2*a/3+1,d=-((c-1)*.5);this._loadMatrix([c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0],b)},c.prototype.desaturate=function(){this.saturate(-1)},c.prototype.negative=function(a){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a)},c.prototype.sepia=function(a){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)},c.prototype.technicolor=function(a){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a)},c.prototype.polaroid=function(a){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)},c.prototype.toBGR=function(a){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)},c.prototype.kodachrome=function(a){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)},c.prototype.browni=function(a){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)},c.prototype.vintage=function(a){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a)},c.prototype.colorTone=function(a,b,c,d,e){var f=((c=c||0xffe580)>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=((d=d||3375104)>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a=a||.2,0,i,j,k,b=b||.15,0,f-i,g-j,h-k,0,0];this._loadMatrix(l,e)},c.prototype.night=function(a,b){var c=[-2*(a=a||.1),-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},c.prototype.predator=function(a,b){this._loadMatrix([11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0],b)},c.prototype.lsd=function(a){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)},c.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(c.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(a){this.uniforms.uAlpha=a},enumerable:!1,configurable:!0}),c}(K.dJ);cn.prototype.grayscale=cn.prototype.greyscale;var co=function(a,b){return(co=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},cp=function(a){function b(){this.constructor=c}function c(b,c){var d=this,e=new N.uq;return b.renderable=!1,(d=a.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n	gl_Position = filterVertexPosition();\n	vTextureCoord = filterTextureCoord();\n	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:b._texture,filterMatrix:e,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=b,d.maskMatrix=e,null==c&&(c=20),d.scale=new N.bR(c,c),d}return co(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.apply=function(a,b,c,d){this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var e=this.maskSprite.worldTransform,f=Math.sqrt(e.a*e.a+e.b*e.b),g=Math.sqrt(e.c*e.c+e.d*e.d);0!==f&&0!==g&&(this.uniforms.rotation[0]=e.a/f,this.uniforms.rotation[1]=e.b/f,this.uniforms.rotation[2]=e.c/g,this.uniforms.rotation[3]=e.d/g),a.applyFilter(this,b,c,d)},Object.defineProperty(c.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a},enumerable:!1,configurable:!0}),c}(K.dJ),cq=function(a,b){return(cq=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},cr=function(a){function b(){this.constructor=c}function c(){return a.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return cq(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c}(K.dJ),cs=function(a,b){return(cs=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},ct=function(a){function b(){this.constructor=c}function c(b,c){void 0===b&&(b=.5),void 0===c&&(c=Math.random());var d=a.call(this,K.Eo,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return d.noise=b,d.seed=c,d}return cs(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),Object.defineProperty(c.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(a){this.uniforms.uNoise=a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(a){this.uniforms.uSeed=a},enumerable:!1,configurable:!0}),c}(K.dJ),cu=new N.uq;J.q9.prototype._cacheAsBitmap=!1,J.q9.prototype._cacheData=null,J.q9.prototype._cacheAsBitmapResolution=null,J.q9.prototype._cacheAsBitmapMultisample=X.he.NONE;var cv=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(J.q9.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(a){a!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=a,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(a){a!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=a,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){var b;this._cacheAsBitmap!==a&&(this._cacheAsBitmap=a,a?(this._cacheData||(this._cacheData=new cv),(b=this._cacheData).originalRender=this.render,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=this.calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((b=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=b.originalRender,this.renderCanvas=b.originalRenderCanvas,this.calculateBounds=b.originalCalculateBounds,this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea))}}}),J.q9.prototype._renderCached=function(a){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(a),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(a))},J.q9.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b,c=this.alpha;this.alpha=1,a.batch.flush();var d=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var e=this.filters[0].padding;d.pad(e)}d.ceil(aq.W0.RESOLUTION);var f=a.renderTexture.current,g=a.renderTexture.sourceFrame.clone(),h=a.renderTexture.destinationFrame.clone(),i=a.projection.transform,j=K.Y7.create({width:d.width,height:d.height,resolution:this.cacheAsBitmapResolution||a.resolution,multisample:null!=(b=this.cacheAsBitmapMultisample)?b:a.multisample}),k="cacheAsBitmap_"+(0,I.uid)();this._cacheData.textureCacheId=k,K.t5.addToCache(j.baseTexture,k),K.gP.addToCache(j,k);var l=this.transform.localTransform.copyTo(cu).invert().translate(-d.x,-d.y);this.render=this._cacheData.originalRender,a.render(this,{renderTexture:j,clear:!0,transform:l,skipUpdateTransform:!1}),a.framebuffer.blit(),a.projection.transform=i,a.renderTexture.bind(f,g,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=c;var m=new bk(j);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(d.x/d.width),m.anchor.y=-(d.y/d.height),m.alpha=c,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)}},J.q9.prototype._renderCachedCanvas=function(a){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(a))},J.q9.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(null,!0),c=this.alpha;this.alpha=1;var d=a.context,e=a._projTransform;b.ceil(aq.W0.RESOLUTION);var f=K.Y7.create({width:b.width,height:b.height}),g="cacheAsBitmap_"+(0,I.uid)();this._cacheData.textureCacheId=g,K.t5.addToCache(f.baseTexture,g),K.gP.addToCache(f,g),this.transform.localTransform.copyTo(cu),cu.invert(),cu.tx-=b.x,cu.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,{renderTexture:f,clear:!0,transform:cu,skipUpdateTransform:!1}),a.context=d,a._projTransform=e,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=c;var h=new bk(f);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(b.x/b.width),h.anchor.y=-(b.y/b.height),h.alpha=c,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},J.q9.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},J.q9.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},J.q9.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.t5.removeFromCache(this._cacheData.textureCacheId),K.gP.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},J.q9.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1,this.destroy(a)},J.q9.prototype.name=null,J.mc.prototype.getChildByName=function(a,b){for(var c=0,d=this.children.length;c<d;c++)if(this.children[c].name===a)return this.children[c];if(b)for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.getChildByName){var f=e.getChildByName(a,!0);if(f)return f}}return null},J.q9.prototype.getGlobalPosition=function(a,b){return void 0===a&&(a=new N.bR),void 0===b&&(b=!1),this.parent?this.parent.toGlobal(this.position,a,b):(a.x=this.position.x,a.y=this.position.y),a};var cw=function(){function a(){}return a.init=function(a){var b=this;Object.defineProperty(this,"resizeTo",{set:function(a){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=a,a&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){b._resizeTo&&(b.cancelResize(),b._resizeId=requestAnimationFrame(function(){return b.resize()}))},this.cancelResize=function(){b._resizeId&&(cancelAnimationFrame(b._resizeId),b._resizeId=null)},this.resize=function(){if(b._resizeTo){if(b.cancelResize(),b._resizeTo===globalThis.window)a=globalThis.innerWidth,c=globalThis.innerHeight;else{var a,c,d=b._resizeTo,e=d.clientWidth,f=d.clientHeight;a=e,c=f}b.renderer.resize(a,c)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=a.resizeTo||null},a.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},a.extension=K.Ag.Application,a}(),cx=function(){function a(b){var c=this;this.stage=new J.mc,b=Object.assign({forceCanvas:!1},b),this.renderer=(0,K.q5)(b),a._plugins.forEach(function(a){a.init.call(c,b)})}return a.registerPlugin=function(a){(0,I.deprecation)("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),K.XO.add({type:K.Ag.Application,ref:a})},a.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(a.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),a.prototype.destroy=function(b,c){var d=this,e=a._plugins.slice(0);e.reverse(),e.forEach(function(a){a.destroy.call(d)}),this.stage.destroy(c),this.stage=null,this.renderer.destroy(b),this.renderer=null},a._plugins=[],a}();K.XO.handleByList(K.Ag.Application,cx._plugins),K.XO.add(cw);var cy=function(a,b){return(cy=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function cz(a,b){function c(){this.constructor=a}cy(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var cA=function(a){function b(b,c,d,e){void 0===b&&(b=100),void 0===c&&(c=100),void 0===d&&(d=10),void 0===e&&(e=10);var f=a.call(this)||this;return f.segWidth=d,f.segHeight=e,f.width=b,f.height=c,f.build(),f}return cz(b,a),b.prototype.build=function(){for(var a=this.segWidth*this.segHeight,b=[],c=[],d=[],e=this.segWidth-1,f=this.segHeight-1,g=this.width/e,h=this.height/f,i=0;i<a;i++){var j=i%this.segWidth,k=i/this.segWidth|0;b.push(j*g,k*h),c.push(j/e,k/f)}for(var l=e*f,i=0;i<l;i++){var m=i%e,n=i/e|0,o=n*this.segWidth+m,p=n*this.segWidth+m+1,q=(n+1)*this.segWidth+m,r=(n+1)*this.segWidth+m+1;d.push(o,p,q,p,r,q)}this.buffers[0].data=new Float32Array(b),this.buffers[1].data=new Float32Array(c),this.indexBuffer.data=new Uint16Array(d),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},b}(b_),cB=function(a){function b(b,c,d){void 0===b&&(b=200),void 0===d&&(d=0);var e=a.call(this,new Float32Array(4*c.length),new Float32Array(4*c.length),new Uint16Array((c.length-1)*6))||this;return e.points=c,e._width=b,e.textureScale=d,e.build(),e}return cz(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),b.prototype.build=function(){var a=this.points;if(a){var b=this.getBuffer("aVertexPosition"),c=this.getBuffer("aTextureCoord"),d=this.getIndex();if(!(a.length<1)){b.data.length/4!==a.length&&(b.data=new Float32Array(4*a.length),c.data=new Float32Array(4*a.length),d.data=new Uint16Array((a.length-1)*6));var e=c.data,f=d.data;e[0]=0,e[1]=0,e[2]=0,e[3]=1;for(var g=0,h=a[0],i=this._width*this.textureScale,j=a.length,k=0;k<j;k++){var l=4*k;if(this.textureScale>0){var m=h.x-a[k].x,n=h.y-a[k].y,o=Math.sqrt(m*m+n*n);h=a[k],g+=o/i}else g=k/(j-1);e[l]=g,e[l+1]=0,e[l+2]=g,e[l+3]=1}for(var p=0,k=0;k<j-1;k++){var l=2*k;f[p++]=l,f[p++]=l+1,f[p++]=l+2,f[p++]=l+2,f[p++]=l+1,f[p++]=l+3}c.update(),d.update(),this.updateVertices()}}},b.prototype.updateVertices=function(){var a,b=this.points;if(!(b.length<1)){for(var c=b[0],d=0,e=0,f=this.buffers[0].data,g=b.length,h=0;h<g;h++){var i=b[h],j=4*h;e=-((a=h<b.length-1?b[h+1]:i).x-c.x);var k=Math.sqrt((d=a.y-c.y)*d+e*e),l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;d/=k,e/=k,d*=l,e*=l,f[j]=i.x+d,f[j+1]=i.y+e,f[j+2]=i.x-d,f[j+3]=i.y-e,c=i}this.buffers[0].update()}},b.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},b}(b_),cC=function(a){function b(b,c,d){void 0===d&&(d=0);var e=this,f=new cB(b.height,c,d),g=new b$(b);return d>0&&(b.baseTexture.wrapMode=X.uR.REPEAT),(e=a.call(this,f,g)||this).autoUpdate=!0,e}return cz(b,a),b.prototype._render=function(b){var c=this.geometry;(this.autoUpdate||c._width!==this.shader.texture.height)&&(c._width=this.shader.texture.height,c.update()),a.prototype._render.call(this,b)},b}(bZ),cD=function(a){function b(b,c,d){var e=this,f=new cA(b.width,b.height,c,d),g=new b$(K.gP.WHITE);return(e=a.call(this,f,g)||this).texture=b,e.autoResize=!0,e}return cz(b,a),b.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var a=this.geometry,b=this.shader.texture,c=b.width,d=b.height;this.autoResize&&(a.width!==c||a.height!==d)&&(a.width=this.shader.texture.width,a.height=this.shader.texture.height,a.build())},Object.defineProperty(b.prototype,"texture",{get:function(){return this.shader.texture},set:function(a){this.shader.texture!==a&&(this.shader.texture=a,this._textureID=-1,a.baseTexture.valid?this.textureUpdated():a.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),b.prototype._render=function(b){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),a.prototype._render.call(this,b)},b.prototype.destroy=function(b){this.shader.texture.off("update",this.textureUpdated,this),a.prototype.destroy.call(this,b)},b}(bZ),cE=function(a){function b(b,c,d,e,f){void 0===b&&(b=K.gP.EMPTY);var g=this,h=new b_(c,d,e);h.getBuffer("aVertexPosition").static=!1;var i=new b$(b);return(g=a.call(this,h,i,null,f)||this).autoUpdate=!0,g}return cz(b,a),Object.defineProperty(b.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(a){this.geometry.getBuffer("aVertexPosition").data=a},enumerable:!1,configurable:!0}),b.prototype._render=function(b){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),a.prototype._render.call(this,b)},b}(bZ),cF=function(a){function b(b,c,d,e,f){void 0===c&&(c=10),void 0===d&&(d=10),void 0===e&&(e=10),void 0===f&&(f=10);var g=a.call(this,K.gP.WHITE,4,4)||this;return g._origWidth=b.orig.width,g._origHeight=b.orig.height,g._width=g._origWidth,g._height=g._origHeight,g._leftWidth=c,g._rightWidth=e,g._topHeight=d,g._bottomHeight=f,g.texture=b,g}return cz(b,a),b.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(b.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(a){this.geometry.getBuffer("aVertexPosition").data=a},enumerable:!1,configurable:!0}),b.prototype.updateHorizontalVertices=function(){var a=this.vertices,b=this._getMinScale();a[9]=a[11]=a[13]=a[15]=this._topHeight*b,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight*b,a[25]=a[27]=a[29]=a[31]=this._height},b.prototype.updateVerticalVertices=function(){var a=this.vertices,b=this._getMinScale();a[2]=a[10]=a[18]=a[26]=this._leftWidth*b,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth*b,a[6]=a[14]=a[22]=a[30]=this._width},b.prototype._getMinScale=function(){var a=this._leftWidth+this._rightWidth,b=this._width>a?1:this._width/a,c=this._topHeight+this._bottomHeight;return Math.min(b,this._height>c?1:this._height/c)},Object.defineProperty(b.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(a){this._leftWidth=a,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(a){this._rightWidth=a,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"topHeight",{get:function(){return this._topHeight},set:function(a){this._topHeight=a,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a,this._refresh()},enumerable:!1,configurable:!0}),b.prototype._refresh=function(){var a=this.texture,b=this.geometry.buffers[1].data;this._origWidth=a.orig.width,this._origHeight=a.orig.height;var c=1/this._origWidth,d=1/this._origHeight;b[0]=b[8]=b[16]=b[24]=0,b[1]=b[3]=b[5]=b[7]=0,b[6]=b[14]=b[22]=b[30]=1,b[25]=b[27]=b[29]=b[31]=1,b[2]=b[10]=b[18]=b[26]=c*this._leftWidth,b[4]=b[12]=b[20]=b[28]=1-c*this._rightWidth,b[9]=b[11]=b[13]=b[15]=d*this._topHeight,b[17]=b[19]=b[21]=b[23]=1-d*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},b}(cD),cG=c(226),cH=function(a,b){return(cH=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},cI=function(a){function b(){this.constructor=c}function c(b,c){void 0===c&&(c=!0);var d=a.call(this,b[0]instanceof K.gP?b[0]:b[0].texture)||this;return d._textures=null,d._durations=null,d._autoUpdate=c,d._isConnectedToTicker=!1,d.animationSpeed=1,d.loop=!0,d.updateAnchor=!1,d.onComplete=null,d.onFrameChange=null,d.onLoop=null,d._currentTime=0,d._playing=!1,d._previousFrame=null,d.textures=b,d}return cH(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(O.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1))},c.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(O.Rv.shared.add(this.update,this,O.dQ.HIGH),this._isConnectedToTicker=!0))},c.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture()},c.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture(),this.play()},c.prototype.update=function(a){if(this._playing){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){var d=this._currentTime%1*this._durations[this.currentFrame];for(d+=b/60*1e3;d<0;)this._currentTime--,d+=this._durations[this.currentFrame];var e=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*e,this._currentTime+=e;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):c!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<c?this.onLoop():this.animationSpeed<0&&this.currentFrame>c&&this.onLoop()),this.updateTexture())}},c.prototype.updateTexture=function(){var a=this.currentFrame;this._previousFrame!==a&&(this._previousFrame=a,this._texture=this._textures[a],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=0xffffff,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},c.prototype.destroy=function(b){this.stop(),a.prototype.destroy.call(this,b),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},c.fromFrames=function(a){for(var b=[],d=0;d<a.length;++d)b.push(K.gP.from(a[d]));return new c(b)},c.fromImages=function(a){for(var b=[],d=0;d<a.length;++d)b.push(K.gP.from(a[d]));return new c(b)},Object.defineProperty(c.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"textures",{get:function(){return this._textures},set:function(a){if(a[0]instanceof K.gP)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"currentFrame",{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return a<0&&(a+=this._textures.length),a},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isConnectedToTicker?(O.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(O.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),c}(bk);K.XO.add(M,Z,W,aQ,bJ,K.ch,bT,ce,aw,aK,aL,bM,O.y,am);var cJ={AlphaFilter:cg,BlurFilter:cl,BlurFilterPass:ck,ColorMatrixFilter:cn,DisplacementFilter:cp,FXAAFilter:cr,NoiseFilter:ct}},2852:a=>{var b=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;a.exports=!function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};if("abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},e)).join(""))return!1;return!0}catch(a){return!1}}()?function(a,e){for(var f,g,h=function(a){if(null==a)throw TypeError("Object.assign cannot be called with null or undefined");return Object(a)}(a),i=1;i<arguments.length;i++){for(var j in f=Object(arguments[i]))c.call(f,j)&&(h[j]=f[j]);if(b){g=b(f);for(var k=0;k<g.length;k++)d.call(f,g[k])&&(h[g[k]]=f[g[k]])}}return h}:Object.assign}};