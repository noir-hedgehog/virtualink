"use strict";exports.id=493,exports.ids=[493],exports.modules={226:(a,b,c)=>{c.d(b,{b:()=>d});var d=function(){function a(a){this.items=[],this._name=a,this._aliasCount=0}return a.prototype.emit=function(a,b,c,d,e,f,g,h){if(arguments.length>8)throw Error("max arguments reached");var i=this.name,j=this.items;this._aliasCount++;for(var k=0,l=j.length;k<l;k++)j[k][i](a,b,c,d,e,f,g,h);return j===this.items&&this._aliasCount--,this},a.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},a.prototype.add=function(a){return a[this._name]&&(this.ensureNonAliasedItems(),this.remove(a),this.items.push(a)),this},a.prototype.remove=function(a){var b=this.items.indexOf(a);return -1!==b&&(this.ensureNonAliasedItems(),this.items.splice(b,1)),this},a.prototype.contains=function(a){return -1!==this.items.indexOf(a)},a.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},a.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(a.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a}();Object.defineProperties(d.prototype,{dispatch:{value:d.prototype.emit},run:{value:d.prototype.emit}})},1546:(a,b,c)=>{c.d(b,{Fr:()=>v,OF:()=>e,W0:()=>w});var d=c(1964),e={createCanvas:function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var a;return null!=(a=document.baseURI)?a:window.location.href},fetch:function(a,b){return fetch(a,b)}},f=/iPhone/i,g=/iPod/i,h=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,j=/\bAndroid(?:.+)Mobile\b/i,k=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,m=/Silk/i,n=/Windows Phone/i,o=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,q=/BB10/i,r=/Opera Mini/i,s=/\b(CriOS|Chrome)(?:.+)Mobile/i,t=/Mobile(?:.+)Firefox\b/i,u=function(a){return void 0!==a&&"MacIntel"===a.platform&&"number"==typeof a.maxTouchPoints&&a.maxTouchPoints>1&&"undefined"==typeof MSStream},v=function(a){var b,c={userAgent:"",platform:"",maxTouchPoints:0};a||"undefined"==typeof navigator?"string"==typeof a?c.userAgent=a:a&&a.userAgent&&(c={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0}):c={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var d=c.userAgent,e=d.split("[FBAN");void 0!==e[1]&&(d=e[0]),void 0!==(e=d.split("Twitter"))[1]&&(d=e[0]);var v=(b=d,function(a){return a.test(b)}),w={apple:{phone:v(f)&&!v(n),ipod:v(g),tablet:!v(f)&&(v(h)||u(c))&&!v(n),universal:v(i),device:(v(f)||v(g)||v(h)||v(i)||u(c))&&!v(n)},amazon:{phone:v(l),tablet:!v(l)&&v(m),device:v(l)||v(m)},android:{phone:!v(n)&&v(l)||!v(n)&&v(j),tablet:!v(n)&&!v(l)&&!v(j)&&(v(m)||v(k)),device:!v(n)&&(v(l)||v(m)||v(j)||v(k))||v(/\bokhttp\b/i)},windows:{phone:v(n),tablet:v(o),device:v(n)||v(o)},other:{blackberry:v(p),blackberry10:v(q),opera:v(r),firefox:v(t),chrome:v(s),device:v(p)||v(q)||v(r)||v(t)||v(s)},any:!1,phone:!1,tablet:!1};return w.any=w.apple.device||w.android.device||w.windows.device||w.other.device,w.phone=w.apple.phone||w.android.phone||w.windows.phone,w.tablet=w.apple.tablet||w.android.tablet||w.windows.tablet,w}(globalThis.navigator),w={ADAPTER:e,MIPMAP_TEXTURES:d.E8.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:d.he.NONE,SPRITE_MAX_TEXTURES:function(a){var b=!0;if(v.tablet||v.phone){if(v.apple.device){var c=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(c){var d=parseInt(c[1],10);d<11&&(b=!1)}}if(v.android.device){var c=navigator.userAgent.match(/Android\s([0-9.]*)/);if(c){var d=parseInt(c[1],10);d<7&&(b=!1)}}}return b?32:4}(0),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:d.OS.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:d.uR.CLAMP,SCALE_MODE:d.M6.LINEAR,PRECISION_VERTEX:d.Pk.HIGH,PRECISION_FRAGMENT:v.apple.device?d.Pk.HIGH:d.Pk.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!v.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},1602:(a,b,c)=>{c.d(b,{ER:()=>x,HY:()=>d,M_:()=>j,Pp:()=>l,TE:()=>n,TO:()=>e,Td:()=>g,bO:()=>f,bR:()=>h,dL:()=>y,jl:()=>k,oA:()=>o,tS:()=>m,uq:()=>p});var d,e=2*Math.PI,f=180/Math.PI,g=Math.PI/180;!function(a){a[a.POLY=0]="POLY",a[a.RECT=1]="RECT",a[a.CIRC=2]="CIRC",a[a.ELIP=3]="ELIP",a[a.RREC=4]="RREC"}(d||(d={}));var h=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=0,this.y=0,this.x=a,this.y=b}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copyFrom=function(a){return this.set(a.x,a.y),this},a.prototype.copyTo=function(a){return a.set(this.x,this.y),a},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.set=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=a),this.x=a,this.y=b,this},a.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},a}(),i=[new h,new h,new h,new h],j=function(){function a(a,b,c,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===e&&(e=0),this.x=Number(a),this.y=Number(b),this.width=Number(c),this.height=Number(e),this.type=d.RECT}return Object.defineProperty(a.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(a,"EMPTY",{get:function(){return new a(0,0,0,0)},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},a.prototype.copyTo=function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},a.prototype.contains=function(a,b){return!(this.width<=0)&&!(this.height<=0)&&!!(a>=this.x)&&!!(a<this.x+this.width)&&!!(b>=this.y)&&!!(b<this.y+this.height)},a.prototype.intersects=function(a,b){if(!b){var c=this.x<a.x?a.x:this.x;if((this.right>a.right?a.right:this.right)<=c)return!1;var d=this.y<a.y?a.y:this.y;return(this.bottom>a.bottom?a.bottom:this.bottom)>d}var e=this.left,f=this.right,g=this.top,h=this.bottom;if(f<=e||h<=g)return!1;var j=i[0].set(a.left,a.top),k=i[1].set(a.left,a.bottom),l=i[2].set(a.right,a.top),m=i[3].set(a.right,a.bottom);if(l.x<=j.x||k.y<=j.y)return!1;var n=Math.sign(b.a*b.d-b.b*b.c);if(0===n||(b.apply(j,j),b.apply(k,k),b.apply(l,l),b.apply(m,m),Math.max(j.x,k.x,l.x,m.x)<=e||Math.min(j.x,k.x,l.x,m.x)>=f||Math.max(j.y,k.y,l.y,m.y)<=g||Math.min(j.y,k.y,l.y,m.y)>=h))return!1;var o=n*(k.y-j.y),p=n*(j.x-k.x),q=o*e+p*g,r=o*f+p*g,s=o*e+p*h,t=o*f+p*h;if(Math.max(q,r,s,t)<=o*j.x+p*j.y||Math.min(q,r,s,t)>=o*m.x+p*m.y)return!1;var u=n*(j.y-l.y),v=n*(l.x-j.x),w=u*e+v*g,x=u*f+v*g,y=u*e+v*h,z=u*f+v*h;return!(Math.max(w,x,y,z)<=u*j.x+v*j.y||Math.min(w,x,y,z)>=u*m.x+v*m.y)},a.prototype.pad=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=a),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b,this},a.prototype.fit=function(a){var b=Math.max(this.x,a.x),c=Math.min(this.x+this.width,a.x+a.width),d=Math.max(this.y,a.y),e=Math.min(this.y+this.height,a.y+a.height);return this.x=b,this.width=Math.max(c-b,0),this.y=d,this.height=Math.max(e-d,0),this},a.prototype.ceil=function(a,b){void 0===a&&(a=1),void 0===b&&(b=.001);var c=Math.ceil((this.x+this.width-b)*a)/a,d=Math.ceil((this.y+this.height-b)*a)/a;return this.x=Math.floor((this.x+b)*a)/a,this.y=Math.floor((this.y+b)*a)/a,this.width=c-this.x,this.height=d-this.y,this},a.prototype.enlarge=function(a){var b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,a.y),e=Math.max(this.y+this.height,a.y+a.height);return this.x=b,this.width=c-b,this.y=d,this.height=e-d,this},a.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},a}(),k=function(){function a(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.x=a,this.y=b,this.radius=c,this.type=d.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.radius*this.radius,d=this.x-a,e=this.y-b;return d*=d,e*=e,d+e<=c},a.prototype.getBounds=function(){return new j(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},a}(),l=function(){function a(a,b,c,e){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===e&&(e=0),this.x=a,this.y=b,this.width=c,this.height=e,this.type=d.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,c+d<=1},a.prototype.getBounds=function(){return new j(this.x-this.width,this.y-this.height,this.width,this.height)},a.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},a}(),m=function(){function a(){for(var a=arguments,b=[],c=0;c<arguments.length;c++)b[c]=a[c];var e=Array.isArray(b[0])?b[0]:b;if("number"!=typeof e[0]){for(var f=[],g=0,h=e.length;g<h;g++)f.push(e[g].x,e[g].y);e=f}this.points=e,this.type=d.POLY,this.closeStroke=!0}return a.prototype.clone=function(){var b=new a(this.points.slice());return b.closeStroke=this.closeStroke,b},a.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;e<d;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1];h>b!=j>b&&a<(b-h)/(j-h)*(i-g)+g&&(c=!c)}return c},a.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(a,b){return a+", "+b},"")+"]"},a}(),n=function(){function a(a,b,c,e,f){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===e&&(e=0),void 0===f&&(f=20),this.x=a,this.y=b,this.width=c,this.height=e,this.radius=f,this.type=d.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){var c=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(b>=this.y+c&&b<=this.y+this.height-c||a>=this.x+c&&a<=this.x+this.width-c)return!0;var d=a-(this.x+c),e=b-(this.y+c),f=c*c;if(d*d+e*e<=f||(d=a-(this.x+this.width-c))*d+e*e<=f||d*d+(e=b-(this.y+this.height-c))*e<=f||(d=a-(this.x+c))*d+e*e<=f)return!0}return!1},a.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius=")+this.radius+"]"},a}(),o=function(){function a(a,b,c,d){void 0===c&&(c=0),void 0===d&&(d=0),this._x=c,this._y=d,this.cb=a,this.scope=b}return a.prototype.clone=function(b,c){return void 0===b&&(b=this.cb),void 0===c&&(c=this.scope),new a(b,c,this._x,this._y)},a.prototype.set=function(a,b){return void 0===a&&(a=0),void 0===b&&(b=a),(this._x!==a||this._y!==b)&&(this._x=a,this._y=b,this.cb.call(this.scope)),this},a.prototype.copyFrom=function(a){return(this._x!==a.x||this._y!==a.y)&&(this._x=a.x,this._y=a.y,this.cb.call(this.scope)),this},a.prototype.copyTo=function(a){return a.set(this._x,this._y),a},a.prototype.equals=function(a){return a.x===this._x&&a.y===this._y},a.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),a}(),p=function(){function a(a,b,c,d,e,f){void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=0),this.array=null,this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f}return a.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},a.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},a.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0),c[8]=1,c},a.prototype.apply=function(a,b){b=b||new h;var c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},a.prototype.applyInverse=function(a,b){b=b||new h;var c=1/(this.a*this.d+-(this.c*this.b)),d=a.x,e=a.y;return b.x=this.d*c*d+-this.c*c*e+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*e+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},a.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},a.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},a.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},a.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},a.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){return this.a=Math.cos(g+i)*e,this.b=Math.sin(g+i)*e,this.c=-Math.sin(g-h)*f,this.d=Math.cos(g-h)*f,this.tx=a-(c*this.a+d*this.c),this.ty=b-(c*this.b+d*this.d),this},a.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c,this.b=c*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this},a.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,f=this.d,g=a.pivot,h=-Math.atan2(-d,f),i=Math.atan2(c,b),j=Math.abs(h+i);return j<1e-5||1e-5>Math.abs(e-j)?(a.rotation=i,a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=h,a.skew.y=i),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+f*f),a.position.x=this.tx+(g.x*b+g.y*d),a.position.y=this.ty+(g.x*c+g.y*f),a},a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var b=new a;return b.a=this.a,b.b=this.b,b.c=this.c,b.d=this.d,b.tx=this.tx,b.ty=this.ty,b},a.prototype.copyTo=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},a.prototype.copyFrom=function(a){return this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.tx=a.tx,this.ty=a.ty,this},a.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(a,"IDENTITY",{get:function(){return new a},enumerable:!1,configurable:!0}),Object.defineProperty(a,"TEMP_MATRIX",{get:function(){return new a},enumerable:!1,configurable:!0}),a}(),q=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],r=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],t=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],v=[],w=Math.sign;!function(){for(var a=0;a<16;a++){var b=[];u.push(b);for(var c=0;c<16;c++)for(var d=w(q[a]*q[c]+s[a]*r[c]),e=w(r[a]*q[c]+t[a]*r[c]),f=w(q[a]*s[c]+s[a]*t[c]),g=w(r[a]*s[c]+t[a]*t[c]),h=0;h<16;h++)if(q[h]===d&&r[h]===e&&s[h]===f&&t[h]===g){b.push(h);break}}for(var a=0;a<16;a++){var i=new p;i.set(q[a],r[a],s[a],t[a],0,0),v.push(i)}}();var x={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(a){return q[a]},uY:function(a){return r[a]},vX:function(a){return s[a]},vY:function(a){return t[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return u[a][b]},sub:function(a,b){return u[a][x.inv(b)]},rotate180:function(a){return 4^a},isVertical:function(a){return(3&a)==2},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?x.S:x.N:2*Math.abs(b)<=Math.abs(a)?a>0?x.E:x.W:b>0?a>0?x.SE:x.SW:a>0?x.NE:x.NW},matrixAppendRotationInv:function(a,b,c,d){void 0===c&&(c=0),void 0===d&&(d=0);var e=v[x.inv(b)];e.tx=c,e.ty=d,a.append(e)}},y=function(){function a(){this.worldTransform=new p,this.localTransform=new p,this.position=new o(this.onChange,this,0,0),this.scale=new o(this.onChange,this,1,1),this.pivot=new o(this.onChange,this,0,0),this.skew=new o(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return a.prototype.onChange=function(){this._localID++},a.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},a.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", ")+this.position.y+") rotation="+this.rotation+" "+("scale=("+this.scale.x+", ")+this.scale.y+") "+("skew=("+this.skew.x+", ")+this.skew.y+") ]"},a.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},a.prototype.updateTransform=function(a){var b=this.localTransform;if(this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale.x,b.b=this._sx*this.scale.x,b.c=this._cy*this.scale.y,b.d=this._sy*this.scale.y,b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c),b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._parentID=a._worldID,this._worldID++}},a.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},Object.defineProperty(a.prototype,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation!==a&&(this._rotation=a,this.updateSkew())},enumerable:!1,configurable:!0}),a.IDENTITY=new a,a}()},1964:(a,b,c)=>{var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;c.d(b,{B9:()=>g,E8:()=>o,Eq:()=>u,Gk:()=>p,Km:()=>d,M6:()=>m,OS:()=>r,Pk:()=>s,QE:()=>k,XZ:()=>l,_4:()=>h,dW:()=>j,fr:()=>q,h3:()=>e,hR:()=>i,he:()=>v,uR:()=>n,vg:()=>t,wn:()=>f,yw:()=>w}),function(a){a[a.WEBGL_LEGACY=0]="WEBGL_LEGACY",a[a.WEBGL=1]="WEBGL",a[a.WEBGL2=2]="WEBGL2"}(d||(d={})),function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.WEBGL=1]="WEBGL",a[a.CANVAS=2]="CANVAS"}(e||(e={})),function(a){a[a.COLOR=16384]="COLOR",a[a.DEPTH=256]="DEPTH",a[a.STENCIL=1024]="STENCIL"}(f||(f={})),function(a){a[a.NORMAL=0]="NORMAL",a[a.ADD=1]="ADD",a[a.MULTIPLY=2]="MULTIPLY",a[a.SCREEN=3]="SCREEN",a[a.OVERLAY=4]="OVERLAY",a[a.DARKEN=5]="DARKEN",a[a.LIGHTEN=6]="LIGHTEN",a[a.COLOR_DODGE=7]="COLOR_DODGE",a[a.COLOR_BURN=8]="COLOR_BURN",a[a.HARD_LIGHT=9]="HARD_LIGHT",a[a.SOFT_LIGHT=10]="SOFT_LIGHT",a[a.DIFFERENCE=11]="DIFFERENCE",a[a.EXCLUSION=12]="EXCLUSION",a[a.HUE=13]="HUE",a[a.SATURATION=14]="SATURATION",a[a.COLOR=15]="COLOR",a[a.LUMINOSITY=16]="LUMINOSITY",a[a.NORMAL_NPM=17]="NORMAL_NPM",a[a.ADD_NPM=18]="ADD_NPM",a[a.SCREEN_NPM=19]="SCREEN_NPM",a[a.NONE=20]="NONE",a[a.SRC_OVER=0]="SRC_OVER",a[a.SRC_IN=21]="SRC_IN",a[a.SRC_OUT=22]="SRC_OUT",a[a.SRC_ATOP=23]="SRC_ATOP",a[a.DST_OVER=24]="DST_OVER",a[a.DST_IN=25]="DST_IN",a[a.DST_OUT=26]="DST_OUT",a[a.DST_ATOP=27]="DST_ATOP",a[a.ERASE=26]="ERASE",a[a.SUBTRACT=28]="SUBTRACT",a[a.XOR=29]="XOR"}(g||(g={})),function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(h||(h={})),function(a){a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(i||(i={})),function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(j||(j={})),function(a){a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT"}(k||(k={})),function(a){a[a.FLOAT=0]="FLOAT",a[a.INT=1]="INT",a[a.UINT=2]="UINT"}(l||(l={})),function(a){a[a.NEAREST=0]="NEAREST",a[a.LINEAR=1]="LINEAR"}(m||(m={})),function(a){a[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(n||(n={})),function(a){a[a.OFF=0]="OFF",a[a.POW2=1]="POW2",a[a.ON=2]="ON",a[a.ON_MANUAL=3]="ON_MANUAL"}(o||(o={})),function(a){a[a.NPM=0]="NPM",a[a.UNPACK=1]="UNPACK",a[a.PMA=2]="PMA",a[a.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",a[a.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",a[a.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",a[a.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(p||(p={})),function(a){a[a.NO=0]="NO",a[a.YES=1]="YES",a[a.AUTO=2]="AUTO",a[a.BLEND=0]="BLEND",a[a.CLEAR=1]="CLEAR",a[a.BLIT=2]="BLIT"}(q||(q={})),function(a){a[a.AUTO=0]="AUTO",a[a.MANUAL=1]="MANUAL"}(r||(r={})),function(a){a.LOW="lowp",a.MEDIUM="mediump",a.HIGH="highp"}(s||(s={})),function(a){a[a.NONE=0]="NONE",a[a.SCISSOR=1]="SCISSOR",a[a.STENCIL=2]="STENCIL",a[a.SPRITE=3]="SPRITE",a[a.COLOR=4]="COLOR"}(t||(t={})),function(a){a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA"}(u||(u={})),function(a){a[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH"}(v||(v={})),function(a){a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(w||(w={}))},3234:(a,b,c)=>{c.d(b,{Rv:()=>h,dQ:()=>d,y:()=>i});var d,e=c(1546),f=c(5330);e.W0.TARGET_FPMS=.06,function(a){a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY"}(d||(d={}));var g=function(){function a(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=0),void 0===d&&(d=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=a,this.context=b,this.priority=c,this.once=d}return a.prototype.match=function(a,b){return void 0===b&&(b=null),this.fn===a&&this.context===b},a.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));var b=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),b},a.prototype.connect=function(a){this.previous=a,a.next&&(a.next.previous=this),this.next=a.next,a.next=this},a.prototype.destroy=function(a){void 0===a&&(a=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var b=this.next;return this.next=a?null:b,this.previous=null,b},a}(),h=function(){function a(){var a=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new g(null,null,1/0),this.deltaMS=1/e.W0.TARGET_FPMS,this.elapsedMS=1/e.W0.TARGET_FPMS,this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return a.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(a,b,c){return void 0===c&&(c=d.NORMAL),this._addListener(new g(a,b,c))},a.prototype.addOnce=function(a,b,c){return void 0===c&&(c=d.NORMAL),this._addListener(new g(a,b,c,!0))},a.prototype._addListener=function(a){var b=this._head.next,c=this._head;if(b){for(;b;){if(a.priority>b.priority){a.connect(c);break}c=b,b=b.next}a.previous||a.connect(c)}else a.connect(c);return this._startIfPossible(),this},a.prototype.remove=function(a,b){for(var c=this._head.next;c;)c=c.match(a,b)?c.destroy():c.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(a.prototype,"count",{get:function(){if(!this._head)return 0;for(var a=0,b=this._head;b=b.next;)a++;return a},enumerable:!1,configurable:!0}),a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.destroy=function(){if(!this._protected){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy(),this._head=null}},a.prototype.update=function(a){if(void 0===a&&(a=performance.now()),a>this.lastTime){if((b=this.elapsedMS=a-this.lastTime)>this._maxElapsedMS&&(b=this._maxElapsedMS),b*=this.speed,this._minElapsedMS){var b,c=a-this._lastFrame|0;if(c<this._minElapsedMS)return;this._lastFrame=a-c%this._minElapsedMS}this.deltaMS=b,this.deltaTime=this.deltaMS*e.W0.TARGET_FPMS;for(var d=this._head,f=d.next;f;)f=f.emit(this.deltaTime);d.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=a},Object.defineProperty(a.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,Math.min(this.maxFPS,a))/1e3,e.W0.TARGET_FPMS);this._maxElapsedMS=1/b},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(a){if(0===a)this._minElapsedMS=0;else{var b=Math.max(this.minFPS,a);this._minElapsedMS=1/(b/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(a,"shared",{get:function(){if(!a._shared){var b=a._shared=new a;b.autoStart=!0,b._protected=!0}return a._shared},enumerable:!1,configurable:!0}),Object.defineProperty(a,"system",{get:function(){if(!a._system){var b=a._system=new a;b.autoStart=!0,b._protected=!0}return a._system},enumerable:!1,configurable:!0}),a}(),i=function(){function a(){}return a.init=function(a){var b=this;a=Object.assign({autoStart:!0,sharedTicker:!1},a),Object.defineProperty(this,"ticker",{set:function(a){this._ticker&&this._ticker.remove(this.render,this),this._ticker=a,a&&a.add(this.render,this,d.LOW)},get:function(){return this._ticker}}),this.stop=function(){b._ticker.stop()},this.start=function(){b._ticker.start()},this._ticker=null,this.ticker=a.sharedTicker?h.shared:new h,a.autoStart&&this.start()},a.destroy=function(){if(this._ticker){var a=this._ticker;this.ticker=null,a.destroy()}},a.extension=f.A.Application,a}()},4662:(a,b,c)=>{c.d(b,{$P:()=>a4,$Z:()=>ay,$f:()=>B,A4:()=>be,A5:()=>C,A6:()=>ad,Ag:()=>i.A,BP:()=>aE,Bu:()=>y,Bw:()=>aU,CF:()=>a1,CI:()=>v,D8:()=>a5,ES:()=>bt,Eo:()=>bh,FW:()=>r,GW:()=>G,Gj:()=>A,He:()=>a$,JH:()=>bo,LE:()=>H,LQ:()=>bn,Ln:()=>m,MT:()=>bg,Mt:()=>aF,NW:()=>aJ,Nc:()=>n,O1:()=>N,OE:()=>I,OO:()=>$,Pt:()=>ac,RO:()=>aZ,Ru:()=>a7,SD:()=>bm,Uw:()=>aG,V2:()=>V,WD:()=>as,WQ:()=>z,X1:()=>X,XN:()=>al,XO:()=>i.X,Y7:()=>M,_H:()=>a0,_J:()=>aY,aV:()=>w,ah:()=>aK,bD:()=>af,cc:()=>bk,ch:()=>bs,dJ:()=>aH,dZ:()=>s,di:()=>D,gP:()=>L,hk:()=>aR,hp:()=>Q,hq:()=>bj,iH:()=>aQ,iQ:()=>bi,iW:()=>aL,jH:()=>x,k2:()=>Z,kO:()=>W,kb:()=>ak,kp:()=>bb,lB:()=>a6,n1:()=>a_,nV:()=>bw,nW:()=>O,nj:()=>ai,oA:()=>br,pq:()=>ag,q5:()=>bf,s9:()=>aP,t5:()=>u,u3:()=>bl,u9:()=>ab,uC:()=>aB,vB:()=>a8,xv:()=>by});var d,e,f=c(1546),g=c(1964),h=c(4684),i=c(5330),j=c(226),k=c(3234),l=c(1602);f.W0.PREFER_ENV=h.isMobile.any?g.Km.WEBGL:g.Km.WEBGL2,f.W0.STRICT_TEXTURE_CACHE=!1;var m=[];function n(a,b){if(!a)return null;var c="";if("string"==typeof a){var d=/\.(\w{3,4})(?:$|\?|#)/i.exec(a);d&&(c=d[1].toLowerCase())}for(var e=m.length-1;e>=0;--e){var f=m[e];if(f.test&&f.test(a,c))return new f(a,b)}throw Error("Unrecognized source type to auto-detect Resource")}var o=function(a,b){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function p(a,b){function c(){this.constructor=a}o(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var q=function(){return(q=Object.assign||function(a){for(var b,c=arguments,d=1,e=arguments.length;d<e;d++)for(var f in b=c[d])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a}).apply(this,arguments)},r=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this._width=a,this._height=b,this.destroyed=!1,this.internal=!1,this.onResize=new j.b("setRealSize"),this.onUpdate=new j.b("update"),this.onError=new j.b("onError")}return a.prototype.bind=function(a){this.onResize.add(a),this.onUpdate.add(a),this.onError.add(a),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},a.prototype.unbind=function(a){this.onResize.remove(a),this.onUpdate.remove(a),this.onError.remove(a)},a.prototype.resize=function(a,b){(a!==this._width||b!==this._height)&&(this._width=a,this._height=b,this.onResize.emit(a,b))},Object.defineProperty(a.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),a.prototype.update=function(){this.destroyed||this.onUpdate.emit()},a.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),a.prototype.style=function(a,b,c){return!1},a.prototype.dispose=function(){},a.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},a.test=function(a,b){return!1},a}(),s=function(a){function b(b,c){var d=this,e=c||{},f=e.width,g=e.height;if(!f||!g)throw Error("BufferResource width or height invalid");return(d=a.call(this,f,g)||this).data=b,d}return p(b,a),b.prototype.upload=function(a,b,c){var d=a.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.alphaMode===g.Gk.UNPACK);var e=b.realWidth,f=b.realHeight;return c.width===e&&c.height===f?d.texSubImage2D(b.target,0,0,0,e,f,b.format,c.type,this.data):(c.width=e,c.height=f,d.texImage2D(b.target,0,c.internalFormat,e,f,0,b.format,c.type,this.data)),!0},b.prototype.dispose=function(){this.data=null},b.test=function(a){return a instanceof Float32Array||a instanceof Uint8Array||a instanceof Uint32Array},b}(r),t={scaleMode:g.M6.NEAREST,format:g.hR.RGBA,alphaMode:g.Gk.NPM},u=function(a){function b(b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=a.call(this)||this,e=(c=c||{}).alphaMode,i=c.mipmap,j=c.anisotropicLevel,k=c.scaleMode,l=c.width,m=c.height,o=c.wrapMode,p=c.format,q=c.type,s=c.target,t=c.resolution,u=c.resourceOptions;return!b||b instanceof r||((b=n(b,u)).internal=!0),d.resolution=t||f.W0.RESOLUTION,d.width=Math.round((l||0)*d.resolution)/d.resolution,d.height=Math.round((m||0)*d.resolution)/d.resolution,d._mipmap=void 0!==i?i:f.W0.MIPMAP_TEXTURES,d.anisotropicLevel=void 0!==j?j:f.W0.ANISOTROPIC_LEVEL,d._wrapMode=o||f.W0.WRAP_MODE,d._scaleMode=void 0!==k?k:f.W0.SCALE_MODE,d.format=p||g.hR.RGBA,d.type=q||g.QE.UNSIGNED_BYTE,d.target=s||g.dW.TEXTURE_2D,d.alphaMode=void 0!==e?e:g.Gk.UNPACK,d.uid=(0,h.uid)(),d.touched=0,d.isPowerOfTwo=!1,d._refreshPOT(),d._glTextures={},d.dirtyId=0,d.dirtyStyleId=0,d.cacheId=null,d.valid=l>0&&m>0,d.textureCacheIds=[],d.destroyed=!1,d.resource=null,d._batchEnabled=0,d._batchLocation=0,d.parentTextureArray=null,d.setResource(b),d}return p(b,a),Object.defineProperty(b.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"mipmap",{get:function(){return this._mipmap},set:function(a){this._mipmap!==a&&(this._mipmap=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode!==a&&(this._scaleMode=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(a){this._wrapMode!==a&&(this._wrapMode=a,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),b.prototype.setStyle=function(a,b){var c;return void 0!==a&&a!==this.scaleMode&&(this.scaleMode=a,c=!0),void 0!==b&&b!==this.mipmap&&(this.mipmap=b,c=!0),c&&this.dirtyStyleId++,this},b.prototype.setSize=function(a,b,c){return c=c||this.resolution,this.setRealSize(a*c,b*c,c)},b.prototype.setRealSize=function(a,b,c){return this.resolution=c||this.resolution,this.width=Math.round(a)/this.resolution,this.height=Math.round(b)/this.resolution,this._refreshPOT(),this.update(),this},b.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,h.isPow2)(this.realWidth)&&(0,h.isPow2)(this.realHeight)},b.prototype.setResolution=function(a){var b=this.resolution;return b===a||(this.resolution=a,this.valid&&(this.width=Math.round(this.width*b)/a,this.height=Math.round(this.height*b)/a,this.emit("update",this)),this._refreshPOT()),this},b.prototype.setResource=function(a){if(this.resource===a)return this;if(this.resource)throw Error("Resource can be set only once");return a.bind(this),this.resource=a,this},b.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},b.prototype.onError=function(a){this.emit("error",this,a)},b.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete h.BaseTextureCache[this.cacheId],delete h.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),b.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},b.prototype.dispose=function(){this.emit("dispose",this)},b.prototype.castToBaseTexture=function(){return this},b.from=function(a,c,d){void 0===d&&(d=f.W0.STRICT_TEXTURE_CACHE);var e="string"==typeof a,g=null;e?g=a:(a._pixiId||(a._pixiId=(c&&c.pixiIdPrefix||"pixiid")+"_"+(0,h.uid)()),g=a._pixiId);var i=h.BaseTextureCache[g];if(e&&d&&!i)throw Error('The cacheId "'+g+'" does not exist in BaseTextureCache.');return i||((i=new b(a,c)).cacheId=g,b.addToCache(i,g)),i},b.fromBuffer=function(a,c,d,e){var f=new s(a=a||new Float32Array(c*d*4),{width:c,height:d}),h=a instanceof Float32Array?g.QE.FLOAT:g.QE.UNSIGNED_BYTE;return new b(f,Object.assign({},t,e||{width:c,height:d,type:h}))},b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),h.BaseTextureCache[b]&&console.warn("BaseTexture added to the cache with an id ["+b+"] that already had an entry"),h.BaseTextureCache[b]=a)},b.removeFromCache=function(a){if("string"==typeof a){var b=h.BaseTextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);return c>-1&&b.textureCacheIds.splice(c,1),delete h.BaseTextureCache[a],b}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)delete h.BaseTextureCache[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},b._globalBatch=0,b}(h.EventEmitter),v=function(a){function b(b,c){var d=this,e=c||{},f=e.width,g=e.height;(d=a.call(this,f,g)||this).items=[],d.itemDirtyIds=[];for(var h=0;h<b;h++){var i=new u;d.items.push(i),d.itemDirtyIds.push(-2)}return d.length=b,d._load=null,d.baseTexture=null,d}return p(b,a),b.prototype.initFromArray=function(a,b){for(var c=0;c<this.length;c++)a[c]&&(a[c].castToBaseTexture?this.addBaseTextureAt(a[c].castToBaseTexture(),c):a[c]instanceof r?this.addResourceAt(a[c],c):this.addResourceAt(n(a[c],b),c))},b.prototype.dispose=function(){for(var a=0,b=this.length;a<b;a++)this.items[a].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},b.prototype.addResourceAt=function(a,b){if(!this.items[b])throw Error("Index "+b+" is out of bounds");return a.valid&&!this.valid&&this.resize(a.width,a.height),this.items[b].setResource(a),this},b.prototype.bind=function(b){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");a.prototype.bind.call(this,b);for(var c=0;c<this.length;c++)this.items[c].parentTextureArray=b,this.items[c].on("update",b.update,b)},b.prototype.unbind=function(b){a.prototype.unbind.call(this,b);for(var c=0;c<this.length;c++)this.items[c].parentTextureArray=null,this.items[c].off("update",b.update,b)},b.prototype.load=function(){var a=this;if(this._load)return this._load;var b=this.items.map(function(a){return a.resource}).filter(function(a){return a}).map(function(a){return a.load()});return this._load=Promise.all(b).then(function(){var b=a.items[0],c=b.realWidth,d=b.realHeight;return a.resize(c,d),Promise.resolve(a)}),this._load},b}(r),w=function(a){function b(b,c){var d,e,f=this,g=c||{},h=g.width,i=g.height;return Array.isArray(b)?(d=b,e=b.length):e=b,f=a.call(this,e,{width:h,height:i})||this,d&&f.initFromArray(d,c),f}return p(b,a),b.prototype.addBaseTextureAt=function(a,b){if(a.resource)this.addResourceAt(a.resource,b);else throw Error("ArrayResource does not support RenderTexture");return this},b.prototype.bind=function(b){a.prototype.bind.call(this,b),b.target=g.dW.TEXTURE_2D_ARRAY},b.prototype.upload=function(a,b,c){var d=this.length,e=this.itemDirtyIds,f=this.items,g=a.gl;c.dirtyId<0&&g.texImage3D(g.TEXTURE_2D_ARRAY,0,c.internalFormat,this._width,this._height,d,0,b.format,c.type,null);for(var h=0;h<d;h++){var i=f[h];e[h]<i.dirtyId&&(e[h]=i.dirtyId,i.valid&&g.texSubImage3D(g.TEXTURE_2D_ARRAY,0,0,0,h,i.resource.width,i.resource.height,1,b.format,c.type,i.resource.source))}return!0},b}(v),x=function(a){function b(b){var c=this,d=b.naturalWidth||b.videoWidth||b.width,e=b.naturalHeight||b.videoHeight||b.height;return(c=a.call(this,d,e)||this).source=b,c.noSubImage=!1,c}return p(b,a),b.crossOrigin=function(a,b,c){void 0===c&&0!==b.indexOf("data:")?a.crossOrigin=(0,h.determineCrossOrigin)(b):!1!==c&&(a.crossOrigin="string"==typeof c?c:"anonymous")},b.prototype.upload=function(a,b,c,d){var e=a.gl,f=b.realWidth,h=b.realHeight;if((d=d||this.source)instanceof HTMLImageElement){if(!d.complete||0===d.naturalWidth)return!1}else if(d instanceof HTMLVideoElement&&d.readyState<=1)return!1;return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.alphaMode===g.Gk.UNPACK),this.noSubImage||b.target!==e.TEXTURE_2D||c.width!==f||c.height!==h?(c.width=f,c.height=h,e.texImage2D(b.target,0,c.internalFormat,b.format,c.type,d)):e.texSubImage2D(e.TEXTURE_2D,0,0,0,b.format,c.type,d),!0},b.prototype.update=function(){if(!this.destroyed){var b=this.source,c=b.naturalWidth||b.videoWidth||b.width,d=b.naturalHeight||b.videoHeight||b.height;this.resize(c,d),a.prototype.update.call(this)}},b.prototype.dispose=function(){this.source=null},b}(r),y=function(a){function b(b){return a.call(this,b)||this}return p(b,a),b.test=function(a){var b=globalThis.OffscreenCanvas;return!!b&&a instanceof b||globalThis.HTMLCanvasElement&&a instanceof HTMLCanvasElement},b}(x),z=function(a){function b(c,d){var e=this,f=d||{},h=f.width,i=f.height,j=f.autoLoad,k=f.linkBaseTexture;if(c&&c.length!==b.SIDES)throw Error("Invalid length. Got "+c.length+", expected 6");e=a.call(this,6,{width:h,height:i})||this;for(var l=0;l<b.SIDES;l++)e.items[l].target=g.dW.TEXTURE_CUBE_MAP_POSITIVE_X+l;return e.linkBaseTexture=!1!==k,c&&e.initFromArray(c,d),!1!==j&&e.load(),e}return p(b,a),b.prototype.bind=function(b){a.prototype.bind.call(this,b),b.target=g.dW.TEXTURE_CUBE_MAP},b.prototype.addBaseTextureAt=function(a,b,c){if(!this.items[b])throw Error("Index "+b+" is out of bounds");if(!this.linkBaseTexture||a.parentTextureArray||Object.keys(a._glTextures).length>0)if(a.resource)this.addResourceAt(a.resource,b);else throw Error("CubeResource does not support copying of renderTexture.");else a.target=g.dW.TEXTURE_CUBE_MAP_POSITIVE_X+b,a.parentTextureArray=this.baseTexture,this.items[b]=a;return a.valid&&!this.valid&&this.resize(a.realWidth,a.realHeight),this.items[b]=a,this},b.prototype.upload=function(a,c,d){for(var e=this.itemDirtyIds,f=0;f<b.SIDES;f++){var g=this.items[f];(e[f]<g.dirtyId||d.dirtyId<c.dirtyId)&&(g.valid&&g.resource?(g.resource.upload(a,g,d),e[f]=g.dirtyId):e[f]<-1&&(a.gl.texImage2D(g.target,0,d.internalFormat,c.realWidth,c.realHeight,0,c.format,d.type,null),e[f]=-1))}return!0},b.test=function(a){return Array.isArray(a)&&a.length===b.SIDES},b.SIDES=6,b}(v),A=function(a){function b(b,c){var d=this;if(c=c||{},!(b instanceof HTMLImageElement)){var e=new Image;x.crossOrigin(e,b,c.crossorigin),e.src=b,b=e}return d=a.call(this,b)||this,!b.complete&&d._width&&d._height&&(d._width=0,d._height=0),d.url=b.src,d._process=null,d.preserveBitmap=!1,d.createBitmap=(void 0!==c.createBitmap?c.createBitmap:f.W0.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,d.alphaMode="number"==typeof c.alphaMode?c.alphaMode:null,d.bitmap=null,d._load=null,!1!==c.autoLoad&&d.load(),d}return p(b,a),b.prototype.load=function(a){var b=this;return this._load||(void 0!==a&&(this.createBitmap=a),this._load=new Promise(function(a,c){var d=b.source;b.url=d.src;var e=function(){b.destroyed||(d.onload=null,d.onerror=null,b.resize(d.width,d.height),b._load=null,b.createBitmap?a(b.process()):a(b))};d.complete&&d.src?e():(d.onload=e,d.onerror=function(a){c(a),b.onError.emit(a)})})),this._load},b.prototype.process=function(){var a=this,b=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var c=globalThis.createImageBitmap,d=!b.crossOrigin||"anonymous"===b.crossOrigin;return this._process=fetch(b.src,{mode:d?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(d){return c(d,0,0,b.width,b.height,{premultiplyAlpha:null===a.alphaMode||a.alphaMode===g.Gk.UNPACK?"premultiply":"none"})}).then(function(b){return a.destroyed?Promise.reject():(a.bitmap=b,a.update(),a._process=null,Promise.resolve(a))}),this._process},b.prototype.upload=function(b,c,d){if("number"==typeof this.alphaMode&&(c.alphaMode=this.alphaMode),!this.createBitmap)return a.prototype.upload.call(this,b,c,d);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(a.prototype.upload.call(this,b,c,d,this.bitmap),!this.preserveBitmap){var e=!0,f=c._glTextures;for(var g in f){var h=f[g];if(h!==d&&h.dirtyId!==c.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},b.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,a.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},b.test=function(a){return"string"==typeof a||a instanceof HTMLImageElement},b}(x),B=function(a){function b(b,c){var d=this;return c=c||{},(d=a.call(this,f.W0.ADAPTER.createCanvas())||this)._width=0,d._height=0,d.svg=b,d.scale=c.scale||1,d._overrideWidth=c.width,d._overrideHeight=c.height,d._resolve=null,d._crossorigin=c.crossorigin,d._load=null,!1!==c.autoLoad&&d.load(),d}return p(b,a),b.prototype.load=function(){var a=this;return this._load||(this._load=new Promise(function(c){if(a._resolve=function(){a.resize(a.source.width,a.source.height),c(a)},b.SVG_XML.test(a.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");a.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(a.svg)))}a._loadSvg()})),this._load},b.prototype._loadSvg=function(){var a=this,b=new Image;x.crossOrigin(b,this.svg,this._crossorigin),b.src=this.svg,b.onerror=function(c){a._resolve&&(b.onerror=null,a.onError.emit(c))},b.onload=function(){if(a._resolve){var c=b.width,d=b.height;if(!c||!d)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var e=c*a.scale,f=d*a.scale;(a._overrideWidth||a._overrideHeight)&&(e=a._overrideWidth||a._overrideHeight/d*c,f=a._overrideHeight||a._overrideWidth/c*d),e=Math.round(e),f=Math.round(f);var g=a.source;g.width=e,g.height=f,g._pixiId="canvas_"+(0,h.uid)(),g.getContext("2d").drawImage(b,0,0,c,d,0,0,e,f),a._resolve(),a._resolve=null}}},b.getSize=function(a){var c=b.SVG_SIZE.exec(a),d={};return c&&(d[c[1]]=Math.round(parseFloat(c[3])),d[c[5]]=Math.round(parseFloat(c[7]))),d},b.prototype.dispose=function(){a.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},b.test=function(a,c){return"svg"===c||"string"==typeof a&&a.startsWith("data:image/svg+xml")||"string"==typeof a&&b.SVG_XML.test(a)},b.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,b.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,b}(x),C=function(a){function b(c,d){var e=this;if(d=d||{},!(c instanceof HTMLVideoElement)){var f=document.createElement("video");f.setAttribute("preload","auto"),f.setAttribute("webkit-playsinline",""),f.setAttribute("playsinline",""),"string"==typeof c&&(c=[c]);var g=c[0].src||c[0];x.crossOrigin(f,g,d.crossorigin);for(var h=0;h<c.length;++h){var i=document.createElement("source"),j=c[h],k=j.src,l=j.mime,m=(k=k||c[h]).split("?").shift().toLowerCase(),n=m.slice(m.lastIndexOf(".")+1);l=l||b.MIME_TYPES[n]||"video/"+n,i.src=k,i.type=l,f.appendChild(i)}c=f}return(e=a.call(this,c)||this).noSubImage=!0,e._autoUpdate=!0,e._isConnectedToTicker=!1,e._updateFPS=d.updateFPS||0,e._msToNextUpdate=0,e.autoPlay=!1!==d.autoPlay,e._load=null,e._resolve=null,e._onCanPlay=e._onCanPlay.bind(e),e._onError=e._onError.bind(e),!1!==d.autoLoad&&e.load(),e}return p(b,a),b.prototype.update=function(b){if(!this.destroyed){var c=k.Rv.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-c),(!this._updateFPS||this._msToNextUpdate<=0)&&(a.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},b.prototype.load=function(){var a=this;if(this._load)return this._load;var b=this.source;return(b.readyState===b.HAVE_ENOUGH_DATA||b.readyState===b.HAVE_FUTURE_DATA)&&b.width&&b.height&&(b.complete=!0),b.addEventListener("play",this._onPlayStart.bind(this)),b.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(b.addEventListener("canplay",this._onCanPlay),b.addEventListener("canplaythrough",this._onCanPlay),b.addEventListener("error",this._onError,!0)),this._load=new Promise(function(c){a.valid?c(a):(a._resolve=c,b.load())}),this._load},b.prototype._onError=function(a){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(a)},b.prototype._isSourcePlaying=function(){var a=this.source;return!a.paused&&!a.ended&&this._isSourceReady()},b.prototype._isSourceReady=function(){return this.source.readyState>2},b.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(k.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0)},b.prototype._onPlayStop=function(){this._isConnectedToTicker&&(k.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1)},b.prototype._onCanPlay=function(){var a=this.source;a.removeEventListener("canplay",this._onCanPlay),a.removeEventListener("canplaythrough",this._onCanPlay);var b=this.valid;this.resize(a.videoWidth,a.videoHeight),!b&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&a.play()},b.prototype.dispose=function(){this._isConnectedToTicker&&(k.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1);var b=this.source;b&&(b.removeEventListener("error",this._onError,!0),b.pause(),b.src="",b.load()),a.prototype.dispose.call(this)},Object.defineProperty(b.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isConnectedToTicker?(k.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(k.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(a){a!==this._updateFPS&&(this._updateFPS=a)},enumerable:!1,configurable:!0}),b.test=function(a,c){return globalThis.HTMLVideoElement&&a instanceof HTMLVideoElement||b.TYPES.indexOf(c)>-1},b.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],b.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},b}(x),D=function(a){function b(b){return a.call(this,b)||this}return p(b,a),b.test=function(a){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap},b}(x);m.push(A,D,y,C,B,s,z,w);var E={__proto__:null,Resource:r,BaseImageResource:x,INSTALLED:m,autoDetectResource:n,AbstractMultiResource:v,ArrayResource:w,BufferResource:s,CanvasResource:y,CubeResource:z,ImageResource:A,SVGResource:B,VideoResource:C,ImageBitmapResource:D},F=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return p(b,a),b.prototype.upload=function(a,b,c){var d=a.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.alphaMode===g.Gk.UNPACK);var e=b.realWidth,f=b.realHeight;return c.width===e&&c.height===f?d.texSubImage2D(b.target,0,0,0,e,f,b.format,c.type,this.data):(c.width=e,c.height=f,d.texImage2D(b.target,0,c.internalFormat,e,f,0,b.format,c.type,this.data)),!0},b}(s),G=function(){function a(a,b){this.width=Math.round(a||100),this.height=Math.round(b||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new j.b("disposeFramebuffer"),this.multisample=g.he.NONE}return Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),a.prototype.addColorTexture=function(a,b){return void 0===a&&(a=0),this.colorTextures[a]=b||new u(null,{scaleMode:g.M6.NEAREST,resolution:1,mipmap:g.E8.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},a.prototype.addDepthTexture=function(a){return this.depthTexture=a||new u(new F(null,{width:this.width,height:this.height}),{scaleMode:g.M6.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:g.E8.OFF,format:g.hR.DEPTH_COMPONENT,type:g.QE.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},a.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},a.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},a.prototype.resize=function(a,b){if(a=Math.round(a),b=Math.round(b),a!==this.width||b!==this.height){this.width=a,this.height=b,this.dirtyId++,this.dirtySize++;for(var c=0;c<this.colorTextures.length;c++){var d=this.colorTextures[c],e=d.resolution;d.setSize(a/e,b/e)}if(this.depthTexture){var e=this.depthTexture.resolution;this.depthTexture.setSize(a/e,b/e)}}},a.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},a.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},a}(),H=function(a){function b(b){void 0===b&&(b={});var c=this;if("number"==typeof b){var d=arguments[0],e=arguments[1],f=arguments[2],h=arguments[3];b={width:d,height:e,scaleMode:f,resolution:h}}return b.width=b.width||100,b.height=b.height||100,b.multisample=void 0!==b.multisample?b.multisample:g.he.NONE,(c=a.call(this,null,b)||this).mipmap=g.E8.OFF,c.valid=!0,c.clearColor=[0,0,0,0],c.framebuffer=new G(c.realWidth,c.realHeight).addColorTexture(0,c),c.framebuffer.multisample=b.multisample,c.maskStack=[],c.filterStack=[{}],c}return p(b,a),b.prototype.resize=function(a,b){this.framebuffer.resize(a*this.resolution,b*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},b.prototype.dispose=function(){this.framebuffer.dispose(),a.prototype.dispose.call(this)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},b}(u),I=function(){function a(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return a.prototype.set=function(a,b,c){var d=b.width,e=b.height;if(c){var f=a.width/2/d,g=a.height/2/e,h=a.x/d+f,i=a.y/e+g;c=l.ER.add(c,l.ER.NW),this.x0=h+f*l.ER.uX(c),this.y0=i+g*l.ER.uY(c),c=l.ER.add(c,2),this.x1=h+f*l.ER.uX(c),this.y1=i+g*l.ER.uY(c),c=l.ER.add(c,2),this.x2=h+f*l.ER.uX(c),this.y2=i+g*l.ER.uY(c),c=l.ER.add(c,2),this.x3=h+f*l.ER.uX(c),this.y3=i+g*l.ER.uY(c)}else this.x0=a.x/d,this.y0=a.y/e,this.x1=(a.x+a.width)/d,this.y1=a.y/e,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/e,this.x3=a.x/d,this.y3=(a.y+a.height)/e;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},a.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0=")+this.y0+" "+("x1="+this.x1+" y1="+this.y1+" x2=")+this.x2+" "+("y2="+this.y2+" x3="+this.x3)+" y3="+this.y3+"]"},a}(),J=new I;function K(a){a.destroy=function(){},a.on=function(){},a.once=function(){},a.emit=function(){}}var L=function(a){function b(c,d,e,f,g,h){var i=a.call(this)||this;if(i.noFrame=!1,d||(i.noFrame=!0,d=new l.M_(0,0,1,1)),c instanceof b&&(c=c.baseTexture),i.baseTexture=c,i._frame=d,i.trim=f,i.valid=!1,i._uvs=J,i.uvMatrix=null,i.orig=e||d,i._rotate=Number(g||0),!0===g)i._rotate=2;else if(i._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.defaultAnchor=h?new l.bR(h.x,h.y):new l.bR(0,0),i._updateID=0,i.textureCacheIds=[],c.valid?i.noFrame?c.valid&&i.onBaseTextureUpdated(c):i.frame=d:c.once("loaded",i.onBaseTextureUpdated,i),i.noFrame&&c.on("update",i.onBaseTextureUpdated,i),i}return p(b,a),b.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},b.prototype.onBaseTextureUpdated=function(a){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=a.width,this._frame.height=a.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},b.prototype.destroy=function(a){if(this.baseTexture){if(a){var c=this.baseTexture.resource;c&&c.url&&h.TextureCache[c.url]&&b.removeFromCache(c.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,b.removeFromCache(this),this.textureCacheIds=null},b.prototype.clone=function(){var a=this._frame.clone(),c=this._frame===this.orig?a:this.orig.clone(),d=new b(this.baseTexture,!this.noFrame&&a,c,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(d._frame=a),d},b.prototype.updateUvs=function(){this._uvs===J&&(this._uvs=new I),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},b.from=function(a,c,d){void 0===c&&(c={}),void 0===d&&(d=f.W0.STRICT_TEXTURE_CACHE);var e="string"==typeof a,g=null;if(e)g=a;else if(a instanceof u){if(!a.cacheId){var i=c&&c.pixiIdPrefix||"pixiid";a.cacheId=i+"-"+(0,h.uid)(),u.addToCache(a,a.cacheId)}g=a.cacheId}else{if(!a._pixiId){var i=c&&c.pixiIdPrefix||"pixiid";a._pixiId=i+"_"+(0,h.uid)()}g=a._pixiId}var j=h.TextureCache[g];if(e&&d&&!j)throw Error('The cacheId "'+g+'" does not exist in TextureCache.');return j||a instanceof u?!j&&a instanceof u&&(j=new b(a),b.addToCache(j,g)):(c.resolution||(c.resolution=(0,h.getResolutionOfUrl)(a)),(j=new b(new u(a,c))).baseTexture.cacheId=g,u.addToCache(j.baseTexture,g),b.addToCache(j,g)),j},b.fromURL=function(a,c){var d=Object.assign({autoLoad:!1},null==c?void 0:c.resourceOptions),e=b.from(a,Object.assign({resourceOptions:d},c),!1),f=e.baseTexture.resource;return e.baseTexture.valid?Promise.resolve(e):f.load().then(function(){return Promise.resolve(e)})},b.fromBuffer=function(a,c,d,e){return new b(u.fromBuffer(a,c,d,e))},b.fromLoader=function(a,c,d,e){var g=new u(a,Object.assign({scaleMode:f.W0.SCALE_MODE,resolution:(0,h.getResolutionOfUrl)(c)},e)),i=g.resource;i instanceof A&&(i.url=c);var j=new b(g);return(d||(d=c),u.addToCache(j.baseTexture,d),b.addToCache(j,d),d!==c&&(u.addToCache(j.baseTexture,c),b.addToCache(j,c)),j.baseTexture.valid)?Promise.resolve(j):new Promise(function(a){j.baseTexture.once("loaded",function(){return a(j)})})},b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),h.TextureCache[b]&&console.warn("Texture added to the cache with an id ["+b+"] that already had an entry"),h.TextureCache[b]=a)},b.removeFromCache=function(a){if("string"==typeof a){var b=h.TextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);return c>-1&&b.textureCacheIds.splice(c,1),delete h.TextureCache[a],b}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)h.TextureCache[a.textureCacheIds[d]]===a&&delete h.TextureCache[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},Object.defineProperty(b.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"frame",{get:function(){return this._frame},set:function(a){this._frame=a,this.noFrame=!1;var b=a.x,c=a.y,d=a.width,e=a.height,f=b+d>this.baseTexture.width,g=c+e>this.baseTexture.height;if(f||g)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+b+" + "+d+" = "+(b+d)+" > "+this.baseTexture.width+" "+(f&&g?"and":"or"))+" "+("Y: "+c+" + "+e+" = "+(c+e)+" > ")+this.baseTexture.height);this.valid=d&&e&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=a),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"rotate",{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),b.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(b,"EMPTY",{get:function(){return b._EMPTY||(b._EMPTY=new b(new u),K(b._EMPTY),K(b._EMPTY.baseTexture)),b._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(b,"WHITE",{get:function(){if(!b._WHITE){var a=f.W0.ADAPTER.createCanvas(16,16),c=a.getContext("2d");a.width=16,a.height=16,c.fillStyle="white",c.fillRect(0,0,16,16),b._WHITE=new b(u.from(a)),K(b._WHITE),K(b._WHITE.baseTexture)}return b._WHITE},enumerable:!1,configurable:!0}),b}(h.EventEmitter),M=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.valid=!0,d.filterFrame=null,d.filterPoolKey=null,d.updateUvs(),d}return p(b,a),Object.defineProperty(b.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(a){this.framebuffer.multisample=a},enumerable:!1,configurable:!0}),b.prototype.resize=function(a,b,c){void 0===c&&(c=!0);var d=this.baseTexture.resolution,e=Math.round(a*d)/d,f=Math.round(b*d)/d;this.valid=e>0&&f>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=f,c&&this.baseTexture.resize(e,f),this.updateUvs()},b.prototype.setResolution=function(a){var b=this.baseTexture;b.resolution!==a&&(b.setResolution(a),this.resize(b.width,b.height,!1))},b.create=function(a){for(var c=arguments,d=[],e=1;e<arguments.length;e++)d[e-1]=c[e];return"number"==typeof a&&((0,h.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),a={width:a,height:d[0],scaleMode:d[1],resolution:d[2]}),new b(new H(a))},b}(L),N=function(){function a(a){this.texturePool={},this.textureOptions=a||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return a.prototype.createTexture=function(a,b,c){return void 0===c&&(c=g.he.NONE),new M(new H(Object.assign({width:a,height:b,resolution:1,multisample:c},this.textureOptions)))},a.prototype.getOptimalTexture=function(a,b,c,d){void 0===c&&(c=1),void 0===d&&(d=g.he.NONE),a=Math.ceil(a*c-1e-6),b=Math.ceil(b*c-1e-6),this.enableFullScreen&&a===this._pixelsWidth&&b===this._pixelsHeight?e=d>1?-d:-1:(e=((65535&(a=(0,h.nextPow2)(a)))<<16|65535&(b=(0,h.nextPow2)(b)))>>>0,d>1&&(e+=0x100000000*d)),this.texturePool[e]||(this.texturePool[e]=[]);var e,f=this.texturePool[e].pop();return f||(f=this.createTexture(a,b,d)),f.filterPoolKey=e,f.setResolution(c),f},a.prototype.getFilterTexture=function(a,b,c){var d=this.getOptimalTexture(a.width,a.height,b||a.resolution,c||g.he.NONE);return d.filterFrame=a.filterFrame,d},a.prototype.returnTexture=function(a){var b=a.filterPoolKey;a.filterFrame=null,this.texturePool[b].push(a)},a.prototype.returnFilterTexture=function(a){this.returnTexture(a)},a.prototype.clear=function(a){if(a=!1!==a)for(var b in this.texturePool){var c=this.texturePool[b];if(c)for(var d=0;d<c.length;d++)c[d].destroy(!0)}this.texturePool={}},a.prototype.setScreenSize=function(a){if(a.width!==this._pixelsWidth||a.height!==this._pixelsHeight){for(var b in this.enableFullScreen=a.width>0&&a.height>0,this.texturePool)if(0>Number(b)){var c=this.texturePool[b];if(c)for(var d=0;d<c.length;d++)c[d].destroy(!0);this.texturePool[b]=[]}this._pixelsWidth=a.width,this._pixelsHeight=a.height}},a.SCREEN_KEY=-1,a}(),O=function(){function a(a,b,c,d,e,f,h){void 0===b&&(b=0),void 0===c&&(c=!1),void 0===d&&(d=g.QE.FLOAT),this.buffer=a,this.size=b,this.normalized=c,this.type=d,this.stride=e,this.start=f,this.instance=h}return a.prototype.destroy=function(){this.buffer=null},a.from=function(b,c,d,e,f){return new a(b,c,d,e,f)},a}(),P=0,Q=function(){function a(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!1),this.data=a||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=c,this.static=b,this.id=P++,this.disposeRunner=new j.b("disposeBuffer")}return a.prototype.update=function(a){a instanceof Array&&(a=new Float32Array(a)),this.data=a||this.data,this._updateID++},a.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},a.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(a.prototype,"index",{get:function(){return this.type===g.yw.ELEMENT_ARRAY_BUFFER},set:function(a){this.type=a?g.yw.ELEMENT_ARRAY_BUFFER:g.yw.ARRAY_BUFFER},enumerable:!1,configurable:!0}),a.from=function(b){return b instanceof Array&&(b=new Float32Array(b)),new a(b)},a}(),R={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},S={5126:4,5123:2,5121:1},T=0,U={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},V=function(){function a(a,b){void 0===a&&(a=[]),void 0===b&&(b={}),this.buffers=a,this.indexBuffer=null,this.attributes=b,this.glVertexArrayObjects={},this.id=T++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new j.b("disposeGeometry"),this.refCount=0}return a.prototype.addAttribute=function(a,b,c,d,e,f,g,h){if(void 0===c&&(c=0),void 0===d&&(d=!1),void 0===h&&(h=!1),!b)throw Error("You must pass a buffer when creating an attribute");b instanceof Q||(b instanceof Array&&(b=new Float32Array(b)),b=new Q(b));var i=a.split("|");if(i.length>1){for(var j=0;j<i.length;j++)this.addAttribute(i[j],b,c,d,e);return this}var k=this.buffers.indexOf(b);return -1===k&&(this.buffers.push(b),k=this.buffers.length-1),this.attributes[a]=new O(k,c,d,e,f,g,h),this.instanced=this.instanced||h,this},a.prototype.getAttribute=function(a){return this.attributes[a]},a.prototype.getBuffer=function(a){return this.buffers[this.getAttribute(a).buffer]},a.prototype.addIndex=function(a){return a instanceof Q||(a instanceof Array&&(a=new Uint16Array(a)),a=new Q(a)),a.type=g.yw.ELEMENT_ARRAY_BUFFER,this.indexBuffer=a,-1===this.buffers.indexOf(a)&&this.buffers.push(a),this},a.prototype.getIndex=function(){return this.indexBuffer},a.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var a,b=[],c=[],d=new Q;for(a in this.attributes){var e=this.attributes[a],f=this.buffers[e.buffer];b.push(f.data),c.push(e.size*S[e.type]/4),e.buffer=0}for(a=0,d.data=function(a,b){for(var c=0,d=0,e={},f=0;f<a.length;f++)d+=b[f],c+=a[f].length;for(var g=new ArrayBuffer(4*c),i=null,j=0,f=0;f<a.length;f++){var k=b[f],l=a[f],m=(0,h.getBufferType)(l);e[m]||(e[m]=new R[m](g)),i=e[m];for(var n=0;n<l.length;n++)i[(n/k|0)*d+j+n%k]=l[n];j+=k}return new Float32Array(g)}(b,c);a<this.buffers.length;a++)this.buffers[a]!==this.indexBuffer&&this.buffers[a].destroy();return this.buffers=[d],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},a.prototype.getSize=function(){for(var a in this.attributes){var b=this.attributes[a];return this.buffers[b.buffer].data.length/(b.stride/4||b.size)}return 0},a.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},a.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},a.prototype.clone=function(){for(var b=new a,c=0;c<this.buffers.length;c++)b.buffers[c]=new Q(this.buffers[c].data.slice(0));for(var c in this.attributes){var d=this.attributes[c];b.attributes[c]=new O(d.buffer,d.size,d.normalized,d.type,d.stride,d.start,d.instance)}return this.indexBuffer&&(b.indexBuffer=b.buffers[this.buffers.indexOf(this.indexBuffer)],b.indexBuffer.type=g.yw.ELEMENT_ARRAY_BUFFER),b},a.merge=function(b){for(var c,d=new a,e=[],f=[],i=[],j=0;j<b.length;j++){c=b[j];for(var k=0;k<c.buffers.length;k++)f[k]=f[k]||0,f[k]+=c.buffers[k].data.length,i[k]=0}for(var j=0;j<c.buffers.length;j++)e[j]=new U[(0,h.getBufferType)(c.buffers[j].data)](f[j]),d.buffers[j]=new Q(e[j]);for(var j=0;j<b.length;j++){c=b[j];for(var k=0;k<c.buffers.length;k++)e[k].set(c.buffers[k].data,i[k]),i[k]+=c.buffers[k].data.length}if(d.attributes=c.attributes,c.indexBuffer){d.indexBuffer=d.buffers[c.buffers.indexOf(c.indexBuffer)],d.indexBuffer.type=g.yw.ELEMENT_ARRAY_BUFFER;for(var l=0,m=0,n=0,o=0,j=0;j<c.buffers.length;j++)if(c.buffers[j]!==c.indexBuffer){o=j;break}for(var j in c.attributes){var p=c.attributes[j];(0|p.buffer)===o&&(m+=p.size*S[p.type]/4)}for(var j=0;j<b.length;j++){for(var q=b[j].indexBuffer.data,k=0;k<q.length;k++)d.indexBuffer.data[k+n]+=l;l+=b[j].buffers[o].data.length/m,n+=q.length}}return d},a}(),W=function(a){function b(){var b=a.call(this)||this;return b.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),b}return p(b,a),b}(V),X=function(a){function b(){var b=a.call(this)||this;return b.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),b.uvs=new Float32Array([0,0,1,0,1,1,0,1]),b.vertexBuffer=new Q(b.vertices),b.uvBuffer=new Q(b.uvs),b.addAttribute("aVertexPosition",b.vertexBuffer).addAttribute("aTextureCoord",b.uvBuffer).addIndex([0,1,2,0,2,3]),b}return p(b,a),b.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this.invalidate(),this},b.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},b}(V),Y=0,Z=function(){function a(a,b,c){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Y++,this.static=!!b,this.ubo=!!c,a instanceof Q?(this.buffer=a,this.buffer.type=g.yw.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=a,this.ubo&&(this.buffer=new Q(new Float32Array(1)),this.buffer.type=g.yw.UNIFORM_BUFFER,this.autoManage=!0))}return a.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},a.prototype.add=function(b,c,d){if(this.ubo)throw Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[b]=new a(c,d)},a.from=function(b,c,d){return new a(b,c,d)},a.uboFrom=function(b,c){return new a(b,null==c||c,!0)},a}(),$=function(){function a(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=g.he.NONE,this.sourceFrame=new l.M_,this.destinationFrame=new l.M_,this.bindingSourceFrame=new l.M_,this.bindingDestinationFrame=new l.M_,this.filters=[],this.transform=null}return a.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},a}(),_=[new l.bR,new l.bR,new l.bR,new l.bR],aa=new l.uq,ab=function(){function a(a){this.renderer=a,this.defaultFilterStack=[{}],this.texturePool=new N,this.texturePool.setScreenSize(a.view),this.statePool=[],this.quad=new W,this.quadUv=new X,this.tempRect=new l.M_,this.activeState={},this.globalUniforms=new Z({outputFrame:new l.M_,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return a.prototype.push=function(a,b){for(var c,d,e=this.renderer,f=this.defaultFilterStack,g=this.statePool.pop()||new $,h=this.renderer.renderTexture,i=b[0].resolution,j=b[0].multisample,k=b[0].padding,l=b[0].autoFit,m=null==(c=b[0].legacy)||c,n=1;n<b.length;n++){var o=b[n];i=Math.min(i,o.resolution),j=Math.min(j,o.multisample),k=this.useMaxPadding?Math.max(k,o.padding):k+o.padding,l=l&&o.autoFit,m=m||null==(d=o.legacy)||d}1===f.length&&(this.defaultFilterStack[0].renderTexture=h.current),f.push(g),g.resolution=i,g.multisample=j,g.legacy=m,g.target=a,g.sourceFrame.copyFrom(a.filterArea||a.getBounds(!0)),g.sourceFrame.pad(k);var p=this.tempRect.copyFrom(h.sourceFrame);e.projection.transform&&this.transformAABB(aa.copyFrom(e.projection.transform).invert(),p),l?(g.sourceFrame.fit(p),(g.sourceFrame.width<=0||g.sourceFrame.height<=0)&&(g.sourceFrame.width=0,g.sourceFrame.height=0)):g.sourceFrame.intersects(p)||(g.sourceFrame.width=0,g.sourceFrame.height=0),this.roundFrame(g.sourceFrame,h.current?h.current.resolution:e.resolution,h.sourceFrame,h.destinationFrame,e.projection.transform),g.renderTexture=this.getOptimalFilterTexture(g.sourceFrame.width,g.sourceFrame.height,i,j),g.filters=b,g.destinationFrame.width=g.renderTexture.width,g.destinationFrame.height=g.renderTexture.height;var q=this.tempRect;q.x=0,q.y=0,q.width=g.sourceFrame.width,q.height=g.sourceFrame.height,g.renderTexture.filterFrame=g.sourceFrame,g.bindingSourceFrame.copyFrom(h.sourceFrame),g.bindingDestinationFrame.copyFrom(h.destinationFrame),g.transform=e.projection.transform,e.projection.transform=null,h.bind(g.renderTexture,g.sourceFrame,q),e.framebuffer.clear(0,0,0,0)},a.prototype.pop=function(){var a=this.defaultFilterStack,b=a.pop(),c=b.filters;this.activeState=b;var d=this.globalUniforms.uniforms;d.outputFrame=b.sourceFrame,d.resolution=b.resolution;var e=d.inputSize,f=d.inputPixel,h=d.inputClamp;if(e[0]=b.destinationFrame.width,e[1]=b.destinationFrame.height,e[2]=1/e[0],e[3]=1/e[1],f[0]=Math.round(e[0]*b.resolution),f[1]=Math.round(e[1]*b.resolution),f[2]=1/f[0],f[3]=1/f[1],h[0]=.5*f[2],h[1]=.5*f[3],h[2]=b.sourceFrame.width*e[2]-.5*f[2],h[3]=b.sourceFrame.height*e[3]-.5*f[3],b.legacy){var i=d.filterArea;i[0]=b.destinationFrame.width,i[1]=b.destinationFrame.height,i[2]=b.sourceFrame.x,i[3]=b.sourceFrame.y,d.filterClamp=d.inputClamp}this.globalUniforms.update();var j=a[a.length-1];if(this.renderer.framebuffer.blit(),1===c.length)c[0].apply(this,b.renderTexture,j.renderTexture,g.fr.BLEND,b),this.returnFilterTexture(b.renderTexture);else{var k=b.renderTexture,l=this.getOptimalFilterTexture(k.width,k.height,b.resolution);l.filterFrame=k.filterFrame;var m=0;for(m=0;m<c.length-1;++m){1===m&&b.multisample>1&&((l=this.getOptimalFilterTexture(k.width,k.height,b.resolution)).filterFrame=k.filterFrame),c[m].apply(this,k,l,g.fr.CLEAR,b);var n=k;k=l,l=n}c[m].apply(this,k,j.renderTexture,g.fr.BLEND,b),m>1&&b.multisample>1&&this.returnFilterTexture(b.renderTexture),this.returnFilterTexture(k),this.returnFilterTexture(l)}b.clear(),this.statePool.push(b)},a.prototype.bindAndClear=function(a,b){void 0===b&&(b=g.fr.CLEAR);var c=this.renderer,d=c.renderTexture,e=c.state;if(a===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,a&&a.filterFrame){var f=this.tempRect;f.x=0,f.y=0,f.width=a.filterFrame.width,f.height=a.filterFrame.height,d.bind(a,a.filterFrame,f)}else a!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?d.bind(a):this.renderer.renderTexture.bind(a,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var h=1&e.stateId||this.forceClear;(b===g.fr.CLEAR||b===g.fr.BLIT&&h)&&this.renderer.framebuffer.clear(0,0,0,0)},a.prototype.applyFilter=function(a,b,c,d){var e=this.renderer;e.state.set(a.state),this.bindAndClear(c,d),a.uniforms.uSampler=b,a.uniforms.filterGlobals=this.globalUniforms,e.shader.bind(a),a.legacy=!!a.program.attributeData.aTextureCoord,a.legacy?(this.quadUv.map(b._frame,b.filterFrame),e.geometry.bind(this.quadUv),e.geometry.draw(g._4.TRIANGLES)):(e.geometry.bind(this.quad),e.geometry.draw(g._4.TRIANGLE_STRIP))},a.prototype.calculateSpriteMatrix=function(a,b){var c=this.activeState,d=c.sourceFrame,e=c.destinationFrame,f=b._texture.orig,g=a.set(e.width,0,0,e.height,d.x,d.y),h=b.worldTransform.copyTo(l.uq.TEMP_MATRIX);return h.invert(),g.prepend(h),g.scale(1/f.width,1/f.height),g.translate(b.anchor.x,b.anchor.y),g},a.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},a.prototype.getOptimalFilterTexture=function(a,b,c,d){return void 0===c&&(c=1),void 0===d&&(d=g.he.NONE),this.texturePool.getOptimalTexture(a,b,c,d)},a.prototype.getFilterTexture=function(a,b,c){if("number"==typeof a){var d=a;a=b,b=d}a=a||this.activeState.renderTexture;var e=this.texturePool.getOptimalTexture(a.width,a.height,b||a.resolution,c||g.he.NONE);return e.filterFrame=a.filterFrame,e},a.prototype.returnFilterTexture=function(a){this.texturePool.returnTexture(a)},a.prototype.emptyPool=function(){this.texturePool.clear(!0)},a.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},a.prototype.transformAABB=function(a,b){var c=_[0],d=_[1],e=_[2],f=_[3];c.set(b.left,b.top),d.set(b.left,b.bottom),e.set(b.right,b.top),f.set(b.right,b.bottom),a.apply(c,c),a.apply(d,d),a.apply(e,e),a.apply(f,f);var g=Math.min(c.x,d.x,e.x,f.x),h=Math.min(c.y,d.y,e.y,f.y),i=Math.max(c.x,d.x,e.x,f.x),j=Math.max(c.y,d.y,e.y,f.y);b.x=g,b.y=h,b.width=i-g,b.height=j-h},a.prototype.roundFrame=function(a,b,c,d,e){if(!(a.width<=0)&&!(a.height<=0)&&!(c.width<=0)&&!(c.height<=0)){if(e){var f=e.a,g=e.b,h=e.c,i=e.d;if((Math.abs(g)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(f)>1e-4||Math.abs(i)>1e-4))return}(e=e?aa.copyFrom(e):aa.identity()).translate(-c.x,-c.y).scale(d.width/c.width,d.height/c.height).translate(d.x,d.y),this.transformAABB(e,a),a.ceil(b),this.transformAABB(e.invert(),a)}},a}(),ac=function(){function a(a){this.renderer=a}return a.prototype.flush=function(){},a.prototype.destroy=function(){this.renderer=null},a.prototype.start=function(){},a.prototype.stop=function(){this.flush()},a.prototype.render=function(a){},a}(),ad=function(){function a(a){this.renderer=a,this.emptyRenderer=new ac(a),this.currentRenderer=this.emptyRenderer}return a.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},a.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},a.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},a.prototype.copyBoundTextures=function(a,b){for(var c=this.renderer.texture.boundTextures,d=b-1;d>=0;--d)a[d]=c[d]||null,a[d]&&(a[d]._batchLocation=d)},a.prototype.boundArray=function(a,b,c,d){for(var e=a.elements,f=a.ids,g=a.count,h=0,i=0;i<g;i++){var j=e[i],k=j._batchLocation;if(k>=0&&k<d&&b[k]===j){f[i]=k;continue}for(;h<d;){var l=b[h];if(l&&l._batchEnabled===c&&l._batchLocation===h){h++;continue}f[i]=h,j._batchLocation=h,b[h]=j;break}}},a.prototype.destroy=function(){this.renderer=null},a}(),ae=0,af=function(){function a(a){this.renderer=a,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),a.view.addEventListener("webglcontextlost",this.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(a.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),a.prototype.contextChange=function(a){this.gl=a,this.renderer.gl=a,this.renderer.CONTEXT_UID=ae++},a.prototype.initFromContext=function(a){this.gl=a,this.validateContext(a),this.renderer.gl=a,this.renderer.CONTEXT_UID=ae++,this.renderer.runners.contextChange.emit(a)},a.prototype.initFromOptions=function(a){var b=this.createContext(this.renderer.view,a);this.initFromContext(b)},a.prototype.createContext=function(a,b){var c;if(f.W0.PREFER_ENV>=g.Km.WEBGL2&&(c=a.getContext("webgl2",b)),c)this.webGLVersion=2;else if(this.webGLVersion=1,!(c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=c,this.getExtensions(),this.gl},a.prototype.getExtensions=function(){var a=this.gl,b={loseContext:a.getExtension("WEBGL_lose_context"),anisotropicFiltering:a.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),s3tc:a.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:a.getExtension("WEBGL_compressed_texture_etc"),etc1:a.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:a.getExtension("WEBGL_compressed_texture_atc"),astc:a.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,b,{drawBuffers:a.getExtension("WEBGL_draw_buffers"),depthTexture:a.getExtension("WEBGL_depth_texture"),vertexArrayObject:a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:a.getExtension("OES_element_index_uint"),floatTexture:a.getExtension("OES_texture_float"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),textureHalfFloat:a.getExtension("OES_texture_half_float"),textureHalfFloatLinear:a.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,b,{colorBufferFloat:a.getExtension("EXT_color_buffer_float")})},a.prototype.handleContextLost=function(a){var b=this;a.preventDefault(),setTimeout(function(){b.gl.isContextLost()&&b.extensions.loseContext&&b.extensions.loseContext.restoreContext()},0)},a.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},a.prototype.destroy=function(){var a=this.renderer.view;this.renderer=null,a.removeEventListener("webglcontextlost",this.handleContextLost),a.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},a.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},a.prototype.validateContext=function(a){var b=a.getContextAttributes(),c="WebGL2RenderingContext"in globalThis&&a instanceof globalThis.WebGL2RenderingContext;c&&(this.webGLVersion=2),b&&!b.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var d=c||!!a.getExtension("OES_element_index_uint");this.supports.uint32Indices=d,d||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},a}(),ag=function(a){this.framebuffer=a,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=g.he.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},ah=new l.M_,ai=function(){function a(a){this.renderer=a,this.managedFramebuffers=[],this.unknownFramebuffer=new G(10,10),this.msaaSamples=null}return a.prototype.contextChange=function(){this.disposeAll(!0);var a=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new l.M_,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var b=this.renderer.context.extensions.drawBuffers,c=this.renderer.context.extensions.depthTexture;f.W0.PREFER_ENV===g.Km.WEBGL_LEGACY&&(b=null,c=null),b?a.drawBuffers=function(a){return b.drawBuffersWEBGL(a)}:(this.hasMRT=!1,a.drawBuffers=function(){}),c||(this.writeDepthTexture=!1)}else this.msaaSamples=a.getInternalformatParameter(a.RENDERBUFFER,a.RGBA8,a.SAMPLES)},a.prototype.bind=function(a,b,c){void 0===c&&(c=0);var d=this.gl;if(a){var e=a.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(a);this.current!==a&&(this.current=a,d.bindFramebuffer(d.FRAMEBUFFER,e.framebuffer)),e.mipLevel!==c&&(a.dirtyId++,a.dirtyFormat++,e.mipLevel=c),e.dirtyId!==a.dirtyId&&(e.dirtyId=a.dirtyId,e.dirtyFormat!==a.dirtyFormat?(e.dirtyFormat=a.dirtyFormat,e.dirtySize=a.dirtySize,this.updateFramebuffer(a,c)):e.dirtySize!==a.dirtySize&&(e.dirtySize=a.dirtySize,this.resizeFramebuffer(a)));for(var f=0;f<a.colorTextures.length;f++){var g=a.colorTextures[f];this.renderer.texture.unbind(g.parentTextureArray||g)}if(a.depthTexture&&this.renderer.texture.unbind(a.depthTexture),b){var h=b.width>>c,i=b.height>>c,j=h/b.width;this.setViewport(b.x*j,b.y*j,h,i)}else{var h=a.width>>c,i=a.height>>c;this.setViewport(0,0,h,i)}}else this.current&&(this.current=null,d.bindFramebuffer(d.FRAMEBUFFER,null)),b?this.setViewport(b.x,b.y,b.width,b.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},a.prototype.setViewport=function(a,b,c,d){var e=this.viewport;a=Math.round(a),b=Math.round(b),c=Math.round(c),d=Math.round(d),(e.width!==c||e.height!==d||e.x!==a||e.y!==b)&&(e.x=a,e.y=b,e.width=c,e.height=d,this.gl.viewport(a,b,c,d))},Object.defineProperty(a.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),a.prototype.clear=function(a,b,c,d,e){void 0===e&&(e=g.wn.COLOR|g.wn.DEPTH);var f=this.gl;f.clearColor(a,b,c,d),f.clear(e)},a.prototype.initFramebuffer=function(a){var b=new ag(this.gl.createFramebuffer());return b.multisample=this.detectSamples(a.multisample),a.glFramebuffers[this.CONTEXT_UID]=b,this.managedFramebuffers.push(a),a.disposeRunner.add(this),b},a.prototype.resizeFramebuffer=function(a){var b=this.gl,c=a.glFramebuffers[this.CONTEXT_UID];c.msaaBuffer&&(b.bindRenderbuffer(b.RENDERBUFFER,c.msaaBuffer),b.renderbufferStorageMultisample(b.RENDERBUFFER,c.multisample,b.RGBA8,a.width,a.height)),c.stencil&&(b.bindRenderbuffer(b.RENDERBUFFER,c.stencil),c.msaaBuffer?b.renderbufferStorageMultisample(b.RENDERBUFFER,c.multisample,b.DEPTH24_STENCIL8,a.width,a.height):b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,a.width,a.height));var d=a.colorTextures,e=d.length;b.drawBuffers||(e=Math.min(e,1));for(var f=0;f<e;f++){var g=d[f],h=g.parentTextureArray||g;this.renderer.texture.bind(h,0)}a.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(a.depthTexture,0)},a.prototype.updateFramebuffer=function(a,b){var c=this.gl,d=a.glFramebuffers[this.CONTEXT_UID],e=a.colorTextures,f=e.length;c.drawBuffers||(f=Math.min(f,1)),d.multisample>1&&this.canMultisampleFramebuffer(a)?(d.msaaBuffer=d.msaaBuffer||c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,d.msaaBuffer),c.renderbufferStorageMultisample(c.RENDERBUFFER,d.multisample,c.RGBA8,a.width,a.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,d.msaaBuffer)):d.msaaBuffer&&(c.deleteRenderbuffer(d.msaaBuffer),d.msaaBuffer=null,d.blitFramebuffer&&(d.blitFramebuffer.dispose(),d.blitFramebuffer=null));for(var g=[],h=0;h<f;h++){var i=e[h],j=i.parentTextureArray||i;this.renderer.texture.bind(j,0),0===h&&d.msaaBuffer||(c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+h,i.target,j._glTextures[this.CONTEXT_UID].texture,b),g.push(c.COLOR_ATTACHMENT0+h))}if(g.length>1&&c.drawBuffers(g),a.depthTexture&&this.writeDepthTexture){var k=a.depthTexture;this.renderer.texture.bind(k,0),c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,k._glTextures[this.CONTEXT_UID].texture,b)}(a.stencil||a.depth)&&!(a.depthTexture&&this.writeDepthTexture)?(d.stencil=d.stencil||c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,d.stencil),d.msaaBuffer?c.renderbufferStorageMultisample(c.RENDERBUFFER,d.multisample,c.DEPTH24_STENCIL8,a.width,a.height):c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a.width,a.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,d.stencil)):d.stencil&&(c.deleteRenderbuffer(d.stencil),d.stencil=null)},a.prototype.canMultisampleFramebuffer=function(a){return 1!==this.renderer.context.webGLVersion&&a.colorTextures.length<=1&&!a.depthTexture},a.prototype.detectSamples=function(a){var b=this.msaaSamples,c=g.he.NONE;if(a<=1||null===b)return c;for(var d=0;d<b.length;d++)if(b[d]<=a){c=b[d];break}return 1===c&&(c=g.he.NONE),c},a.prototype.blit=function(a,b,c){var d=this.current,e=this.renderer,f=this.gl,g=this.CONTEXT_UID;if(2===e.context.webGLVersion&&d){var h=d.glFramebuffers[g];if(h){if(!a){if(!h.msaaBuffer)return;var i=d.colorTextures[0];if(!i)return;h.blitFramebuffer||(h.blitFramebuffer=new G(d.width,d.height),h.blitFramebuffer.addColorTexture(0,i)),(a=h.blitFramebuffer).colorTextures[0]!==i&&(a.colorTextures[0]=i,a.dirtyId++,a.dirtyFormat++),(a.width!==d.width||a.height!==d.height)&&(a.width=d.width,a.height=d.height,a.dirtyId++,a.dirtySize++)}b||((b=ah).width=d.width,b.height=d.height),c||(c=b);var j=b.width===c.width&&b.height===c.height;this.bind(a),f.bindFramebuffer(f.READ_FRAMEBUFFER,h.framebuffer),f.blitFramebuffer(b.left,b.top,b.right,b.bottom,c.left,c.top,c.right,c.bottom,f.COLOR_BUFFER_BIT,j?f.NEAREST:f.LINEAR)}}},a.prototype.disposeFramebuffer=function(a,b){var c=a.glFramebuffers[this.CONTEXT_UID],d=this.gl;if(c){delete a.glFramebuffers[this.CONTEXT_UID];var e=this.managedFramebuffers.indexOf(a);e>=0&&this.managedFramebuffers.splice(e,1),a.disposeRunner.remove(this),!b&&(d.deleteFramebuffer(c.framebuffer),c.msaaBuffer&&d.deleteRenderbuffer(c.msaaBuffer),c.stencil&&d.deleteRenderbuffer(c.stencil)),c.blitFramebuffer&&c.blitFramebuffer.dispose()}},a.prototype.disposeAll=function(a){var b=this.managedFramebuffers;this.managedFramebuffers=[];for(var c=0;c<b.length;c++)this.disposeFramebuffer(b[c],a)},a.prototype.forceStencil=function(){var a=this.current;if(a){var b=a.glFramebuffers[this.CONTEXT_UID];if(b&&!b.stencil){a.stencil=!0;var c=a.width,d=a.height,e=this.gl,f=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,f),b.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,b.multisample,e.DEPTH24_STENCIL8,c,d):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,c,d),b.stencil=f,e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,f)}}},a.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new l.M_},a.prototype.destroy=function(){this.renderer=null},a}(),aj={5126:4,5123:2,5121:1},ak=function(){function a(a){this.renderer=a,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return a.prototype.contextChange=function(){this.disposeAll(!0);var a=this.gl=this.renderer.gl,b=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==b.webGLVersion){var c=this.renderer.context.extensions.vertexArrayObject;f.W0.PREFER_ENV===g.Km.WEBGL_LEGACY&&(c=null),c?(a.createVertexArray=function(){return c.createVertexArrayOES()},a.bindVertexArray=function(a){return c.bindVertexArrayOES(a)},a.deleteVertexArray=function(a){return c.deleteVertexArrayOES(a)}):(this.hasVao=!1,a.createVertexArray=function(){return null},a.bindVertexArray=function(){return null},a.deleteVertexArray=function(){return null})}if(2!==b.webGLVersion){var d=a.getExtension("ANGLE_instanced_arrays");d?(a.vertexAttribDivisor=function(a,b){return d.vertexAttribDivisorANGLE(a,b)},a.drawElementsInstanced=function(a,b,c,e,f){return d.drawElementsInstancedANGLE(a,b,c,e,f)},a.drawArraysInstanced=function(a,b,c,e){return d.drawArraysInstancedANGLE(a,b,c,e)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===b.webGLVersion||!!b.extensions.uint32ElementIndex},a.prototype.bind=function(a,b){b=b||this.renderer.shader.shader;var c=this.gl,d=a.glVertexArrayObjects[this.CONTEXT_UID],e=!1;d||(this.managedGeometries[a.id]=a,a.disposeRunner.add(this),a.glVertexArrayObjects[this.CONTEXT_UID]=d={},e=!0);var f=d[b.program.id]||this.initGeometryVao(a,b,e);this._activeGeometry=a,this._activeVao!==f&&(this._activeVao=f,this.hasVao?c.bindVertexArray(f):this.activateVao(a,b.program)),this.updateBuffers()},a.prototype.reset=function(){this.unbind()},a.prototype.updateBuffers=function(){for(var a=this._activeGeometry,b=this.renderer.buffer,c=0;c<a.buffers.length;c++){var d=a.buffers[c];b.update(d)}},a.prototype.checkCompatibility=function(a,b){var c=a.attributes,d=b.attributeData;for(var e in d)if(!c[e])throw Error('shader and geometry incompatible, geometry missing the "'+e+'" attribute')},a.prototype.getSignature=function(a,b){var c=a.attributes,d=b.attributeData,e=["g",a.id];for(var f in c)d[f]&&e.push(f,d[f].location);return e.join("-")},a.prototype.initGeometryVao=function(a,b,c){void 0===c&&(c=!0);var d=this.gl,e=this.CONTEXT_UID,f=this.renderer.buffer,g=b.program;g.glPrograms[e]||this.renderer.shader.generateProgram(b),this.checkCompatibility(a,g);var h=this.getSignature(a,g),i=a.glVertexArrayObjects[this.CONTEXT_UID],j=i[h];if(j)return i[g.id]=j,j;var k=a.buffers,l=a.attributes,m={},n={};for(var o in k)m[o]=0,n[o]=0;for(var o in l)!l[o].size&&g.attributeData[o]?l[o].size=g.attributeData[o].size:l[o].size||console.warn("PIXI Geometry attribute '"+o+"' size cannot be determined (likely the bound shader does not have the attribute)"),m[l[o].buffer]+=l[o].size*aj[l[o].type];for(var o in l){var p=l[o],q=p.size;void 0===p.stride&&(m[p.buffer]===q*aj[p.type]?p.stride=0:p.stride=m[p.buffer]),void 0===p.start&&(p.start=n[p.buffer],n[p.buffer]+=q*aj[p.type])}j=d.createVertexArray(),d.bindVertexArray(j);for(var r=0;r<k.length;r++){var s=k[r];f.bind(s),c&&s._glBuffers[e].refCount++}return this.activateVao(a,g),this._activeVao=j,i[g.id]=j,i[h]=j,j},a.prototype.disposeGeometry=function(a,b){if(this.managedGeometries[a.id]){delete this.managedGeometries[a.id];var c,d=a.glVertexArrayObjects[this.CONTEXT_UID],e=this.gl,f=a.buffers,g=null==(c=this.renderer)?void 0:c.buffer;if(a.disposeRunner.remove(this),d){if(g)for(var h=0;h<f.length;h++){var i=f[h]._glBuffers[this.CONTEXT_UID];i&&(i.refCount--,0!==i.refCount||b||g.dispose(f[h],b))}if(!b){for(var j in d)if("g"===j[0]){var k=d[j];this._activeVao===k&&this.unbind(),e.deleteVertexArray(k)}}delete a.glVertexArrayObjects[this.CONTEXT_UID]}}},a.prototype.disposeAll=function(a){for(var b=Object.keys(this.managedGeometries),c=0;c<b.length;c++)this.disposeGeometry(this.managedGeometries[b[c]],a)},a.prototype.activateVao=function(a,b){var c=this.gl,d=this.CONTEXT_UID,e=this.renderer.buffer,f=a.buffers,g=a.attributes;a.indexBuffer&&e.bind(a.indexBuffer);var h=null;for(var i in g){var j=g[i],k=f[j.buffer],l=k._glBuffers[d];if(b.attributeData[i]){h!==l&&(e.bind(k),h=l);var m=b.attributeData[i].location;if(c.enableVertexAttribArray(m),c.vertexAttribPointer(m,j.size,j.type||c.FLOAT,j.normalized,j.stride,j.start),j.instance)if(this.hasInstance)c.vertexAttribDivisor(m,1);else throw Error("geometry error, GPU Instancing is not supported on this device")}}},a.prototype.draw=function(a,b,c,d){var e=this.gl,f=this._activeGeometry;if(f.indexBuffer){var g=f.indexBuffer.data.BYTES_PER_ELEMENT,h=2===g?e.UNSIGNED_SHORT:e.UNSIGNED_INT;2===g||4===g&&this.canUseUInt32ElementIndex?f.instanced?e.drawElementsInstanced(a,b||f.indexBuffer.data.length,h,(c||0)*g,d||1):e.drawElements(a,b||f.indexBuffer.data.length,h,(c||0)*g):console.warn("unsupported index buffer type: uint32")}else f.instanced?e.drawArraysInstanced(a,c,b||f.getSize(),d||1):e.drawArrays(a,c,b||f.getSize());return this},a.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},a.prototype.destroy=function(){this.renderer=null},a}(),al=function(){function a(a){void 0===a&&(a=null),this.type=g.vg.NONE,this.autoDetect=!0,this.maskObject=a||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=f.W0.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(a.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(a){a?this._filters?this._filters[0]=a:this._filters=[a]:this._filters=null},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=g.vg.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},a.prototype.copyCountersOrReset=function(a){a?(this._stencilCounter=a._stencilCounter,this._scissorCounter=a._scissorCounter,this._scissorRect=a._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},a}();function am(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),d}function an(a,b){var c=a.getShaderSource(b).split("\n").map(function(a,b){return b+": "+a}),d=a.getShaderInfoLog(b),e=d.split("\n"),f={},g=e.map(function(a){return parseFloat(a.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(a){return!!a&&!f[a]&&(f[a]=!0,!0)}),h=[""];g.forEach(function(a){c[a-1]="%c"+c[a-1]+"%c",h.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var i=c.join("\n");h[0]=i,console.error(d),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,h),console.groupEnd()}function ao(a){for(var b=Array(a),c=0;c<b.length;c++)b[c]=!1;return b}function ap(a,b){switch(a){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"uvec2":return new Uint32Array(2*b);case"uvec3":return new Uint32Array(3*b);case"uvec4":return new Uint32Array(4*b);case"bool":return!1;case"bvec2":return ao(2*b);case"bvec3":return ao(3*b);case"bvec4":return ao(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var aq={},ar=aq;function as(){if(ar===aq||ar&&ar.isContextLost()){var a=f.W0.ADAPTER.createCanvas(),b=void 0;f.W0.PREFER_ENV>=g.Km.WEBGL2&&(b=a.getContext("webgl2",{})),b||((b=a.getContext("webgl",{})||a.getContext("experimental-webgl",{}))?b.getExtension("WEBGL_draw_buffers"):b=null),ar=b}return ar}function at(a,b,c){if("precision"!==a.substring(0,9)){var d=b;return b===g.Pk.HIGH&&c!==g.Pk.HIGH&&(d=g.Pk.MEDIUM),"precision "+d+" float;\n"+a}return c!==g.Pk.HIGH&&"precision highp"===a.substring(0,15)?a.replace("precision highp","precision mediump"):a}var au={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},av=null,aw={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ax(a,b){if(!av){var c=Object.keys(aw);av={};for(var d=0;d<c.length;++d){var e=c[d];av[a[e]]=aw[e]}}return av[b]}var ay=[{test:function(a){return"float"===a.type&&1===a.size&&!a.isArray},code:function(a){return'\n            if(uv["'+a+'"] !== ud["'+a+'"].value)\n            {\n                ud["'+a+'"].value = uv["'+a+'"]\n                gl.uniform1f(ud["'+a+'"].location, uv["'+a+'"])\n            }\n            '}},{test:function(a,b){return("sampler2D"===a.type||"samplerCube"===a.type||"sampler2DArray"===a.type)&&1===a.size&&!a.isArray&&(null==b||void 0!==b.castToBaseTexture)},code:function(a){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+a+'"], t);\n\n            if(ud["'+a+'"].value !== t)\n            {\n                ud["'+a+'"].value = t;\n                gl.uniform1i(ud["'+a+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(a,b){return"mat3"===a.type&&1===a.size&&!a.isArray&&void 0!==b.a},code:function(a){return'\n            gl.uniformMatrix3fv(ud["'+a+'"].location, false, uv["'+a+'"].toArray(true));\n            '},codeUbo:function(a){return"\n                var "+a+"_matrix = uv."+a+".toArray(true);\n\n                data[offset] = "+a+"_matrix[0];\n                data[offset+1] = "+a+"_matrix[1];\n                data[offset+2] = "+a+"_matrix[2];\n        \n                data[offset + 4] = "+a+"_matrix[3];\n                data[offset + 5] = "+a+"_matrix[4];\n                data[offset + 6] = "+a+"_matrix[5];\n        \n                data[offset + 8] = "+a+"_matrix[6];\n                data[offset + 9] = "+a+"_matrix[7];\n                data[offset + 10] = "+a+"_matrix[8];\n            "}},{test:function(a,b){return"vec2"===a.type&&1===a.size&&!a.isArray&&void 0!==b.x},code:function(a){return'\n                cv = ud["'+a+'"].value;\n                v = uv["'+a+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+a+'"].location, v.x, v.y);\n                }'},codeUbo:function(a){return"\n                v = uv."+a+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(a){return"vec2"===a.type&&1===a.size&&!a.isArray},code:function(a){return'\n                cv = ud["'+a+'"].value;\n                v = uv["'+a+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+a+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(a,b){return"vec4"===a.type&&1===a.size&&!a.isArray&&void 0!==b.width},code:function(a){return'\n                cv = ud["'+a+'"].value;\n                v = uv["'+a+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+a+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(a){return"\n                    v = uv."+a+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(a){return"vec4"===a.type&&1===a.size&&!a.isArray},code:function(a){return'\n                cv = ud["'+a+'"].value;\n                v = uv["'+a+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+a+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],az={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},aA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function aB(a,b){if(0===a)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var c=b.createShader(b.FRAGMENT_SHADER);;){var d="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}".replace(/%forloop%/gi,function(a){for(var b="",c=0;c<a;++c)c>0&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}(a));if(b.shaderSource(c,d),b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS))break;a=a/2|0}return a}var aC=0,aD={},aE=function(){function a(b,c,e){void 0===e&&(e="pixi-shader"),this.id=aC++,this.vertexSrc=b||a.defaultVertexSrc,this.fragmentSrc=c||a.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(aD[e=e.replace(/\s+/g,"-")]?(aD[e]++,e+="-"+aD[e]):aD[e]=1,this.vertexSrc="#define SHADER_NAME "+e+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+e+"\n"+this.fragmentSrc,this.vertexSrc=at(this.vertexSrc,f.W0.PRECISION_VERTEX,g.Pk.HIGH),this.fragmentSrc=at(this.fragmentSrc,f.W0.PRECISION_FRAGMENT,function(){if(!d){d=g.Pk.MEDIUM;var a=as();a&&a.getShaderPrecisionFormat&&(d=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?g.Pk.HIGH:g.Pk.MEDIUM)}return d}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(a,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),a.from=function(b,c,d){var e=b+c,f=h.ProgramCache[e];return f||(h.ProgramCache[e]=f=new a(b,c,d)),f},a}(),aF=function(){function a(a,b){this.uniformBindCount=0,this.program=a,b?b instanceof Z?this.uniformGroup=b:this.uniformGroup=new Z(b):this.uniformGroup=new Z({}),this.disposeRunner=new j.b("disposeShader")}return a.prototype.checkUniformExists=function(a,b){if(b.uniforms[a])return!0;for(var c in b.uniforms){var d=b.uniforms[c];if(d.group&&this.checkUniformExists(a,d))return!0}return!1},a.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(a.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),a.from=function(b,c,d){return new a(aE.from(b,c),d)},a}(),aG=function(){function a(){this.data=0,this.blendMode=g.B9.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(a.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(a){!!(1&this.data)!==a&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(a){!!(2&this.data)!==a&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(a){!!(4&this.data)!==a&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(a){!!(8&this.data)!==a&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(a){!!(32&this.data)!==a&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(a){!!(16&this.data)!==a&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this.blend=a!==g.B9.NONE,this._blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(a){this.offsets=!!a,this._polygonOffset=a},enumerable:!1,configurable:!0}),a.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},a.for2d=function(){var b=new a;return b.depthTest=!1,b.blend=!0,b},a}(),aH=function(a){function b(c,d,e){var g=this,h=aE.from(c||b.defaultVertexSrc,d||b.defaultFragmentSrc);return(g=a.call(this,h,e)||this).padding=0,g.resolution=f.W0.FILTER_RESOLUTION,g.multisample=f.W0.FILTER_MULTISAMPLE,g.enabled=!0,g.autoFit=!0,g.state=new aG,g}return p(b,a),b.prototype.apply=function(a,b,c,d,e){a.applyFilter(this,b,c,d)},Object.defineProperty(b.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(a){this.state.blendMode=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"resolution",{get:function(){return this._resolution},set:function(a){this._resolution=a},enumerable:!1,configurable:!0}),Object.defineProperty(b,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(b,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),b}(aF),aI=new l.uq,aJ=function(){function a(a,b){this._texture=a,this.mapCoord=new l.uq,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===b?.5:b,this.isSimple=!1}return Object.defineProperty(a.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture=a,this._textureID=-1},enumerable:!1,configurable:!0}),a.prototype.multiplyUvs=function(a,b){void 0===b&&(b=a);for(var c=this.mapCoord,d=0;d<a.length;d+=2){var e=a[d],f=a[d+1];b[d]=e*c.a+f*c.c+c.tx,b[d+1]=e*c.b+f*c.d+c.ty}return b},a.prototype.update=function(a){var b=this._texture;if(!b||!b.valid||!a&&this._textureID===b._updateID)return!1;this._textureID=b._updateID,this._updateID++;var c=b._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);var d=b.orig,e=b.trim;e&&(aI.set(d.width/e.width,0,0,d.height/e.height,-e.x/e.width,-e.y/e.height),this.mapCoord.append(aI));var f=b.baseTexture,g=this.uClampFrame,h=this.clampMargin/f.resolution,i=this.clampOffset;return g[0]=(b._frame.x+h+i)/f.width,g[1]=(b._frame.y+h+i)/f.height,g[2]=(b._frame.x+b._frame.width-h+i)/f.width,g[3]=(b._frame.y+b._frame.height-h+i)/f.height,this.uClampOffset[0]=i/f.realWidth,this.uClampOffset[1]=i/f.realHeight,this.isSimple=b._frame.width===f.width&&b._frame.height===f.height&&0===b.rotate,!0},a}(),aK=function(a){function b(b,c,d){var e=this,f=null;return"string"!=typeof b&&void 0===c&&void 0===d&&(f=b,b=void 0,c=void 0,d=void 0),(e=a.call(this,b||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",c||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",d)||this).maskSprite=f,e.maskMatrix=new l.uq,e}return p(b,a),Object.defineProperty(b.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(a){this._maskSprite=a,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),b.prototype.apply=function(a,b,c,d){var e=this._maskSprite,f=e._texture;f.valid&&(f.uvMatrix||(f.uvMatrix=new aJ(f,0)),f.uvMatrix.update(),this.uniforms.npmAlpha=+!f.baseTexture.alphaMode,this.uniforms.mask=f,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,e).prepend(f.uvMatrix.mapCoord),this.uniforms.alpha=e.worldAlpha,this.uniforms.maskClamp=f.uvMatrix.uClampFrame,a.applyFilter(this,b,c,d))},b}(aH),aL=function(){function a(a){this.renderer=a,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return a.prototype.setMaskStack=function(a){this.maskStack=a,this.renderer.scissor.setMaskStack(a),this.renderer.stencil.setMaskStack(a)},a.prototype.push=function(a,b){var c=b;if(!c.isMaskData){var d=this.maskDataPool.pop()||new al;d.pooled=!0,d.maskObject=b,c=d}var e=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(c.copyCountersOrReset(e),c._colorMask=e?e._colorMask:15,c.autoDetect&&this.detect(c),c._target=a,c.type!==g.vg.SPRITE&&this.maskStack.push(c),c.enabled)switch(c.type){case g.vg.SCISSOR:this.renderer.scissor.push(c);break;case g.vg.STENCIL:this.renderer.stencil.push(c);break;case g.vg.SPRITE:c.copyCountersOrReset(null),this.pushSpriteMask(c);break;case g.vg.COLOR:this.pushColorMask(c)}c.type===g.vg.SPRITE&&this.maskStack.push(c)},a.prototype.pop=function(a){var b=this.maskStack.pop();if(b&&b._target===a){if(b.enabled)switch(b.type){case g.vg.SCISSOR:this.renderer.scissor.pop(b);break;case g.vg.STENCIL:this.renderer.stencil.pop(b.maskObject);break;case g.vg.SPRITE:this.popSpriteMask(b);break;case g.vg.COLOR:this.popColorMask(b)}if(b.reset(),b.pooled&&this.maskDataPool.push(b),0!==this.maskStack.length){var c=this.maskStack[this.maskStack.length-1];c.type===g.vg.SPRITE&&c._filters&&(c._filters[0].maskSprite=c.maskObject)}}},a.prototype.detect=function(a){var b=a.maskObject;b?b.isSprite?a.type=g.vg.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(a)?a.type=g.vg.SCISSOR:a.type=g.vg.STENCIL:a.type=g.vg.COLOR},a.prototype.pushSpriteMask=function(a){var b,c,d,e,f=a.maskObject,g=a._target,h=a._filters;!h&&((h=this.alphaMaskPool[this.alphaMaskIndex])||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new aK]));var i=this.renderer,j=i.renderTexture;if(j.current){var k=j.current;d=a.resolution||k.resolution,e=null!=(b=a.multisample)?b:k.multisample}else d=a.resolution||i.resolution,e=null!=(c=a.multisample)?c:i.multisample;h[0].resolution=d,h[0].multisample=e,h[0].maskSprite=f;var l=g.filterArea;g.filterArea=f.getBounds(!0),i.filter.push(g,h),g.filterArea=l,!a._filters&&this.alphaMaskIndex++},a.prototype.popSpriteMask=function(a){this.renderer.filter.pop(),a._filters?a._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},a.prototype.pushColorMask=function(a){var b=a._colorMask,c=a._colorMask=b&a.colorMask;c!==b&&this.renderer.gl.colorMask((1&c)!=0,(2&c)!=0,(4&c)!=0,(8&c)!=0)},a.prototype.popColorMask=function(a){var b=a._colorMask,c=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;c!==b&&this.renderer.gl.colorMask((1&c)!=0,(2&c)!=0,(4&c)!=0,(8&c)!=0)},a.prototype.destroy=function(){this.renderer=null},a}(),aM=function(){function a(a){this.renderer=a,this.maskStack=[],this.glConst=0}return a.prototype.getStackLength=function(){return this.maskStack.length},a.prototype.setMaskStack=function(a){var b=this.renderer.gl,c=this.getStackLength();this.maskStack=a;var d=this.getStackLength();d!==c&&(0===d?b.disable(this.glConst):(b.enable(this.glConst),this._useCurrent()))},a.prototype._useCurrent=function(){},a.prototype.destroy=function(){this.renderer=null,this.maskStack=null},a}(),aN=new l.uq,aO=[],aP=function(a){function b(b){var c=a.call(this,b)||this;return c.glConst=f.W0.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,c}return p(b,a),b.prototype.getStackLength=function(){var a=this.maskStack[this.maskStack.length-1];return a?a._scissorCounter:0},b.prototype.calcScissorRect=function(a){if(!a._scissorRectLocal){var b,c=a._scissorRect,d=a.maskObject,e=this.renderer,f=e.renderTexture,g=d.getBounds(!0,null!=(b=aO.pop())?b:new l.M_);this.roundFrameToPixels(g,f.current?f.current.resolution:e.resolution,f.sourceFrame,f.destinationFrame,e.projection.transform),c&&g.fit(c),a._scissorRectLocal=g}},b.isMatrixRotated=function(a){if(!a)return!1;var b=a.a,c=a.b,d=a.c,e=a.d;return(Math.abs(c)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(b)>1e-4||Math.abs(e)>1e-4)},b.prototype.testScissor=function(a){var c=a.maskObject;if(!c.isFastRect||!c.isFastRect()||b.isMatrixRotated(c.worldTransform)||b.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(a);var d=a._scissorRectLocal;return d.width>0&&d.height>0},b.prototype.roundFrameToPixels=function(a,c,d,e,f){b.isMatrixRotated(f)||((f=f?aN.copyFrom(f):aN.identity()).translate(-d.x,-d.y).scale(e.width/d.width,e.height/d.height).translate(e.x,e.y),this.renderer.filter.transformAABB(f,a),a.fit(e),a.x=Math.round(a.x*c),a.y=Math.round(a.y*c),a.width=Math.round(a.width*c),a.height=Math.round(a.height*c))},b.prototype.push=function(a){a._scissorRectLocal||this.calcScissorRect(a);var b=this.renderer.gl;a._scissorRect||b.enable(b.SCISSOR_TEST),a._scissorCounter++,a._scissorRect=a._scissorRectLocal,this._useCurrent()},b.prototype.pop=function(a){var b=this.renderer.gl;a&&aO.push(a._scissorRectLocal),this.getStackLength()>0?this._useCurrent():b.disable(b.SCISSOR_TEST)},b.prototype._useCurrent=function(){var a,b=this.maskStack[this.maskStack.length-1]._scissorRect;a=this.renderer.renderTexture.current?b.y:this.renderer.height-b.height-b.y,this.renderer.gl.scissor(b.x,a,b.width,b.height)},b}(aM),aQ=function(a){function b(b){var c=a.call(this,b)||this;return c.glConst=f.W0.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,c}return p(b,a),b.prototype.getStackLength=function(){var a=this.maskStack[this.maskStack.length-1];return a?a._stencilCounter:0},b.prototype.push=function(a){var b=a.maskObject,c=this.renderer.gl,d=a._stencilCounter;0===d&&(this.renderer.framebuffer.forceStencil(),c.clearStencil(0),c.clear(c.STENCIL_BUFFER_BIT),c.enable(c.STENCIL_TEST)),a._stencilCounter++;var e=a._colorMask;0!==e&&(a._colorMask=0,c.colorMask(!1,!1,!1,!1)),c.stencilFunc(c.EQUAL,d,0xffffffff),c.stencilOp(c.KEEP,c.KEEP,c.INCR),b.renderable=!0,b.render(this.renderer),this.renderer.batch.flush(),b.renderable=!1,0!==e&&(a._colorMask=e,c.colorMask((1&e)!=0,(2&e)!=0,(4&e)!=0,(8&e)!=0)),this._useCurrent()},b.prototype.pop=function(a){var b=this.renderer.gl;if(0===this.getStackLength())b.disable(b.STENCIL_TEST);else{var c=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,d=c?c._colorMask:15;0!==d&&(c._colorMask=0,b.colorMask(!1,!1,!1,!1)),b.stencilOp(b.KEEP,b.KEEP,b.DECR),a.renderable=!0,a.render(this.renderer),this.renderer.batch.flush(),a.renderable=!1,0!==d&&(c._colorMask=d,b.colorMask((1&d)!=0,(2&d)!=0,(4&d)!=0,(8&d)!=0)),this._useCurrent()}},b.prototype._useCurrent=function(){var a=this.renderer.gl;a.stencilFunc(a.EQUAL,this.getStackLength(),0xffffffff),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)},b}(aM),aR=function(){function a(a){this.renderer=a,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new l.uq,this.transform=null}return a.prototype.update=function(a,b,c,d){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a,this.calculateProjection(this.destinationFrame,this.sourceFrame,c,d),this.transform&&this.projectionMatrix.append(this.transform);var e=this.renderer;e.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,e.globalUniforms.update(),e.shader.shader&&e.shader.syncUniformGroup(e.shader.shader.uniforms.globals)},a.prototype.calculateProjection=function(a,b,c,d){var e=this.projectionMatrix,f=d?-1:1;e.identity(),e.a=1/b.width*2,e.d=f*(1/b.height*2),e.tx=-1-b.x*e.a,e.ty=-f-b.y*e.d},a.prototype.setTransform=function(a){},a.prototype.destroy=function(){this.renderer=null},a}(),aS=new l.M_,aT=new l.M_,aU=function(){function a(a){this.renderer=a,this.clearColor=a._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new l.M_,this.destinationFrame=new l.M_,this.viewportFrame=new l.M_}return a.prototype.bind=function(a,b,c){void 0===a&&(a=null);var d,e,f,g=this.renderer;this.current=a,a?(f=(d=a.baseTexture).resolution,b||(aS.width=a.frame.width,aS.height=a.frame.height,b=aS),c||(aT.x=a.frame.x,aT.y=a.frame.y,aT.width=b.width,aT.height=b.height,c=aT),e=d.framebuffer):(f=g.resolution,b||(aS.width=g.screen.width,aS.height=g.screen.height,b=aS),c||((c=aS).width=b.width,c.height=b.height));var h=this.viewportFrame;h.x=c.x*f,h.y=c.y*f,h.width=c.width*f,h.height=c.height*f,a||(h.y=g.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(e,h),this.renderer.projection.update(c,b,f,!e),a?this.renderer.mask.setMaskStack(d.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(b),this.destinationFrame.copyFrom(c)},a.prototype.clear=function(a,b){a=this.current?a||this.current.baseTexture.clearColor:a||this.clearColor;var c=this.destinationFrame,d=this.current?this.current.baseTexture:this.renderer.screen,e=c.width!==d.width||c.height!==d.height;if(e){var f=this.viewportFrame,g=f.x,h=f.y,i=f.width,j=f.height;g=Math.round(g),h=Math.round(h),i=Math.round(i),j=Math.round(j),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(g,h,i,j)}this.renderer.framebuffer.clear(a[0],a[1],a[2],a[3],b),e&&this.renderer.scissor.pop()},a.prototype.resize=function(){this.bind(null)},a.prototype.reset=function(){this.bind(null)},a.prototype.destroy=function(){this.renderer=null},a}();function aV(a,b,c,d,e){c.buffer.update(e)}var aW={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},aX={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function aY(a){for(var b=a.map(function(a){return{data:a,offset:0,dataLen:0,dirty:0}}),c=0,d=0,e=0,f=0;f<b.length;f++){var g=b[f];if(c=aX[g.data.type],g.data.size>1&&(c=Math.max(c,16)*g.data.size),g.dataLen=c,d%c!=0&&d<16){var h=d%c%16;d+=h,e+=h}d+c>16?(g.offset=e=16*Math.ceil(e/16),e+=c,d=c):(g.offset=e,d+=c,e+=c)}return{uboElements:b,size:e=16*Math.ceil(e/16)}}function aZ(a,b){var c=[];for(var d in a)b[d]&&c.push(b[d]);return c.sort(function(a,b){return a.index-b.index}),c}function a$(a,b){if(!a.autoManage)return{size:0,syncFunc:aV};for(var c=aY(aZ(a.uniforms,b)),d=c.uboElements,e=c.size,f=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],g=0;g<d.length;g++){for(var h=d[g],i=a.uniforms[h.data.name],j=h.data.name,k=!1,l=0;l<ay.length;l++){var m=ay[l];if(m.codeUbo&&m.test(h.data,i)){f.push("offset = "+h.offset/4+";",ay[l].codeUbo(h.data.name,i)),k=!0;break}}if(!k)if(h.data.size>1){var n=au[h.data.type],o=Math.max(aX[h.data.type]/16,1),p=n/o,q=(4-p%4)%4;f.push("\n                cv = ud."+j+".value;\n                v = uv."+j+";\n                offset = "+h.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+h.data.size*o+"; i++)\n                {\n                    for(var j = 0; j < "+p+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+q+";\n                }\n\n                ")}else{var r=aW[h.data.type];f.push("\n                cv = ud."+j+".value;\n                v = uv."+j+";\n                offset = "+h.offset/4+";\n                "+r+";\n                ")}}return f.push("\n       renderer.buffer.update(buffer);\n    "),{size:e,syncFunc:Function("ud","uv","renderer","syncData","buffer",f.join("\n"))}}var a_=function(){},a0=function(){function a(a,b){this.program=a,this.uniformData=b,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return a.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},a}();function a1(a,b){var c=am(a,a.VERTEX_SHADER,b.vertexSrc),d=am(a,a.FRAGMENT_SHADER,b.fragmentSrc),e=a.createProgram();if(a.attachShader(e,c),a.attachShader(e,d),a.linkProgram(e),!a.getProgramParameter(e,a.LINK_STATUS)&&(a.getProgramParameter(e,a.LINK_STATUS)||(a.getShaderParameter(c,a.COMPILE_STATUS)||an(a,c),a.getShaderParameter(d,a.COMPILE_STATUS)||an(a,d),console.error("PixiJS Error: Could not initialize shader."),""!==a.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(e)))),b.attributeData=function(a,b){for(var c={},d=b.getProgramParameter(a,b.ACTIVE_ATTRIBUTES),e=0;e<d;e++){var f=b.getActiveAttrib(a,e);if(0!==f.name.indexOf("gl_")){var g=ax(b,f.type),h={type:g,name:f.name,size:au[g],location:b.getAttribLocation(a,f.name)};c[f.name]=h}}return c}(e,a),b.uniformData=function(a,b){for(var c={},d=b.getProgramParameter(a,b.ACTIVE_UNIFORMS),e=0;e<d;e++){var f=b.getActiveUniform(a,e),g=f.name.replace(/\[.*?\]$/,""),h=!!f.name.match(/\[.*?\]$/),i=ax(b,f.type);c[g]={name:g,index:e,type:i,size:f.size,isArray:h,value:ap(i,f.size)}}return c}(e,a),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(b.vertexSrc)){var f=Object.keys(b.attributeData);f.sort(function(a,b){return a>b?1:-1});for(var g=0;g<f.length;g++)b.attributeData[f[g]].location=g,a.bindAttribLocation(e,g,f[g]);a.linkProgram(e)}a.deleteShader(c),a.deleteShader(d);var h={};for(var g in b.uniformData){var i=b.uniformData[g];h[g]={location:a.getUniformLocation(e,g),value:ap(i.type,i.size)}}return new a0(e,h)}var a2=0,a3={textureCount:0,uboCount:0},a4=function(){function a(a){this.destroyed=!1,this.renderer=a,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=a2++}return a.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof e)return e;try{var a=Function("param1","param2","param3","return param1[param2] === param3;");e=!0===a({a:"b"},"a","b")}catch(a){e=!1}return e}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},a.prototype.contextChange=function(a){this.gl=a,this.reset()},a.prototype.bind=function(a,b){a.disposeRunner.add(this),a.uniforms.globals=this.renderer.globalUniforms;var c=a.program,d=c.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(a);return this.shader=a,this.program!==c&&(this.program=c,this.gl.useProgram(d.program)),b||(a3.textureCount=0,a3.uboCount=0,this.syncUniformGroup(a.uniformGroup,a3)),d},a.prototype.setUniforms=function(a){var b=this.shader.program,c=b.glPrograms[this.renderer.CONTEXT_UID];b.syncUniforms(c.uniformData,a,this.renderer)},a.prototype.syncUniformGroup=function(a,b){var c=this.getGlProgram();a.static&&a.dirtyId===c.uniformDirtyGroups[a.id]||(c.uniformDirtyGroups[a.id]=a.dirtyId,this.syncUniforms(a,c,b))},a.prototype.syncUniforms=function(a,b,c){(a.syncUniforms[this.shader.program.id]||this.createSyncGroups(a))(b.uniformData,a.uniforms,this.renderer,c)},a.prototype.createSyncGroups=function(a){var b=this.getSignature(a,this.shader.program.uniformData,"u");return this.cache[b]||(this.cache[b]=function(a,b){var c,d=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var e in a.uniforms){var f=b[e];if(!f){(null==(c=a.uniforms[e])?void 0:c.group)&&(a.uniforms[e].ubo?d.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+e+", '"+e+"');\n                    "):d.push("\n                        renderer.shader.syncUniformGroup(uv."+e+", syncData);\n                    "));continue}for(var g=a.uniforms[e],h=!1,i=0;i<ay.length;i++)if(ay[i].test(f,g)){d.push(ay[i].code(e,g)),h=!0;break}if(!h){var j=(1!==f.size||f.isArray?aA:az)[f.type].replace("location",'ud["'+e+'"].location');d.push('\n            cu = ud["'+e+'"];\n            cv = cu.value;\n            v = uv["'+e+'"];\n            '+j+";")}}return Function("ud","uv","renderer","syncData",d.join("\n"))}(a,this.shader.program.uniformData)),a.syncUniforms[this.shader.program.id]=this.cache[b],a.syncUniforms[this.shader.program.id]},a.prototype.syncUniformBufferGroup=function(a,b){var c=this.getGlProgram();if(!a.static||0!==a.dirtyId||!c.uniformGroups[a.id]){a.dirtyId=0;var d=c.uniformGroups[a.id]||this.createSyncBufferGroup(a,c,b);a.buffer.update(),d(c.uniformData,a.uniforms,this.renderer,a3,a.buffer)}this.renderer.buffer.bindBufferBase(a.buffer,c.uniformBufferBindings[b])},a.prototype.createSyncBufferGroup=function(a,b,c){var d=this.renderer.gl;this.renderer.buffer.bind(a.buffer);var e=this.gl.getUniformBlockIndex(b.program,c);b.uniformBufferBindings[c]=this.shader.uniformBindCount,d.uniformBlockBinding(b.program,e,this.shader.uniformBindCount),this.shader.uniformBindCount++;var f=this.getSignature(a,this.shader.program.uniformData,"ubo"),g=this._uboCache[f];if(g||(g=this._uboCache[f]=a$(a,this.shader.program.uniformData)),a.autoManage){var h=new Float32Array(g.size/4);a.buffer.update(h)}return b.uniformGroups[a.id]=g.syncFunc,b.uniformGroups[a.id]},a.prototype.getSignature=function(a,b,c){var d=a.uniforms,e=[c+"-"];for(var f in d)e.push(f),b[f]&&e.push(b[f].type);return e.join("-")},a.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},a.prototype.generateProgram=function(a){var b=this.gl,c=a.program,d=a1(b,c);return c.glPrograms[this.renderer.CONTEXT_UID]=d,d},a.prototype.reset=function(){this.program=null,this.shader=null},a.prototype.disposeShader=function(a){this.shader===a&&(this.shader=null)},a.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},a}(),a5=function(){function a(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=g.B9.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new aG,this.defaultState.blend=!0}return a.prototype.contextChange=function(a){var b;this.gl=a,this.blendModes=(void 0===b&&(b=[]),b[g.B9.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.ADD]=[a.ONE,a.ONE],b[g.B9.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.NONE]=[0,0],b[g.B9.NORMAL_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.ADD_NPM]=[a.SRC_ALPHA,a.ONE,a.ONE,a.ONE],b[g.B9.SCREEN_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],b[g.B9.SRC_IN]=[a.DST_ALPHA,a.ZERO],b[g.B9.SRC_OUT]=[a.ONE_MINUS_DST_ALPHA,a.ZERO],b[g.B9.SRC_ATOP]=[a.DST_ALPHA,a.ONE_MINUS_SRC_ALPHA],b[g.B9.DST_OVER]=[a.ONE_MINUS_DST_ALPHA,a.ONE],b[g.B9.DST_IN]=[a.ZERO,a.SRC_ALPHA],b[g.B9.DST_OUT]=[a.ZERO,a.ONE_MINUS_SRC_ALPHA],b[g.B9.DST_ATOP]=[a.ONE_MINUS_DST_ALPHA,a.SRC_ALPHA],b[g.B9.XOR]=[a.ONE_MINUS_DST_ALPHA,a.ONE_MINUS_SRC_ALPHA],b[g.B9.SUBTRACT]=[a.ONE,a.ONE,a.ONE,a.ONE,a.FUNC_REVERSE_SUBTRACT,a.FUNC_ADD],b),this.set(this.defaultState),this.reset()},a.prototype.set=function(a){if(a=a||this.defaultState,this.stateId!==a.data){for(var b=this.stateId^a.data,c=0;b;)1&b&&this.map[c].call(this,!!(a.data&1<<c)),b>>=1,c++;this.stateId=a.data}for(var c=0;c<this.checks.length;c++)this.checks[c](this,a)},a.prototype.forceState=function(a){a=a||this.defaultState;for(var b=0;b<this.map.length;b++)this.map[b].call(this,!!(a.data&1<<b));for(var b=0;b<this.checks.length;b++)this.checks[b](this,a);this.stateId=a.data},a.prototype.setBlend=function(b){this.updateCheck(a.checkBlendMode,b),this.gl[b?"enable":"disable"](this.gl.BLEND)},a.prototype.setOffset=function(b){this.updateCheck(a.checkPolygonOffset,b),this.gl[b?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},a.prototype.setDepthTest=function(a){this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST)},a.prototype.setDepthMask=function(a){this.gl.depthMask(a)},a.prototype.setCullFace=function(a){this.gl[a?"enable":"disable"](this.gl.CULL_FACE)},a.prototype.setFrontFace=function(a){this.gl.frontFace(this.gl[a?"CW":"CCW"])},a.prototype.setBlendMode=function(a){if(a!==this.blendMode){this.blendMode=a;var b=this.blendModes[a],c=this.gl;2===b.length?c.blendFunc(b[0],b[1]):c.blendFuncSeparate(b[0],b[1],b[2],b[3]),6===b.length?(this._blendEq=!0,c.blendEquationSeparate(b[4],b[5])):this._blendEq&&(this._blendEq=!1,c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD))}},a.prototype.setPolygonOffset=function(a,b){this.gl.polygonOffset(a,b)},a.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},a.prototype.updateCheck=function(a,b){var c=this.checks.indexOf(a);b&&-1===c?this.checks.push(a):b||-1===c||this.checks.splice(c,1)},a.checkBlendMode=function(a,b){a.setBlendMode(b.blendMode)},a.checkPolygonOffset=function(a,b){a.setPolygonOffset(1,b.polygonOffset)},a.prototype.destroy=function(){this.gl=null},a}(),a6=function(){function a(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=f.W0.GC_MAX_IDLE,this.checkCountMax=f.W0.GC_MAX_CHECK_COUNT,this.mode=f.W0.GC_MODE}return a.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==g.OS.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},a.prototype.run=function(){for(var a=this.renderer.texture,b=a.managedTextures,c=!1,d=0;d<b.length;d++){var e=b[d];!e.framebuffer&&this.count-e.touched>this.maxIdle&&(a.destroyTexture(e,!0),b[d]=null,c=!0)}if(c){for(var f=0,d=0;d<b.length;d++)null!==b[d]&&(b[f++]=b[d]);b.length=f}},a.prototype.unload=function(a){var b=this.renderer.texture,c=a._texture;c&&!c.framebuffer&&b.destroyTexture(c);for(var d=a.children.length-1;d>=0;d--)this.unload(a.children[d])},a.prototype.destroy=function(){this.renderer=null},a}(),a7=function(a){this.texture=a,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=g.QE.UNSIGNED_BYTE,this.internalFormat=g.hR.RGBA,this.samplerType=0},a8=function(){function a(a){this.renderer=a,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new u,this.hasIntegerTextures=!1}return a.prototype.contextChange=function(){var a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=("WebGL2RenderingContext"in globalThis&&y instanceof globalThis.WebGL2RenderingContext?((a={})[g.QE.UNSIGNED_BYTE]=((b={})[g.hR.RGBA]=y.RGBA8,b[g.hR.RGB]=y.RGB8,b[g.hR.RG]=y.RG8,b[g.hR.RED]=y.R8,b[g.hR.RGBA_INTEGER]=y.RGBA8UI,b[g.hR.RGB_INTEGER]=y.RGB8UI,b[g.hR.RG_INTEGER]=y.RG8UI,b[g.hR.RED_INTEGER]=y.R8UI,b[g.hR.ALPHA]=y.ALPHA,b[g.hR.LUMINANCE]=y.LUMINANCE,b[g.hR.LUMINANCE_ALPHA]=y.LUMINANCE_ALPHA,b),a[g.QE.BYTE]=((c={})[g.hR.RGBA]=y.RGBA8_SNORM,c[g.hR.RGB]=y.RGB8_SNORM,c[g.hR.RG]=y.RG8_SNORM,c[g.hR.RED]=y.R8_SNORM,c[g.hR.RGBA_INTEGER]=y.RGBA8I,c[g.hR.RGB_INTEGER]=y.RGB8I,c[g.hR.RG_INTEGER]=y.RG8I,c[g.hR.RED_INTEGER]=y.R8I,c),a[g.QE.UNSIGNED_SHORT]=((d={})[g.hR.RGBA_INTEGER]=y.RGBA16UI,d[g.hR.RGB_INTEGER]=y.RGB16UI,d[g.hR.RG_INTEGER]=y.RG16UI,d[g.hR.RED_INTEGER]=y.R16UI,d[g.hR.DEPTH_COMPONENT]=y.DEPTH_COMPONENT16,d),a[g.QE.SHORT]=((e={})[g.hR.RGBA_INTEGER]=y.RGBA16I,e[g.hR.RGB_INTEGER]=y.RGB16I,e[g.hR.RG_INTEGER]=y.RG16I,e[g.hR.RED_INTEGER]=y.R16I,e),a[g.QE.UNSIGNED_INT]=((f={})[g.hR.RGBA_INTEGER]=y.RGBA32UI,f[g.hR.RGB_INTEGER]=y.RGB32UI,f[g.hR.RG_INTEGER]=y.RG32UI,f[g.hR.RED_INTEGER]=y.R32UI,f[g.hR.DEPTH_COMPONENT]=y.DEPTH_COMPONENT24,f),a[g.QE.INT]=((h={})[g.hR.RGBA_INTEGER]=y.RGBA32I,h[g.hR.RGB_INTEGER]=y.RGB32I,h[g.hR.RG_INTEGER]=y.RG32I,h[g.hR.RED_INTEGER]=y.R32I,h),a[g.QE.FLOAT]=((i={})[g.hR.RGBA]=y.RGBA32F,i[g.hR.RGB]=y.RGB32F,i[g.hR.RG]=y.RG32F,i[g.hR.RED]=y.R32F,i[g.hR.DEPTH_COMPONENT]=y.DEPTH_COMPONENT32F,i),a[g.QE.HALF_FLOAT]=((j={})[g.hR.RGBA]=y.RGBA16F,j[g.hR.RGB]=y.RGB16F,j[g.hR.RG]=y.RG16F,j[g.hR.RED]=y.R16F,j),a[g.QE.UNSIGNED_SHORT_5_6_5]=((k={})[g.hR.RGB]=y.RGB565,k),a[g.QE.UNSIGNED_SHORT_4_4_4_4]=((l={})[g.hR.RGBA]=y.RGBA4,l),a[g.QE.UNSIGNED_SHORT_5_5_5_1]=((m={})[g.hR.RGBA]=y.RGB5_A1,m),a[g.QE.UNSIGNED_INT_2_10_10_10_REV]=((n={})[g.hR.RGBA]=y.RGB10_A2,n[g.hR.RGBA_INTEGER]=y.RGB10_A2UI,n),a[g.QE.UNSIGNED_INT_10F_11F_11F_REV]=((o={})[g.hR.RGB]=y.R11F_G11F_B10F,o),a[g.QE.UNSIGNED_INT_5_9_9_9_REV]=((p={})[g.hR.RGB]=y.RGB9_E5,p),a[g.QE.UNSIGNED_INT_24_8]=((q={})[g.hR.DEPTH_STENCIL]=y.DEPTH24_STENCIL8,q),a[g.QE.FLOAT_32_UNSIGNED_INT_24_8_REV]=((r={})[g.hR.DEPTH_STENCIL]=y.DEPTH32F_STENCIL8,r),x=a):((s={})[g.QE.UNSIGNED_BYTE]=((t={})[g.hR.RGBA]=y.RGBA,t[g.hR.RGB]=y.RGB,t[g.hR.ALPHA]=y.ALPHA,t[g.hR.LUMINANCE]=y.LUMINANCE,t[g.hR.LUMINANCE_ALPHA]=y.LUMINANCE_ALPHA,t),s[g.QE.UNSIGNED_SHORT_5_6_5]=((u={})[g.hR.RGB]=y.RGB,u),s[g.QE.UNSIGNED_SHORT_4_4_4_4]=((v={})[g.hR.RGBA]=y.RGBA,v),s[g.QE.UNSIGNED_SHORT_5_5_5_1]=((w={})[g.hR.RGBA]=y.RGBA,w),x=s),x);var z=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=z;for(var A=0;A<z;A++)this.boundTextures[A]=null;this.emptyTextures={};var B=new a7(y.createTexture());y.bindTexture(y.TEXTURE_2D,B.texture),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[y.TEXTURE_2D]=B,this.emptyTextures[y.TEXTURE_CUBE_MAP]=new a7(y.createTexture()),y.bindTexture(y.TEXTURE_CUBE_MAP,this.emptyTextures[y.TEXTURE_CUBE_MAP].texture);for(var A=0;A<6;A++)y.texImage2D(y.TEXTURE_CUBE_MAP_POSITIVE_X+A,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,null);y.texParameteri(y.TEXTURE_CUBE_MAP,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_CUBE_MAP,y.TEXTURE_MIN_FILTER,y.LINEAR);for(var A=0;A<this.boundTextures.length;A++)this.bind(null,A)},a.prototype.bind=function(a,b){void 0===b&&(b=0);var c=this.gl;if((a=null==a?void 0:a.castToBaseTexture())&&a.valid&&!a.parentTextureArray){a.touched=this.renderer.textureGC.count;var d=a._glTextures[this.CONTEXT_UID]||this.initTexture(a);this.boundTextures[b]!==a&&(this.currentLocation!==b&&(this.currentLocation=b,c.activeTexture(c.TEXTURE0+b)),c.bindTexture(a.target,d.texture)),d.dirtyId!==a.dirtyId?(this.currentLocation!==b&&(this.currentLocation=b,c.activeTexture(c.TEXTURE0+b)),this.updateTexture(a)):d.dirtyStyleId!==a.dirtyStyleId&&this.updateTextureStyle(a),this.boundTextures[b]=a}else this.currentLocation!==b&&(this.currentLocation=b,c.activeTexture(c.TEXTURE0+b)),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[c.TEXTURE_2D].texture),this.boundTextures[b]=null},a.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]=this.unknownTexture},a.prototype.unbind=function(a){var b=this.gl,c=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var d=0;d<c.length;d++)c[d]===this.unknownTexture&&this.bind(null,d)}for(var d=0;d<c.length;d++)c[d]===a&&(this.currentLocation!==d&&(b.activeTexture(b.TEXTURE0+d),this.currentLocation=d),b.bindTexture(a.target,this.emptyTextures[a.target].texture),c[d]=null)},a.prototype.ensureSamplerType=function(a){var b=this.boundTextures,c=this.hasIntegerTextures,d=this.CONTEXT_UID;if(c)for(var e=a-1;e>=0;--e){var f=b[e];f&&f._glTextures[d].samplerType!==g.XZ.FLOAT&&this.renderer.texture.unbind(f)}},a.prototype.initTexture=function(a){var b=new a7(this.gl.createTexture());return b.dirtyId=-1,a._glTextures[this.CONTEXT_UID]=b,this.managedTextures.push(a),a.on("dispose",this.destroyTexture,this),b},a.prototype.initTextureType=function(a,b){var c,d;b.internalFormat=null!=(d=null==(c=this.internalFormats[a.type])?void 0:c[a.format])?d:a.format,2===this.webGLVersion&&a.type===g.QE.HALF_FLOAT?b.type=this.gl.HALF_FLOAT:b.type=a.type},a.prototype.updateTexture=function(a){var b=a._glTextures[this.CONTEXT_UID];if(b){var c=this.renderer;if(this.initTextureType(a,b),a.resource&&a.resource.upload(c,a,b))b.samplerType!==g.XZ.FLOAT&&(this.hasIntegerTextures=!0);else{var d=a.realWidth,e=a.realHeight,f=c.gl;(b.width!==d||b.height!==e||b.dirtyId<0)&&(b.width=d,b.height=e,f.texImage2D(a.target,0,b.internalFormat,d,e,0,a.format,b.type,null))}a.dirtyStyleId!==b.dirtyStyleId&&this.updateTextureStyle(a),b.dirtyId=a.dirtyId}},a.prototype.destroyTexture=function(a,b){var c=this.gl;if((a=a.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(a),c.deleteTexture(a._glTextures[this.CONTEXT_UID].texture),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.CONTEXT_UID],!b)){var d=this.managedTextures.indexOf(a);-1!==d&&(0,h.removeItems)(this.managedTextures,d,1)}},a.prototype.updateTextureStyle=function(a){var b=a._glTextures[this.CONTEXT_UID];b&&(a.mipmap!==g.E8.POW2&&2===this.webGLVersion||a.isPowerOfTwo?b.mipmap=a.mipmap>=1:b.mipmap=!1,2===this.webGLVersion||a.isPowerOfTwo?b.wrapMode=a.wrapMode:b.wrapMode=g.uR.CLAMP,a.resource&&a.resource.style(this.renderer,a,b)||this.setStyle(a,b),b.dirtyStyleId=a.dirtyStyleId)},a.prototype.setStyle=function(a,b){var c=this.gl;if(b.mipmap&&a.mipmap!==g.E8.ON_MANUAL&&c.generateMipmap(a.target),c.texParameteri(a.target,c.TEXTURE_WRAP_S,b.wrapMode),c.texParameteri(a.target,c.TEXTURE_WRAP_T,b.wrapMode),b.mipmap){c.texParameteri(a.target,c.TEXTURE_MIN_FILTER,a.scaleMode===g.M6.LINEAR?c.LINEAR_MIPMAP_LINEAR:c.NEAREST_MIPMAP_NEAREST);var d=this.renderer.context.extensions.anisotropicFiltering;if(d&&a.anisotropicLevel>0&&a.scaleMode===g.M6.LINEAR){var e=Math.min(a.anisotropicLevel,c.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT));c.texParameterf(a.target,d.TEXTURE_MAX_ANISOTROPY_EXT,e)}}else c.texParameteri(a.target,c.TEXTURE_MIN_FILTER,a.scaleMode===g.M6.LINEAR?c.LINEAR:c.NEAREST);c.texParameteri(a.target,c.TEXTURE_MAG_FILTER,a.scaleMode===g.M6.LINEAR?c.LINEAR:c.NEAREST)},a.prototype.destroy=function(){this.renderer=null},a}(),a9={__proto__:null,FilterSystem:ab,BatchSystem:ad,ContextSystem:af,FramebufferSystem:ai,GeometrySystem:ak,MaskSystem:aL,ScissorSystem:aP,StencilSystem:aQ,ProjectionSystem:aR,RenderTextureSystem:aU,ShaderSystem:a4,StateSystem:a5,TextureGCSystem:a6,TextureSystem:a8},ba=new l.uq,bb=function(a){function b(b,c){void 0===b&&(b=g.h3.UNKNOWN);var d=a.call(this)||this;return d.options=c=Object.assign({},f.W0.RENDER_OPTIONS,c),d.type=b,d.screen=new l.M_(0,0,c.width,c.height),d.view=c.view||f.W0.ADAPTER.createCanvas(),d.resolution=c.resolution||f.W0.RESOLUTION,d.useContextAlpha=c.useContextAlpha,d.autoDensity=!!c.autoDensity,d.preserveDrawingBuffer=c.preserveDrawingBuffer,d.clearBeforeRender=c.clearBeforeRender,d._backgroundColor=0,d._backgroundColorRgba=[0,0,0,1],d._backgroundColorString="#000000",d.backgroundColor=c.backgroundColor||d._backgroundColor,d.backgroundAlpha=c.backgroundAlpha,void 0!==c.transparent&&((0,h.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),d.useContextAlpha=c.transparent,d.backgroundAlpha=+!c.transparent),d._lastObjectRendered=null,d.plugins={},d}return p(b,a),b.prototype.initPlugins=function(a){for(var b in a)this.plugins[b]=new a[b](this)},Object.defineProperty(b.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),b.prototype.resize=function(a,b){this.view.width=Math.round(a*this.resolution),this.view.height=Math.round(b*this.resolution);var c=this.view.width/this.resolution,d=this.view.height/this.resolution;this.screen.width=c,this.screen.height=d,this.autoDensity&&(this.view.style.width=c+"px",this.view.style.height=d+"px"),this.emit("resize",c,d)},b.prototype.generateTexture=function(a,b,c,d){void 0===b&&(b={}),"number"==typeof b&&((0,h.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),b={scaleMode:b,resolution:c,region:d});var e=b.region,f=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}(b,["region"]);0===(d=e||a.getLocalBounds(null,!0)).width&&(d.width=1),0===d.height&&(d.height=1);var g=M.create(q({width:d.width,height:d.height},f));return ba.tx=-d.x,ba.ty=-d.y,this.render(a,{renderTexture:g,clear:!1,transform:ba,skipUpdateTransform:!!a.parent}),g},b.prototype.destroy=function(a){for(var b in this.plugins)this.plugins[b].destroy(),this.plugins[b]=null;a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=g.h3.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(b.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=(0,h.hex2string)(a),(0,h.hex2rgb)(a,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(a){this._backgroundColorRgba[3]=a},enumerable:!1,configurable:!0}),b}(h.EventEmitter),bc=function(a){this.buffer=a||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},bd=function(){function a(a){this.renderer=a,this.managedBuffers={},this.boundBufferBases={}}return a.prototype.destroy=function(){this.renderer=null},a.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},a.prototype.bind=function(a){var b=this.gl,c=this.CONTEXT_UID,d=a._glBuffers[c]||this.createGLBuffer(a);b.bindBuffer(a.type,d.buffer)},a.prototype.bindBufferBase=function(a,b){var c=this.gl,d=this.CONTEXT_UID;if(this.boundBufferBases[b]!==a){var e=a._glBuffers[d]||this.createGLBuffer(a);this.boundBufferBases[b]=a,c.bindBufferBase(c.UNIFORM_BUFFER,b,e.buffer)}},a.prototype.bindBufferRange=function(a,b,c){var d=this.gl,e=this.CONTEXT_UID;c=c||0;var f=a._glBuffers[e]||this.createGLBuffer(a);d.bindBufferRange(d.UNIFORM_BUFFER,b||0,f.buffer,256*c,256)},a.prototype.update=function(a){var b=this.gl,c=this.CONTEXT_UID,d=a._glBuffers[c];if(a._updateID!==d.updateID)if(d.updateID=a._updateID,b.bindBuffer(a.type,d.buffer),d.byteLength>=a.data.byteLength)b.bufferSubData(a.type,0,a.data);else{var e=a.static?b.STATIC_DRAW:b.DYNAMIC_DRAW;d.byteLength=a.data.byteLength,b.bufferData(a.type,a.data,e)}},a.prototype.dispose=function(a,b){if(this.managedBuffers[a.id]){delete this.managedBuffers[a.id];var c=a._glBuffers[this.CONTEXT_UID],d=this.gl;a.disposeRunner.remove(this),c&&(b||d.deleteBuffer(c.buffer),delete a._glBuffers[this.CONTEXT_UID])}},a.prototype.disposeAll=function(a){for(var b=Object.keys(this.managedBuffers),c=0;c<b.length;c++)this.dispose(this.managedBuffers[b[c]],a)},a.prototype.createGLBuffer=function(a){var b=this.CONTEXT_UID,c=this.gl;return a._glBuffers[b]=new bc(c.createBuffer()),this.managedBuffers[a.id]=a,a.disposeRunner.add(this),a._glBuffers[b]},a}(),be=function(a){function b(c){var d=a.call(this,g.h3.WEBGL,c)||this;return c=d.options,d.gl=null,d.CONTEXT_UID=0,d.runners={destroy:new j.b("destroy"),contextChange:new j.b("contextChange"),reset:new j.b("reset"),update:new j.b("update"),postrender:new j.b("postrender"),prerender:new j.b("prerender"),resize:new j.b("resize")},d.runners.contextChange.add(d),d.globalUniforms=new Z({projectionMatrix:new l.uq},!0),d.addSystem(aL,"mask").addSystem(af,"context").addSystem(a5,"state").addSystem(a4,"shader").addSystem(a8,"texture").addSystem(bd,"buffer").addSystem(ak,"geometry").addSystem(ai,"framebuffer").addSystem(aP,"scissor").addSystem(aQ,"stencil").addSystem(aR,"projection").addSystem(a6,"textureGC").addSystem(ab,"filter").addSystem(aU,"renderTexture").addSystem(ad,"batch"),d.initPlugins(b.__plugins),d.multisample=void 0,c.context?d.context.initFromContext(c.context):d.context.initFromOptions({alpha:!!d.useContextAlpha,antialias:c.antialias,premultipliedAlpha:d.useContextAlpha&&"notMultiplied"!==d.useContextAlpha,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer,powerPreference:d.options.powerPreference}),d.renderingToScreen=!0,(0,h.sayHello)(2===d.context.webGLVersion?"WebGL 2":"WebGL 1"),d.resize(d.options.width,d.options.height),d}return p(b,a),b.create=function(a){if((0,h.isWebGLSupported)())return new b(a);throw Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},b.prototype.contextChange=function(){var a,b=this.gl;if(1===this.context.webGLVersion){var c=b.getParameter(b.FRAMEBUFFER_BINDING);b.bindFramebuffer(b.FRAMEBUFFER,null),a=b.getParameter(b.SAMPLES),b.bindFramebuffer(b.FRAMEBUFFER,c)}else{var c=b.getParameter(b.DRAW_FRAMEBUFFER_BINDING);b.bindFramebuffer(b.DRAW_FRAMEBUFFER,null),a=b.getParameter(b.SAMPLES),b.bindFramebuffer(b.DRAW_FRAMEBUFFER,c)}a>=g.he.HIGH?this.multisample=g.he.HIGH:a>=g.he.MEDIUM?this.multisample=g.he.MEDIUM:a>=g.he.LOW?this.multisample=g.he.LOW:this.multisample=g.he.NONE},b.prototype.addSystem=function(a,b){var c=new a(this);if(this[b])throw Error('Whoops! The name "'+b+'" is already in use');for(var d in this[b]=c,this.runners)this.runners[d].add(c);return this},b.prototype.render=function(a,b){if(b&&(b instanceof M?((0,h.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),c=b,d=arguments[2],e=arguments[3],f=arguments[4]):(c=b.renderTexture,d=b.clear,e=b.transform,f=b.skipUpdateTransform)),this.renderingToScreen=!c,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=e,!this.context.isLost){if(c||(this._lastObjectRendered=a),!f){var c,d,e,f,g=a.enableTempParent();a.updateTransform(),a.disableTempParent(g)}this.renderTexture.bind(c),this.batch.currentRenderer.start(),(void 0!==d?d:this.clearBeforeRender)&&this.renderTexture.clear(),a.render(this),this.batch.currentRenderer.flush(),c&&c.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},b.prototype.generateTexture=function(b,c,d,e){void 0===c&&(c={});var f=a.prototype.generateTexture.call(this,b,c,d,e);return this.framebuffer.blit(),f},b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c),this.runners.resize.emit(this.screen.height,this.screen.width)},b.prototype.reset=function(){return this.runners.reset.emit(),this},b.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},b.prototype.destroy=function(b){for(var c in this.runners.destroy.emit(),this.runners)this.runners[c].destroy();a.prototype.destroy.call(this,b),this.gl=null},Object.defineProperty(b.prototype,"extract",{get:function(){return(0,h.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),b.registerPlugin=function(a,b){(0,h.deprecation)("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),i.X.add({name:a,type:i.A.RendererPlugin,ref:b})},b.__plugins={},b}(bb);function bf(a){return be.create(a)}i.X.handleByMap(i.A.RendererPlugin,be.__plugins);var bg="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",bh="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",bi=function(){function a(a){(0,h.deprecation)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=a}return a.prototype.destroy=function(){this.renderer=null},a}(),bj=function(){this.texArray=null,this.blend=0,this.type=g._4.TRIANGLES,this.start=0,this.size=0,this.data=null},bk=function(){function a(){this.elements=[],this.ids=[],this.count=0}return a.prototype.clear=function(){for(var a=0;a<this.count;a++)this.elements[a]=null;this.count=0},a}(),bl=function(){function a(a){"number"==typeof a?this.rawBinaryData=new ArrayBuffer(a):a instanceof Uint8Array?this.rawBinaryData=a.buffer:this.rawBinaryData=a,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(a.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),a.prototype.view=function(a){return this[a+"View"]},a.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},a.sizeOf=function(a){switch(a){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(a+" isn't a valid view type")}},a}(),bm=function(a){function b(b){var c=a.call(this,b)||this;return c.shaderGenerator=null,c.geometryClass=null,c.vertexSize=null,c.state=aG.for2d(),c.size=4*f.W0.SPRITE_BATCH_SIZE,c._vertexCount=0,c._indexCount=0,c._bufferedElements=[],c._bufferedTextures=[],c._bufferSize=0,c._shader=null,c._packedGeometries=[],c._packedGeometryPoolSize=2,c._flushId=0,c._aBuffers={},c._iBuffers={},c.MAX_TEXTURES=1,c.renderer.on("prerender",c.onPrerender,c),b.runners.contextChange.add(c),c._dcIndex=0,c._aIndex=0,c._iIndex=0,c._attributeBuffer=null,c._indexBuffer=null,c._tempBoundTextures=[],c}return p(b,a),b.prototype.contextChange=function(){var a=this.renderer.gl;f.W0.PREFER_ENV===g.Km.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),f.W0.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=aB(this.MAX_TEXTURES,a)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var b=0;b<this._packedGeometryPoolSize;b++)this._packedGeometries[b]=new this.geometryClass;this.initFlushBuffers()},b.prototype.initFlushBuffers=function(){for(var a=b._drawCallPool,c=b._textureArrayPool,d=this.size/4,e=Math.floor(d/this.MAX_TEXTURES)+1;a.length<d;)a.push(new bj);for(;c.length<e;)c.push(new bk);for(var f=0;f<this.MAX_TEXTURES;f++)this._tempBoundTextures[f]=null},b.prototype.onPrerender=function(){this._flushId=0},b.prototype.render=function(a){a._texture.valid&&(this._vertexCount+a.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=a.vertexData.length/2,this._indexCount+=a.indices.length,this._bufferedTextures[this._bufferSize]=a._texture.baseTexture,this._bufferedElements[this._bufferSize++]=a)},b.prototype.buildTexturesAndDrawCalls=function(){var a=this._bufferedTextures,c=this.MAX_TEXTURES,d=b._textureArrayPool,e=this.renderer.batch,f=this._tempBoundTextures,g=this.renderer.textureGC.count,h=++u._globalBatch,i=0,j=d[0],k=0;e.copyBoundTextures(f,c);for(var l=0;l<this._bufferSize;++l){var m=a[l];a[l]=null,m._batchEnabled!==h&&(j.count>=c&&(e.boundArray(j,f,h,c),this.buildDrawCalls(j,k,l),k=l,j=d[++i],++h),m._batchEnabled=h,m.touched=g,j.elements[j.count++]=m)}j.count>0&&(e.boundArray(j,f,h,c),this.buildDrawCalls(j,k,this._bufferSize),++i,++h);for(var l=0;l<f.length;l++)f[l]=null;u._globalBatch=h},b.prototype.buildDrawCalls=function(a,c,d){var e=this._bufferedElements,f=this._attributeBuffer,g=this._indexBuffer,i=this.vertexSize,j=b._drawCallPool,k=this._dcIndex,l=this._aIndex,m=this._iIndex,n=j[k];n.start=this._iIndex,n.texArray=a;for(var o=c;o<d;++o){var p=e[o],q=p._texture.baseTexture,r=h.premultiplyBlendMode[+!!q.alphaMode][p.blendMode];e[o]=null,c<o&&n.blend!==r&&(n.size=m-n.start,c=o,(n=j[++k]).texArray=a,n.start=m),this.packInterleavedGeometry(p,f,g,l,m),l+=p.vertexData.length/2*i,m+=p.indices.length,n.blend=r}c<d&&(n.size=m-n.start,++k),this._dcIndex=k,this._aIndex=l,this._iIndex=m},b.prototype.bindAndClearTexArray=function(a){for(var b=this.renderer.texture,c=0;c<a.count;c++)b.bind(a.elements[c],a.ids[c]),a.elements[c]=null;a.count=0},b.prototype.updateGeometry=function(){var a=this._packedGeometries,b=this._attributeBuffer,c=this._indexBuffer;f.W0.CAN_UPLOAD_SAME_BUFFER?(a[this._flushId]._buffer.update(b.rawBinaryData),a[this._flushId]._indexBuffer.update(c),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,a[this._flushId]=new this.geometryClass),a[this._flushId]._buffer.update(b.rawBinaryData),a[this._flushId]._indexBuffer.update(c),this.renderer.geometry.bind(a[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},b.prototype.drawBatches=function(){for(var a=this._dcIndex,c=this.renderer,d=c.gl,e=c.state,f=b._drawCallPool,g=null,h=0;h<a;h++){var i=f[h],j=i.texArray,k=i.type,l=i.size,m=i.start,n=i.blend;g!==j&&(g=j,this.bindAndClearTexArray(j)),this.state.blendMode=n,e.set(this.state),d.drawElements(k,l,d.UNSIGNED_SHORT,2*m)}},b.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},b.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),f.W0.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},b.prototype.stop=function(){this.flush()},b.prototype.destroy=function(){for(var b=0;b<this._packedGeometryPoolSize;b++)this._packedGeometries[b]&&this._packedGeometries[b].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),a.prototype.destroy.call(this)},b.prototype.getAttributeBuffer=function(a){var b=(0,h.nextPow2)(Math.ceil(a/8)),c=(0,h.log2)(b),d=8*b;this._aBuffers.length<=c&&(this._iBuffers.length=c+1);var e=this._aBuffers[d];return e||(this._aBuffers[d]=e=new bl(d*this.vertexSize*4)),e},b.prototype.getIndexBuffer=function(a){var b=(0,h.nextPow2)(Math.ceil(a/12)),c=(0,h.log2)(b);this._iBuffers.length<=c&&(this._iBuffers.length=c+1);var d=this._iBuffers[c];return d||(this._iBuffers[c]=d=new Uint16Array(12*b)),d},b.prototype.packInterleavedGeometry=function(a,b,c,d,e){for(var f=b.uint32View,g=b.float32View,i=d/this.vertexSize,j=a.uvs,k=a.indices,l=a.vertexData,m=a._texture.baseTexture._batchLocation,n=Math.min(a.worldAlpha,1),o=n<1&&a._texture.baseTexture.alphaMode?(0,h.premultiplyTint)(a._tintRGB,n):a._tintRGB+(255*n<<24),p=0;p<l.length;p+=2)g[d++]=l[p],g[d++]=l[p+1],g[d++]=j[p],g[d++]=j[p+1],f[d++]=o,g[d++]=m;for(var p=0;p<k.length;p++)c[e++]=i+k[p]},b._drawCallPool=[],b._textureArrayPool=[],b}(ac),bn=function(){function a(a,b){if(this.vertexSrc=a,this.fragTemplate=b,this.programCache={},this.defaultGroupCache={},0>b.indexOf("%count%"))throw Error('Fragment template must contain "%count%".');if(0>b.indexOf("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}return a.prototype.generateShader=function(a){if(!this.programCache[a]){for(var b=new Int32Array(a),c=0;c<a;c++)b[c]=c;this.defaultGroupCache[a]=Z.from({uSamplers:b},!0);var d=this.fragTemplate;d=(d=d.replace(/%count%/gi,""+a)).replace(/%forloop%/gi,this.generateSampleSrc(a)),this.programCache[a]=new aE(this.vertexSrc,d)}var e={tint:new Float32Array([1,1,1,1]),translationMatrix:new l.uq,default:this.defaultGroupCache[a]};return new aF(this.programCache[a],e)},a.prototype.generateSampleSrc=function(a){var b="";b+="\n\n";for(var c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(vTextureId < "+c+".5)"),b+="\n{\n	color = texture2D(uSamplers["+c+"], vTextureCoord);\n}";return b+"\n\n"},a}(),bo=function(a){function b(b){void 0===b&&(b=!1);var c=a.call(this)||this;return c._buffer=new Q(null,b,!1),c._indexBuffer=new Q(null,b,!0),c.addAttribute("aVertexPosition",c._buffer,2,!1,g.QE.FLOAT).addAttribute("aTextureCoord",c._buffer,2,!1,g.QE.FLOAT).addAttribute("aColor",c._buffer,4,!0,g.QE.UNSIGNED_BYTE).addAttribute("aTextureId",c._buffer,1,!0,g.QE.FLOAT).addIndex(c._indexBuffer),c}return p(b,a),b}(V),bp="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",bq="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",br=function(){function a(){}return a.create=function(a){var b=Object.assign({vertex:bp,fragment:bq,geometryClass:bo,vertexSize:6},a),c=b.vertex,d=b.fragment,e=b.vertexSize,f=b.geometryClass;function g(a){var b=bm.call(this,a)||this;return b.shaderGenerator=new bn(c,d),b.geometryClass=f,b.vertexSize=e,b}return p(g,bm),g},Object.defineProperty(a,"defaultVertexSrc",{get:function(){return bp},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultFragmentTemplate",{get:function(){return bq},enumerable:!1,configurable:!0}),a}(),bs=br.create();Object.assign(bs,{extension:{name:"batch",type:i.A.RendererPlugin}});var bt={},bu=function(a){Object.defineProperty(bt,a,{get:function(){return(0,h.deprecation)("6.0.0","PIXI.systems."+a+" has moved to PIXI."+a),E[a]}})};for(var bv in E)bu(bv);var bw={},bx=function(a){Object.defineProperty(bw,a,{get:function(){return(0,h.deprecation)("6.0.0","PIXI.resources."+a+" has moved to PIXI."+a),a9[a]}})};for(var bv in a9)bx(bv);var by="6.5.10"},4684:(a,b,c)=>{c.r(b),c.d(b,{BaseTextureCache:()=>S,CanvasRenderTarget:()=>V,DATA_URI:()=>X,EventEmitter:()=>g,ProgramCache:()=>Q,TextureCache:()=>R,clearTextureCache:()=>U,correctBlendMode:()=>z,createIndicesForQuads:()=>D,decomposeDataUri:()=>Y,deprecation:()=>P,destroyTextureCache:()=>T,determineCrossOrigin:()=>Z,earcut:()=>h,getBufferType:()=>E,getResolutionOfUrl:()=>$,hex2rgb:()=>u,hex2string:()=>v,interleaveTypedArrays:()=>G,isMobile:()=>f.Fr,isPow2:()=>I,isWebGLSupported:()=>s,log2:()=>J,nextPow2:()=>H,path:()=>n,premultiplyBlendMode:()=>y,premultiplyRgba:()=>A,premultiplyTint:()=>B,premultiplyTintToRgba:()=>C,removeItems:()=>K,rgb2hex:()=>x,sayHello:()=>r,sign:()=>L,skipHello:()=>q,string2hex:()=>w,trimCanvas:()=>W,uid:()=>N,url:()=>k});var d,e,f=c(1546),g=c(5964),h=c(4758),i=c(9551),j=c(1964),k={parse:i.parse,format:i.format,resolve:i.resolve};function l(a){if("string"!=typeof a)throw TypeError("Path must be a string. Received "+JSON.stringify(a))}function m(a){return a.split("?")[0].split("#")[0]}var n={toPosix:function(a){return a.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/")},isUrl:function(a){return/^https?:/.test(this.toPosix(a))},isDataUrl:function(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},hasProtocol:function(a){return/^[^/:]+:\//.test(this.toPosix(a))},getProtocol:function(a){l(a),a=this.toPosix(a);var b="",c=/^file:\/\/\//.exec(a),d=/^[^/:]+:\/\//.exec(a),e=/^[^/:]+:\//.exec(a);if(c||d||e){var f=(null==c?void 0:c[0])||(null==d?void 0:d[0])||(null==e?void 0:e[0]);b=f,a=a.slice(f.length)}return b},toAbsolute:function(a,b,c){if(this.isDataUrl(a))return a;var d=m(this.toPosix(null!=b?b:f.W0.ADAPTER.getBaseUrl())),e=m(this.toPosix(null!=c?c:this.rootname(d)));return(l(a),(a=this.toPosix(a)).startsWith("/"))?n.join(e,a.slice(1)):this.isAbsolute(a)?a:this.join(d,a)},normalize:function(a){if(l(a=this.toPosix(a)),0===a.length)return".";var b="",c=a.startsWith("/");this.hasProtocol(a)&&(b=this.rootname(a),a=a.slice(b.length));var d=a.endsWith("/");return((a=function(a,b){for(var c,d="",e=0,f=-1,g=0,h=0;h<=a.length;++h){if(h<a.length)c=a.charCodeAt(h);else if(47===c)break;else c=47;if(47===c){if(f===h-1||1===g);else if(f!==h-1&&2===g){if(d.length<2||2!==e||46!==d.charCodeAt(d.length-1)||46!==d.charCodeAt(d.length-2)){if(d.length>2){var i=d.lastIndexOf("/");if(i!==d.length-1){-1===i?(d="",e=0):e=(d=d.slice(0,i)).length-1-d.lastIndexOf("/"),f=h,g=0;continue}}else if(2===d.length||1===d.length){d="",e=0,f=h,g=0;continue}}b&&(d.length>0?d+="/..":d="..",e=2)}else d.length>0?d+="/"+a.slice(f+1,h):d=a.slice(f+1,h),e=h-f-1;f=h,g=0}else 46===c&&-1!==g?++g:g=-1}return d}(a,!1)).length>0&&d&&(a+="/"),c)?"/"+a:b+a},isAbsolute:function(a){return l(a),a=this.toPosix(a),!!this.hasProtocol(a)||a.startsWith("/")},join:function(){for(var a,b,c=arguments,d=[],e=0;e<arguments.length;e++)d[e]=c[e];if(0===d.length)return".";for(var f=0;f<d.length;++f){var g=d[f];if(l(g),g.length>0)if(void 0===b)b=g;else{var h=null!=(a=d[f-1])?a:"";this.extname(h)?b+="/../"+g:b+="/"+g}}return void 0===b?".":this.normalize(b)},dirname:function(a){if(l(a),0===a.length)return".";var b=(a=this.toPosix(a)).charCodeAt(0),c=47===b,d=-1,e=!0,f=this.getProtocol(a),g=a;a=a.slice(f.length);for(var h=a.length-1;h>=1;--h)if(47===(b=a.charCodeAt(h))){if(!e){d=h;break}}else e=!1;return -1===d?c?"/":this.isUrl(g)?f+a:f:c&&1===d?"//":f+a.slice(0,d)},rootname:function(a){l(a);var b="";if(b=(a=this.toPosix(a)).startsWith("/")?"/":this.getProtocol(a),this.isUrl(a)){var c=a.indexOf("/",b.length);(b=-1!==c?a.slice(0,c):a).endsWith("/")||(b+="/")}return b},basename:function(a,b){l(a),b&&l(b),a=this.toPosix(a);var c,d=0,e=-1,f=!0;if(void 0!==b&&b.length>0&&b.length<=a.length){if(b.length===a.length&&b===a)return"";var g=b.length-1,h=-1;for(c=a.length-1;c>=0;--c){var i=a.charCodeAt(c);if(47===i){if(!f){d=c+1;break}}else -1===h&&(f=!1,h=c+1),g>=0&&(i===b.charCodeAt(g)?-1==--g&&(e=c):(g=-1,e=h))}return d===e?e=h:-1===e&&(e=a.length),a.slice(d,e)}for(c=a.length-1;c>=0;--c)if(47===a.charCodeAt(c)){if(!f){d=c+1;break}}else -1===e&&(f=!1,e=c+1);return -1===e?"":a.slice(d,e)},extname:function(a){l(a),a=this.toPosix(a);for(var b=-1,c=0,d=-1,e=!0,f=0,g=a.length-1;g>=0;--g){var h=a.charCodeAt(g);if(47===h){if(!e){c=g+1;break}continue}-1===d&&(e=!1,d=g+1),46===h?-1===b?b=g:1!==f&&(f=1):-1!==b&&(f=-1)}return -1===b||-1===d||0===f||1===f&&b===d-1&&b===c+1?"":a.slice(b,d)},parse:function(a){l(a);var b,c={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return c;var d=(a=this.toPosix(a)).charCodeAt(0),e=this.isAbsolute(a);c.root=this.rootname(a),b=e||this.hasProtocol(a)?1:0;for(var f=-1,g=0,h=-1,i=!0,j=a.length-1,k=0;j>=b;--j){if(47===(d=a.charCodeAt(j))){if(!i){g=j+1;break}continue}-1===h&&(i=!1,h=j+1),46===d?-1===f?f=j:1!==k&&(k=1):-1!==f&&(k=-1)}return -1===f||-1===h||0===k||1===k&&f===h-1&&f===g+1?-1!==h&&(0===g&&e?c.base=c.name=a.slice(1,h):c.base=c.name=a.slice(g,h)):(0===g&&e?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(g,f),c.base=a.slice(g,h)),c.ext=a.slice(f,h)),c.dir=this.dirname(a),c},sep:"/",delimiter:":"};f.W0.RETINA_PREFIX=/@([0-9\.]+)x/,f.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var o=!1,p="6.5.10";function q(){o=!0}function r(a){var b;o||(f.W0.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1?(b=globalThis.console).log.apply(b,["\n %c %c %c PixiJS "+p+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS "+p+" - "+a+" - http://www.pixijs.com/"),o=!0)}function s(){return void 0===d&&(d=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:f.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!f.W0.ADAPTER.getWebGLRenderingContext())return!1;var b=f.W0.ADAPTER.createCanvas(),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!!(c&&c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}}()),d}var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function u(a,b){return void 0===b&&(b=[]),b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b}function v(a){var b=a.toString(16);return"#"+(b="000000".substring(0,6-b.length)+b)}function w(a){return"string"==typeof a&&"#"===(a=t[a.toLowerCase()]||a)[0]&&(a=a.slice(1)),parseInt(a,16)}function x(a){return(255*a[0]<<16)+(255*a[1]<<8)+(255*a[2]|0)}var y=function(){for(var a=[],b=[],c=0;c<32;c++)a[c]=c,b[c]=c;a[j.B9.NORMAL_NPM]=j.B9.NORMAL,a[j.B9.ADD_NPM]=j.B9.ADD,a[j.B9.SCREEN_NPM]=j.B9.SCREEN,b[j.B9.NORMAL]=j.B9.NORMAL_NPM,b[j.B9.ADD]=j.B9.ADD_NPM,b[j.B9.SCREEN]=j.B9.SCREEN_NPM;var d=[];return d.push(b),d.push(a),d}();function z(a,b){return y[+!!b][a]}function A(a,b,c,d){return c=c||new Float32Array(4),d||void 0===d?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b):(c[0]=a[0],c[1]=a[1],c[2]=a[2]),c[3]=b,c}function B(a,b){if(1===b)return(255*b<<24)+a;if(0===b)return 0;var c=a>>16&255,d=a>>8&255,e=255&a;return c=c*b+.5|0,d=d*b+.5|0,e=e*b+.5|0,(255*b<<24)+(c<<16)+(d<<8)+e}function C(a,b,c,d){return(c=c||new Float32Array(4))[0]=(a>>16&255)/255,c[1]=(a>>8&255)/255,c[2]=(255&a)/255,(d||void 0===d)&&(c[0]*=b,c[1]*=b,c[2]*=b),c[3]=b,c}function D(a,b){void 0===b&&(b=null);var c=6*a;if((b=b||new Uint16Array(c)).length!==c)throw Error("Out buffer length is incorrect, got "+b.length+" and expected "+c);for(var d=0,e=0;d<c;d+=6,e+=4)b[d+0]=e+0,b[d+1]=e+1,b[d+2]=e+2,b[d+3]=e+0,b[d+4]=e+2,b[d+5]=e+3;return b}function E(a){if(4===a.BYTES_PER_ELEMENT)return a instanceof Float32Array?"Float32Array":a instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===a.BYTES_PER_ELEMENT){if(a instanceof Uint16Array)return"Uint16Array"}else if(1===a.BYTES_PER_ELEMENT&&a instanceof Uint8Array)return"Uint8Array";return null}var F={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function G(a,b){for(var c=0,d=0,e={},f=0;f<a.length;f++)d+=b[f],c+=a[f].length;for(var g=new ArrayBuffer(4*c),h=null,i=0,f=0;f<a.length;f++){var j=b[f],k=a[f],l=E(k);e[l]||(e[l]=new F[l](g)),h=e[l];for(var m=0;m<k.length;m++)h[(m/j|0)*d+i+m%j]=k[m];i+=j}return new Float32Array(g)}function H(a){return a+=+(0===a),--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)+1}function I(a){return!(a&a-1)&&!!a}function J(a){var b=(a>65535)<<4,c=((a>>>=b)>255)<<3;return a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,(b|=c)|a>>1}function K(a,b,c){var d,e=a.length;if(!(b>=e)&&0!==c){c=b+c>e?e-b:c;var f=e-c;for(d=b;d<f;++d)a[d]=a[d+c];a.length=f}}function L(a){return 0===a?0:a<0?-1:1}var M=0;function N(){return++M}var O={};function P(a,b,c){if(void 0===c&&(c=3),!O[b]){var d=Error().stack;void 0===d?console.warn("PixiJS Deprecation Warning: ",b+"\nDeprecated since v"+a):(d=d.split("\n").splice(c).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",b+"\nDeprecated since v"+a),console.warn(d),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",b+"\nDeprecated since v"+a),console.warn(d))),O[b]=!0}}var Q={},R=Object.create(null),S=Object.create(null);function T(){var a;for(a in R)R[a].destroy();for(a in S)S[a].destroy()}function U(){var a;for(a in R)delete R[a];for(a in S)delete S[a]}var V=function(){function a(a,b,c){this.canvas=f.W0.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=c||f.W0.RESOLUTION,this.resize(a,b)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(a,b){this.canvas.width=Math.round(a*this.resolution),this.canvas.height=Math.round(b*this.resolution)},a.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(a.prototype,"width",{get:function(){return this.canvas.width},set:function(a){this.canvas.width=Math.round(a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.canvas.height},set:function(a){this.canvas.height=Math.round(a)},enumerable:!1,configurable:!0}),a}();function W(a){var b,c,d,e=a.width,f=a.height,g=a.getContext("2d",{willReadFrequently:!0}),h=g.getImageData(0,0,e,f).data,i=h.length,j={top:null,left:null,right:null,bottom:null},k=null;for(b=0;b<i;b+=4)0!==h[b+3]&&(c=b/4%e,d=~~(b/4/e),null===j.top&&(j.top=d),null===j.left?j.left=c:c<j.left&&(j.left=c),null===j.right?j.right=c+1:j.right<c&&(j.right=c+1),null===j.bottom?j.bottom=d:j.bottom<d&&(j.bottom=d));return null!==j.top&&(e=j.right-j.left,f=j.bottom-j.top+1,k=g.getImageData(j.left,j.top,e,f)),{height:f,width:e,data:k}}var X=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Y(a){var b=X.exec(a);if(b)return{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,charset:b[3]?b[3].toLowerCase():void 0,encoding:b[4]?b[4].toLowerCase():void 0,data:b[5]}}function Z(a,b){if(void 0===b&&(b=globalThis.location),0===a.indexOf("data:"))return"";b=b||globalThis.location,e||(e=document.createElement("a")),e.href=a;var c=k.parse(e.href),d=!c.port&&""===b.port||c.port===b.port;return c.hostname===b.hostname&&d&&c.protocol===b.protocol?"":"anonymous"}function $(a,b){var c=f.W0.RETINA_PREFIX.exec(a);return c?parseFloat(c[1]):void 0!==b?b:1}},4758:a=>{function b(a,b,k){k=k||2;var l,o,q,r,s,t,u,v=b&&b.length,w=v?b[0]*k:a.length,x=c(a,0,w,k,!0),y=[];if(!x||x.next===x.prev)return y;if(v&&(x=function(a,b,f,i){var j,k,l,o,p,q=[];for(j=0,k=b.length;j<k;j++)l=b[j]*i,o=j<k-1?b[j+1]*i:a.length,(p=c(a,l,o,i,!1))===p.next&&(p.steiner=!0),q.push(function(a){var b=a,c=a;do(b.x<c.x||b.x===c.x&&b.y<c.y)&&(c=b),b=b.next;while(b!==a);return c}(p));for(q.sort(e),j=0;j<q.length;j++)f=function(a,b){var c=function(a,b){var c,d,e,f=b,i=a.x,j=a.y,k=-1/0;do{if(j<=f.y&&j>=f.next.y&&f.next.y!==f.y){var l=f.x+(j-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(l<=i&&l>k&&(k=l,e=f.x<f.next.x?f:f.next,l===i))return e}f=f.next}while(f!==b);if(!e)return null;var n,o=e,p=e.x,q=e.y,r=1/0;f=e;do{i>=f.x&&f.x>=p&&i!==f.x&&g(j<q?i:k,j,p,q,j<q?k:i,j,f.x,f.y)&&(n=Math.abs(j-f.y)/(i-f.x),m(f,a)&&(n<r||n===r&&(f.x>e.x||f.x===e.x&&(c=e,d=f,0>h(c.prev,c,d.prev)&&0>h(d.next,c,c.next))))&&(e=f,r=n)),f=f.next}while(f!==o);return e}(a,b);if(!c)return b;var e=n(c,a);return d(e,e.next),d(c,c.next)}(q[j],f);return f}(a,b,x,k)),a.length>80*k){l=q=a[0],o=r=a[1];for(var z=k;z<w;z+=k)s=a[z],t=a[z+1],s<l&&(l=s),t<o&&(o=t),s>q&&(q=s),t>r&&(r=t);u=0!==(u=Math.max(q-l,r-o))?32767/u:0}return function a(b,c,e,k,l,o,q){if(b){!q&&o&&function(a,b,c,d){var e=a;do 0===e.z&&(e.z=f(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,function(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0!==h&&(0===i||!d||c.z<=d.z)?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1)}(e)}(b,k,l,o);for(var r,s,t=b;b.prev!==b.next;){if(r=b.prev,s=b.next,o?function(a,b,c,d){var e=a.prev,i=a.next;if(h(e,a,i)>=0)return!1;for(var j=e.x,k=a.x,l=i.x,m=e.y,n=a.y,o=i.y,p=j<k?j<l?j:l:k<l?k:l,q=m<n?m<o?m:o:n<o?n:o,r=j>k?j>l?j:l:k>l?k:l,s=m>n?m>o?m:o:n>o?n:o,t=f(p,q,b,c,d),u=f(r,s,b,c,d),v=a.prevZ,w=a.nextZ;v&&v.z>=t&&w&&w.z<=u;){if(v.x>=p&&v.x<=r&&v.y>=q&&v.y<=s&&v!==e&&v!==i&&g(j,m,k,n,l,o,v.x,v.y)&&h(v.prev,v,v.next)>=0||(v=v.prevZ,w.x>=p&&w.x<=r&&w.y>=q&&w.y<=s&&w!==e&&w!==i&&g(j,m,k,n,l,o,w.x,w.y)&&h(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;v&&v.z>=t;){if(v.x>=p&&v.x<=r&&v.y>=q&&v.y<=s&&v!==e&&v!==i&&g(j,m,k,n,l,o,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;w&&w.z<=u;){if(w.x>=p&&w.x<=r&&w.y>=q&&w.y<=s&&w!==e&&w!==i&&g(j,m,k,n,l,o,w.x,w.y)&&h(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}(b,k,l,o):function(a){var b=a.prev,c=a.next;if(h(b,a,c)>=0)return!1;for(var d=b.x,e=a.x,f=c.x,i=b.y,j=a.y,k=c.y,l=d<e?d<f?d:f:e<f?e:f,m=i<j?i<k?i:k:j<k?j:k,n=d>e?d>f?d:f:e>f?e:f,o=i>j?i>k?i:k:j>k?j:k,p=c.next;p!==b;){if(p.x>=l&&p.x<=n&&p.y>=m&&p.y<=o&&g(d,i,e,j,f,k,p.x,p.y)&&h(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(b)){c.push(r.i/e|0),c.push(b.i/e|0),c.push(s.i/e|0),p(b),b=s.next,t=s.next;continue}if((b=s)===t){q?1===q?a(b=function(a,b,c){var e=a;do{var f=e.prev,g=e.next.next;!i(f,g)&&j(f,e,e.next,g)&&m(f,g)&&m(g,f)&&(b.push(f.i/c|0),b.push(e.i/c|0),b.push(g.i/c|0),p(e),p(e.next),e=a=g),e=e.next}while(e!==a);return d(e)}(d(b),c,e),c,e,k,l,o,2):2===q&&function(b,c,e,f,g,k){var l=b;do{for(var o,p,q=l.next.next;q!==l.prev;){if(l.i!==q.i&&(o=l,p=q,o.next.i!==p.i&&o.prev.i!==p.i&&!function(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&j(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}(o,p)&&(m(o,p)&&m(p,o)&&function(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&c.next.y!==c.y&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}(o,p)&&(h(o.prev,o,p.prev)||h(o,p.prev,p))||i(o,p)&&h(o.prev,o,o.next)>0&&h(p.prev,p,p.next)>0))){var r=n(l,q);l=d(l,l.next),r=d(r,r.next),a(l,c,e,f,g,k,0),a(r,c,e,f,g,k,0);return}q=q.next}l=l.next}while(l!==b)}(b,c,e,k,l,o):a(d(b),c,e,k,l,o,1);break}}}}(x,y,k,l,o,u,0),y}function c(a,b,c,d,e){var f,g;if(e===r(a,b,c,d)>0)for(f=b;f<c;f+=d)g=o(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=o(f,a[f],a[f+1],g);return g&&i(g,g.next)&&(p(g),g=g.next),g}function d(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,!d.steiner&&(i(d,d.next)||0===h(d.prev,d,d.next))){if(p(d),(d=b=d.prev)===d.next)break;c=!0}else d=d.next;while(c||d!==b);return b}function e(a,b){return a.x-b.x}function f(a,b,c,d,e){return(a=((a=((a=((a=((a=(a-c)*e|0)|a<<8)&0xff00ff)|a<<4)&0xf0f0f0f)|a<<2)&0x33333333)|a<<1)&0x55555555)|(b=((b=((b=((b=((b=(b-d)*e|0)|b<<8)&0xff00ff)|b<<4)&0xf0f0f0f)|b<<2)&0x33333333)|b<<1)&0x55555555)<<1}function g(a,b,c,d,e,f,g,h){return(e-g)*(b-h)>=(a-g)*(f-h)&&(a-g)*(d-h)>=(c-g)*(b-h)&&(c-g)*(f-h)>=(e-g)*(d-h)}function h(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function i(a,b){return a.x===b.x&&a.y===b.y}function j(a,b,c,d){var e=l(h(a,b,c)),f=l(h(a,b,d)),g=l(h(c,d,a)),i=l(h(c,d,b));return!!(e!==f&&g!==i||0===e&&k(a,c,b)||0===f&&k(a,d,b)||0===g&&k(c,a,d)||0===i&&k(c,b,d))}function k(a,b,c){return b.x<=Math.max(a.x,c.x)&&b.x>=Math.min(a.x,c.x)&&b.y<=Math.max(a.y,c.y)&&b.y>=Math.min(a.y,c.y)}function l(a){return a>0?1:a<0?-1:0}function m(a,b){return 0>h(a.prev,a,a.next)?h(a,b,a.next)>=0&&h(a,a.prev,b)>=0:0>h(a,b,a.prev)||0>h(a,a.next,b)}function n(a,b){var c=new q(a.i,a.x,a.y),d=new q(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function o(a,b,c,d){var e=new q(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function p(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function q(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function r(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}a.exports=b,a.exports.default=b,b.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(r(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(r(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},b.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},5330:(a,b,c)=>{c.d(b,{A:()=>d,X:()=>g});var d,e=function(){return(e=Object.assign||function(a){for(var b,c=arguments,d=1,e=arguments.length;d<e;d++)for(var f in b=c[d])Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f]);return a}).apply(this,arguments)};!function(a){a.Application="application",a.RendererPlugin="renderer-webgl-plugin",a.CanvasRendererPlugin="renderer-canvas-plugin",a.Loader="loader",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser"}(d||(d={}));var f=function(a){if("function"==typeof a||"object"==typeof a&&a.extension){if(!a.extension)throw Error("Extension class must have an extension object");var b="object"!=typeof a.extension?{type:a.extension}:a.extension;a=e(e({},b),{ref:a})}if("object"==typeof a)a=e({},a);else throw Error("Invalid extension type");return"string"==typeof a.type&&(a.type=[a.type]),a},g={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var a=arguments,b=this,c=[],d=0;d<arguments.length;d++)c[d]=a[d];return c.map(f).forEach(function(a){a.type.forEach(function(c){var d,e;return null==(e=(d=b._removeHandlers)[c])?void 0:e.call(d,a)})}),this},add:function(){for(var a=arguments,b=this,c=[],d=0;d<arguments.length;d++)c[d]=a[d];return c.map(f).forEach(function(a){a.type.forEach(function(c){var d=b._addHandlers,e=b._queue;d[c]?d[c](a):(e[c]=e[c]||[],e[c].push(a))})}),this},handle:function(a,b,c){var d=this._addHandlers=this._addHandlers||{},e=this._removeHandlers=this._removeHandlers||{};if(d[a]||e[a])throw Error("Extension type "+a+" already has a handler");d[a]=b,e[a]=c;var f=this._queue;return f[a]&&(f[a].forEach(function(a){return b(a)}),delete f[a]),this},handleByMap:function(a,b){return this.handle(a,function(a){b[a.name]=a.ref},function(a){delete b[a.name]})},handleByList:function(a,b){return this.handle(a,function(c){var e,f;b.includes(c.ref)||(b.push(c.ref),a===d.Loader&&(null==(f=(e=c.ref).add)||f.call(e)))},function(a){var c=b.indexOf(a.ref);-1!==c&&b.splice(c,1)})}}},5964:a=>{var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0==--a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},8986:(a,b,c)=>{c.d(b,{cz:()=>h,dC:()=>l,mc:()=>n,q9:()=>k});var d=c(1546),e=c(1602),f=c(4684),g=c(1964);d.W0.SORTABLE_CHILDREN=!1;var h=function(){function a(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},a.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?e.M_.EMPTY:((a=a||new e.M_(0,0,1,1)).x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},a.prototype.addPointMatrix=function(a,b){var c=a.a,d=a.b,e=a.c,f=a.d,g=a.tx,h=a.ty,i=c*b.x+e*b.y+g,j=d*b.x+f*b.y+h;this.minX=Math.min(this.minX,i),this.maxX=Math.max(this.maxX,i),this.minY=Math.min(this.minY,j),this.maxY=Math.max(this.maxY,j)},a.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.addFrame=function(a,b,c,d,e){this.addFrameMatrix(a.worldTransform,b,c,d,e)},a.prototype.addFrameMatrix=function(a,b,c,d,e){var f=a.a,g=a.b,h=a.c,i=a.d,j=a.tx,k=a.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=f*b+h*c+j,q=g*b+i*c+k;l=p<l?p:l,m=q<m?q:m,n=p>n?p:n,o=q>o?q:o,p=f*d+h*c+j,q=g*d+i*c+k,l=p<l?p:l,m=q<m?q:m,n=p>n?p:n,o=q>o?q:o,p=f*b+h*e+j,q=g*b+i*e+k,l=p<l?p:l,m=q<m?q:m,n=p>n?p:n,o=q>o?q:o,p=f*d+h*e+j,q=g*d+i*e+k,l=p<l?p:l,m=q<m?q:m,n=p>n?p:n,o=q>o?q:o,this.minX=l,this.minY=m,this.maxX=n,this.maxY=o},a.prototype.addVertexData=function(a,b,c){for(var d=this.minX,e=this.minY,f=this.maxX,g=this.maxY,h=b;h<c;h+=2){var i=a[h],j=a[h+1];d=i<d?i:d,e=j<e?j:e,f=i>f?i:f,g=j>g?j:g}this.minX=d,this.minY=e,this.maxX=f,this.maxY=g},a.prototype.addVertices=function(a,b,c,d){this.addVerticesMatrix(a.worldTransform,b,c,d)},a.prototype.addVerticesMatrix=function(a,b,c,d,e,f){void 0===e&&(e=0),void 0===f&&(f=e);for(var g=a.a,h=a.b,i=a.c,j=a.d,k=a.tx,l=a.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=c;q<d;q+=2){var r=b[q],s=b[q+1],t=g*r+i*s+k,u=j*s+h*r+l;m=Math.min(m,t-e),o=Math.max(o,t+e),n=Math.min(n,u-f),p=Math.max(p,u+f)}this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},a.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e},a.prototype.addBoundsMask=function(a,b){var c=a.minX>b.minX?a.minX:b.minX,d=a.minY>b.minY?a.minY:b.minY,e=a.maxX<b.maxX?a.maxX:b.maxX,f=a.maxY<b.maxY?a.maxY:b.maxY;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a.prototype.addBoundsMatrix=function(a,b){this.addFrameMatrix(b,a.minX,a.minY,a.maxX,a.maxY)},a.prototype.addBoundsArea=function(a,b){var c=a.minX>b.x?a.minX:b.x,d=a.minY>b.y?a.minY:b.y,e=a.maxX<b.x+b.width?a.maxX:b.x+b.width,f=a.maxY<b.y+b.height?a.maxY:b.y+b.height;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a.prototype.pad=function(a,b){void 0===a&&(a=0),void 0===b&&(b=a),this.isEmpty()||(this.minX-=a,this.maxX+=a,this.minY-=b,this.maxY+=b)},a.prototype.addFramePad=function(a,b,c,d,e,f){a-=e,b-=f,c+=e,d+=f,this.minX=this.minX<a?this.minX:a,this.maxX=this.maxX>c?this.maxX:c,this.minY=this.minY<b?this.minY:b,this.maxY=this.maxY>d?this.maxY:d},a}(),i=function(a,b){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)};function j(a,b){function c(){this.constructor=a}i(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var k=function(a){function b(){var b=a.call(this)||this;return b.tempDisplayObjectParent=null,b.transform=new e.dL,b.alpha=1,b.visible=!0,b.renderable=!0,b.cullable=!1,b.cullArea=null,b.parent=null,b.worldAlpha=1,b._lastSortedIndex=0,b._zIndex=0,b.filterArea=null,b.filters=null,b._enabledFilters=null,b._bounds=new h,b._localBounds=null,b._boundsID=0,b._boundsRect=null,b._localBoundsRect=null,b._mask=null,b._maskRefCount=0,b._destroyed=!1,b.isSprite=!1,b.isMask=!1,b}return j(b,a),b.mixin=function(a){for(var c=Object.keys(a),d=0;d<c.length;++d){var e=c[d];Object.defineProperty(b.prototype,e,Object.getOwnPropertyDescriptor(a,e))}},Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},b.prototype.getBounds=function(a,b){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),b||(this._boundsRect||(this._boundsRect=new e.M_),b=this._boundsRect),this._bounds.getRectangle(b)},b.prototype.getLocalBounds=function(a){a||(this._localBoundsRect||(this._localBoundsRect=new e.M_),a=this._localBoundsRect),this._localBounds||(this._localBounds=new h);var b=this.transform,c=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var d=this._bounds,f=this._boundsID;this._bounds=this._localBounds;var g=this.getBounds(!1,a);return this.parent=c,this.transform=b,this._bounds=d,this._bounds.updateID+=this._boundsID-f,g},b.prototype.toGlobal=function(a,b,c){return void 0===c&&(c=!1),c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},b.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},b.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");return a.addChild(this),a},b.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){return void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=0),this.position.x=a,this.position.y=b,this.scale.x=c||1,this.scale.y=d||1,this.rotation=e,this.skew.x=f,this.skew.y=g,this.pivot.x=h,this.pivot.y=i,this},b.prototype.destroy=function(a){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(b.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new l),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),b.prototype.enableTempParent=function(){var a=this.parent;return this.parent=this._tempDisplayObjectParent,a},b.prototype.disableTempParent=function(a){this.parent=a},Object.defineProperty(b.prototype,"x",{get:function(){return this.position.x},set:function(a){this.transform.position.x=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.position.y},set:function(a){this.transform.position.y=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"position",{get:function(){return this.transform.position},set:function(a){this.transform.position.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"scale",{get:function(){return this.transform.scale},set:function(a){this.transform.scale.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"skew",{get:function(){return this.transform.skew},set:function(a){this.transform.skew.copyFrom(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"angle",{get:function(){return this.transform.rotation*e.bO},set:function(a){this.transform.rotation=a*e.Td},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"zIndex",{get:function(){return this._zIndex},set:function(a){this._zIndex=a,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"worldVisible",{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"mask",{get:function(){return this._mask},set:function(a){if(this._mask!==a){if(this._mask){var b=this._mask.isMaskData?this._mask.maskObject:this._mask;b&&(b._maskRefCount--,0===b._maskRefCount&&(b.renderable=!0,b.isMask=!1))}if(this._mask=a,this._mask){var b=this._mask.isMaskData?this._mask.maskObject:this._mask;b&&(0===b._maskRefCount&&(b.renderable=!1,b.isMask=!0),b._maskRefCount++)}}},enumerable:!1,configurable:!0}),b}(f.EventEmitter),l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.sortDirty=null,b}return j(b,a),b}(k);function m(a,b){return a.zIndex===b.zIndex?a._lastSortedIndex-b._lastSortedIndex:a.zIndex-b.zIndex}k.prototype.displayObjectUpdateTransform=k.prototype.updateTransform;var n=function(a){function b(){var b=a.call(this)||this;return b.children=[],b.sortableChildren=d.W0.SORTABLE_CHILDREN,b.sortDirty=!1,b}return j(b,a),b.prototype.onChildrenChange=function(a){},b.prototype.addChild=function(){for(var a=arguments,b=[],c=0;c<arguments.length;c++)b[c]=a[c];if(b.length>1)for(var d=0;d<b.length;d++)this.addChild(b[d]);else{var e=b[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return b[0]},b.prototype.addChildAt=function(a,b){if(b<0||b>this.children.length)throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);return a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.splice(b,0,a),this._boundsID++,this.onChildrenChange(b),a.emit("added",this),this.emit("childAdded",a,this,b),a},b.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);this.children[c]=b,this.children[d]=a,this.onChildrenChange(c<d?c:d)}},b.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw Error("The supplied DisplayObject must be a child of the caller");return b},b.prototype.setChildIndex=function(a,b){if(b<0||b>=this.children.length)throw Error("The index "+b+" supplied is out of bounds "+this.children.length);var c=this.getChildIndex(a);(0,f.removeItems)(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},b.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]},b.prototype.removeChild=function(){for(var a=arguments,b=[],c=0;c<arguments.length;c++)b[c]=a[c];if(b.length>1)for(var d=0;d<b.length;d++)this.removeChild(b[d]);else{var e=b[0],g=this.children.indexOf(e);if(-1===g)return null;e.parent=null,e.transform._parentID=-1,(0,f.removeItems)(this.children,g,1),this._boundsID++,this.onChildrenChange(g),e.emit("removed",this),this.emit("childRemoved",e,this,g)}return b[0]},b.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,b.transform._parentID=-1,(0,f.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),b.emit("removed",this),this.emit("childRemoved",b,this,a),b},b.prototype.removeChildren=function(a,b){void 0===a&&(a=0),void 0===b&&(b=this.children.length);var c,d=a,e=b,f=e-d;if(f>0&&f<=e){c=this.children.splice(d,f);for(var g=0;g<c.length;++g)c[g].parent=null,c[g].transform&&(c[g].transform._parentID=-1);this._boundsID++,this.onChildrenChange(a);for(var g=0;g<c.length;++g)c[g].emit("removed",this),this.emit("childRemoved",c[g],this,g);return c}if(0===f&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")},b.prototype.sortChildren=function(){for(var a=!1,b=0,c=this.children.length;b<c;++b){var d=this.children[b];d._lastSortedIndex=b,a||0===d.zIndex||(a=!0)}a&&this.children.length>1&&this.children.sort(m),this.sortDirty=!1},b.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a){var c=this.children[a];c.visible&&c.updateTransform()}},b.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];if(b.visible&&b.renderable)if(b.calculateBounds(),b._mask){var c=b._mask.isMaskData?b._mask.maskObject:b._mask;c?(c.calculateBounds(),this._bounds.addBoundsMask(b._bounds,c._bounds)):this._bounds.addBounds(b._bounds)}else b.filterArea?this._bounds.addBoundsArea(b._bounds,b.filterArea):this._bounds.addBounds(b._bounds)}this._bounds.updateID=this._boundsID},b.prototype.getLocalBounds=function(b,c){void 0===c&&(c=!1);var d=a.prototype.getLocalBounds.call(this,b);if(!c)for(var e=0,f=this.children.length;e<f;++e){var g=this.children[e];g.visible&&g.updateTransform()}return d},b.prototype._calculateBounds=function(){},b.prototype._renderWithCulling=function(a){var c,d,e=a.renderTexture.sourceFrame;if(e.width>0&&e.height>0){if(this.cullArea?(c=this.cullArea,d=this.worldTransform):this._render!==b.prototype._render&&(c=this.getBounds(!0)),c&&e.intersects(c,d))this._render(a);else if(this.cullArea)return;for(var f=0,g=this.children.length;f<g;++f){var h=this.children[f],i=h.cullable;h.cullable=i||!this.cullArea,h.render(a),h.cullable=i}}},b.prototype.render=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(a);else if(this.cullable)this._renderWithCulling(a);else{this._render(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].render(a)}},b.prototype.renderAdvanced=function(a){var b=this.filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var d=0;d<b.length;d++)b[d].enabled&&this._enabledFilters.push(b[d])}var e=b&&this._enabledFilters&&this._enabledFilters.length||c&&(!c.isMaskData||c.enabled&&(c.autoDetect||c.type!==g.vg.NONE));if(e&&a.batch.flush(),b&&this._enabledFilters&&this._enabledFilters.length&&a.filter.push(this,this._enabledFilters),c&&a.mask.push(this,this._mask),this.cullable)this._renderWithCulling(a);else{this._render(a);for(var d=0,f=this.children.length;d<f;++d)this.children[d].render(a)}e&&a.batch.flush(),c&&a.mask.pop(this),b&&this._enabledFilters&&this._enabledFilters.length&&a.filter.pop()},b.prototype._render=function(a){},b.prototype.destroy=function(b){a.prototype.destroy.call(this),this.sortDirty=!1;var c="boolean"==typeof b?b:b&&b.children,d=this.removeChildren(0,this.children.length);if(c)for(var e=0;e<d.length;++e)d[e].destroy(b)},Object.defineProperty(b.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a},enumerable:!1,configurable:!0}),b}(k);n.prototype.containerUpdateTransform=n.prototype.updateTransform}};